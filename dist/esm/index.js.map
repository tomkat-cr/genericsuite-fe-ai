{"version":3,"file":"index.js","sources":["../../src/lib/components/ChatBot/chatbot.general.functions.jsx","../../src/lib/helpers/iconsLibAiExtras.jsx","../../src/lib/constants/class_name_constants.jsx","../../src/lib/components/ChatBot/VoiceMessageRecorder.jsx","../../src/lib/components/ChatBot/chatbot.db.operations.jsx","../../src/lib/components/ChatBot/FileUploader.jsx","../../node_modules/style-inject/dist/style-inject.es.js","../../src/lib/components/ChatBot/CameraComponent.jsx","../../src/lib/components/ChatBot/UserInput.jsx","../../src/lib/components/ChatBot/NewConversationButton.jsx","../../src/lib/components/ChatBot/ConversationList.jsx","../../src/lib/components/ChatBot/ConversationsToggleButton.jsx","../../src/lib/components/ChatBot/AudioPlayer.jsx","../../src/lib/components/ChatBot/GoToTheBottom.jsx","../../src/lib/components/ChatBot/ScrollToBottomButton.jsx","../../src/lib/components/ChatBot/ChatCodeBlock.jsx","../../src/lib/components/ChatBot/ConversationBlock.jsx","../../src/lib/components/ChatBot/ChatBot.jsx","../../src/lib/components/App/App.jsx","../../src/lib/components/ChatBotButton/ChatBotButton.jsx","../../src/lib/index.cjs"],"sourcesContent":["import * as gs from \"genericsuite\";\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const setChatbotErrorMsg = (errorMsg, dispatch) => {\n    dispatch({ type: 'SET_ERROR_MSG', payload: errorMsg });\n}\n\nexport const setChatbotInputMessage = (inputMessage, dispatch) => {\n    dispatch({ type: 'SET_INPUT_MESSAGE', payload: inputMessage });\n}\n\nexport const addMessageToConversation = (newMessage, role, dispatch) => {\n    const systemMessage = { content: newMessage, role: role };\n    dispatch({ type: 'ADD_MESSAGE', payload: systemMessage });\n\n}\n\nexport const dispatchWaitAnimation = (waitAnimationFlag, dispatch) => {\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: waitAnimationFlag })\n}\n\nexport const setConversationListToggle = (conversationListToggle, dispatch) => {\n    if (debug) {\n        console_debug_log(`setConversationListToggle | conversationListToggle: ${conversationListToggle}`);\n    }\n    dispatch({ type: 'SET_CONVERSATION_LIST_TOGGLE', payload: conversationListToggle });\n}\n","import React from 'react';\n\nexport const iconsLibAiExtras = (\n    icon,\n    size,\n    width,\n    height,\n    alt,\n    id,\n    className,\n    role,\n) => {\n    let selectedSvg = null;\n    switch (icon) {\n        case 'play':\n            // Rounded: https://www.svgrepo.com/svg/532511/play\n            selectedSvg = (\n                <svg width=\"800px\" height=\"800px\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z\" stroke=\"#000000\" strokeWidth=\"2\" strokeLinejoin=\"round\"/>\n                </svg>\n            );\n            break;\n\n        case 'stop':\n            // faStop\n            // className=\"svg-inline--fa fa-stop fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"stop\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\"></path></svg>\n            );\n            break;\n\n        case 'arrow-up':\n            // faArrowUp\n            // className=\"svg-inline--fa fa-arrow-up fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>\n            );\n            break;\n\n        case 'arrow-down':\n            // faArrowDown\n            // className=\"svg-inline--fa fa-arrow-down fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-down\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z\"></path></svg>\n            );\n            break;\n\n        case 'times':\n            // faTimes\n            // className=\"svg-inline--fa fa-times fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"times\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 352 512\"><path fill=\"currentColor\" d=\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"></path></svg>\n            );\n            break;\n\n        case 'camera':\n            // faCamera\n            // className=\"svg-inline--fa fa-camera fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"camera\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z\"></path></svg>\n            );\n            break;\n\n        case 'camera-retro':\n            // faCameraRetro\n            // className=\"svg-inline--fa fa-camera-retro fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"camera-retro\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z\"></path></svg>\n            );\n            break;\n\n        case 'greater-than':\n            // faGreaterThan\n            // className=\"svg-inline--fa fa-greater-than fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"greater-than\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><path fill=\"currentColor\" d=\"M365.52 209.85L59.22 67.01c-16.06-7.49-35.15-.54-42.64 15.52L3.01 111.61c-7.49 16.06-.54 35.15 15.52 42.64L236.96 256.1 18.49 357.99C2.47 365.46-4.46 384.5 3.01 400.52l13.52 29C24 445.54 43.04 452.47 59.06 445l306.47-142.91a32.003 32.003 0 0 0 18.48-29v-34.23c-.01-12.45-7.21-23.76-18.49-29.01z\"></path></svg>\n            );\n            break;\n\n        case 'less-than':\n            // faLessThan\n            // className=\"svg-inline--fa fa-less-than fa-xl \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"less-than\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" style=\"color: lightgray;\"><path fill=\"currentColor\" d=\"M365.46 357.74L147.04 255.89l218.47-101.88c16.02-7.47 22.95-26.51 15.48-42.53l-13.52-29C360 66.46 340.96 59.53 324.94 67L18.48 209.91a32.014 32.014 0 0 0-18.48 29v34.24c0 12.44 7.21 23.75 18.48 29l306.31 142.83c16.06 7.49 35.15.54 42.64-15.52l13.56-29.08c7.49-16.06.54-35.15-15.53-42.64z\"></path></svg>\n            );\n            break;\n\n        case 'paperclip':\n            // faPaperclip\n            // className=\"svg-inline--fa fa-paperclip fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"paperclip\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z\"></path></svg>\n            );\n            break;\n\n        case 'microphone':\n            // faMicrophone\n            // className=\"svg-inline--fa fa-microphone fa-lg \"\n            selectedSvg = (\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"microphone\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 352 512\"><path fill=\"currentColor\" d=\"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z\"></path></svg>\n            );\n            break;\n\n        case 'two-lines-left-menu':\n            selectedSvg = (\n                <svg\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    // className=\"icon-xl-heavy md:hidden\"\n                >\n                    <path\n                        fillRule=\"evenodd\"\n                        clipRule=\"evenodd\"\n                        d=\"M3 8C3 7.44772 3.44772 7 4 7H20C20.5523 7 21 7.44772 21 8C21 8.55228 20.5523 9 20 9H4C3.44772 9 3 8.55228 3 8ZM3 16C3 15.4477 3.44772 15 4 15H14C14.5523 15 15 15.4477 15 16C15 16.5523 14.5523 17 14 17H4C3.44772 17 3 16.5523 3 16Z\"\n                        fill=\"currentColor\"\n                    >\n                    </path>\n                </svg>\n            );\n            break;\n\n        case 'conversation-list-toggle':\n            selectedSvg = (\n                <svg\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    // className=\"icon-xl-heavy max-md:hidden\"\n                    className={className}\n                >\n                    <path\n                        fillRule=\"evenodd\"\n                        clipRule=\"evenodd\"\n                        d=\"M8.85719 3H15.1428C16.2266 2.99999 17.1007 2.99998 17.8086 3.05782C18.5375 3.11737 19.1777 3.24318 19.77 3.54497C20.7108 4.02433 21.4757 4.78924 21.955 5.73005C22.2568 6.32234 22.3826 6.96253 22.4422 7.69138C22.5 8.39925 22.5 9.27339 22.5 10.3572V13.6428C22.5 14.7266 22.5 15.6008 22.4422 16.3086C22.3826 17.0375 22.2568 17.6777 21.955 18.27C21.4757 19.2108 20.7108 19.9757 19.77 20.455C19.1777 20.7568 18.5375 20.8826 17.8086 20.9422C17.1008 21 16.2266 21 15.1428 21H8.85717C7.77339 21 6.89925 21 6.19138 20.9422C5.46253 20.8826 4.82234 20.7568 4.23005 20.455C3.28924 19.9757 2.52433 19.2108 2.04497 18.27C1.74318 17.6777 1.61737 17.0375 1.55782 16.3086C1.49998 15.6007 1.49999 14.7266 1.5 13.6428V10.3572C1.49999 9.27341 1.49998 8.39926 1.55782 7.69138C1.61737 6.96253 1.74318 6.32234 2.04497 5.73005C2.52433 4.78924 3.28924 4.02433 4.23005 3.54497C4.82234 3.24318 5.46253 3.11737 6.19138 3.05782C6.89926 2.99998 7.77341 2.99999 8.85719 3ZM6.35424 5.05118C5.74907 5.10062 5.40138 5.19279 5.13803 5.32698C4.57354 5.6146 4.1146 6.07354 3.82698 6.63803C3.69279 6.90138 3.60062 7.24907 3.55118 7.85424C3.50078 8.47108 3.5 9.26339 3.5 10.4V13.6C3.5 14.7366 3.50078 15.5289 3.55118 16.1458C3.60062 16.7509 3.69279 17.0986 3.82698 17.362C4.1146 17.9265 4.57354 18.3854 5.13803 18.673C5.40138 18.8072 5.74907 18.8994 6.35424 18.9488C6.97108 18.9992 7.76339 19 8.9 19H9.5V5H8.9C7.76339 5 6.97108 5.00078 6.35424 5.05118ZM11.5 5V19H15.1C16.2366 19 17.0289 18.9992 17.6458 18.9488C18.2509 18.8994 18.5986 18.8072 18.862 18.673C19.4265 18.3854 19.8854 17.9265 20.173 17.362C20.3072 17.0986 20.3994 16.7509 20.4488 16.1458C20.4992 15.5289 20.5 14.7366 20.5 13.6V10.4C20.5 9.26339 20.4992 8.47108 20.4488 7.85424C20.3994 7.24907 20.3072 6.90138 20.173 6.63803C19.8854 6.07354 19.4265 5.6146 18.862 5.32698C18.5986 5.19279 18.2509 5.10062 17.6458 5.05118C17.0289 5.00078 16.2366 5 15.1 5H11.5ZM5 8.5C5 7.94772 5.44772 7.5 6 7.5H7C7.55229 7.5 8 7.94772 8 8.5C8 9.05229 7.55229 9.5 7 9.5H6C5.44772 9.5 5 9.05229 5 8.5ZM5 12C5 11.4477 5.44772 11 6 11H7C7.55229 11 8 11.4477 8 12C8 12.5523 7.55229 13 7 13H6C5.44772 13 5 12.5523 5 12Z\"\n                        fill=\"currentColor\"\n                    >\n                    </path>\n                </svg>\n            );\n            break;\n\n        case 'new-conversation':\n            selectedSvg = (\n                <svg\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    // className=\"icon-xl-heavy\"\n                    className={className}\n                >\n                    <path\n                        d=\"M15.6729 3.91287C16.8918 2.69392 18.8682 2.69392 20.0871 3.91287C21.3061 5.13182 21.3061 7.10813 20.0871 8.32708L14.1499 14.2643C13.3849 15.0293 12.3925 15.5255 11.3215 15.6785L9.14142 15.9899C8.82983 16.0344 8.51546 15.9297 8.29289 15.7071C8.07033 15.4845 7.96554 15.1701 8.01005 14.8586L8.32149 12.6785C8.47449 11.6075 8.97072 10.615 9.7357 9.85006L15.6729 3.91287ZM18.6729 5.32708C18.235 4.88918 17.525 4.88918 17.0871 5.32708L11.1499 11.2643C10.6909 11.7233 10.3932 12.3187 10.3014 12.9613L10.1785 13.8215L11.0386 13.6986C11.6812 13.6068 12.2767 13.3091 12.7357 12.8501L18.6729 6.91287C19.1108 6.47497 19.1108 5.76499 18.6729 5.32708ZM11 3.99929C11.0004 4.55157 10.5531 4.99963 10.0008 5.00007C9.00227 5.00084 8.29769 5.00827 7.74651 5.06064C7.20685 5.11191 6.88488 5.20117 6.63803 5.32695C6.07354 5.61457 5.6146 6.07351 5.32698 6.63799C5.19279 6.90135 5.10062 7.24904 5.05118 7.8542C5.00078 8.47105 5 9.26336 5 10.4V13.6C5 14.7366 5.00078 15.5289 5.05118 16.1457C5.10062 16.7509 5.19279 17.0986 5.32698 17.3619C5.6146 17.9264 6.07354 18.3854 6.63803 18.673C6.90138 18.8072 7.24907 18.8993 7.85424 18.9488C8.47108 18.9992 9.26339 19 10.4 19H13.6C14.7366 19 15.5289 18.9992 16.1458 18.9488C16.7509 18.8993 17.0986 18.8072 17.362 18.673C17.9265 18.3854 18.3854 17.9264 18.673 17.3619C18.7988 17.1151 18.8881 16.7931 18.9393 16.2535C18.9917 15.7023 18.9991 14.9977 18.9999 13.9992C19.0003 13.4469 19.4484 12.9995 20.0007 13C20.553 13.0004 21.0003 13.4485 20.9999 14.0007C20.9991 14.9789 20.9932 15.7808 20.9304 16.4426C20.8664 17.116 20.7385 17.7136 20.455 18.2699C19.9757 19.2107 19.2108 19.9756 18.27 20.455C17.6777 20.7568 17.0375 20.8826 16.3086 20.9421C15.6008 21 14.7266 21 13.6428 21H10.3572C9.27339 21 8.39925 21 7.69138 20.9421C6.96253 20.8826 6.32234 20.7568 5.73005 20.455C4.78924 19.9756 4.02433 19.2107 3.54497 18.2699C3.24318 17.6776 3.11737 17.0374 3.05782 16.3086C2.99998 15.6007 2.99999 14.7266 3 13.6428V10.3572C2.99999 9.27337 2.99998 8.39922 3.05782 7.69134C3.11737 6.96249 3.24318 6.3223 3.54497 5.73001C4.02433 4.7892 4.78924 4.0243 5.73005 3.54493C6.28633 3.26149 6.88399 3.13358 7.55735 3.06961C8.21919 3.00673 9.02103 3.00083 9.99922 3.00007C10.5515 2.99964 10.9996 3.447 11 3.99929Z\"\n                        fill=\"currentColor\"\n                    >\n                    </path>\n                </svg>\n            );\n            break;\n\n    }\n    return selectedSvg;\n};\n","import * as gs from \"genericsuite\";\n\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\n// ChatBot.css\n\nexport const CHATBOT_CONTAINER_DIV_1_CLASS = \"relative flex w-full overflow-hidden transition-colors z-0 chatbot-container-div-1-class\";\n\n// Conversation List column\n\nexport const CHATBOT_CONVERSATIONS_LIST_DIV_1_CLASS = \"ml-2 h-full flex-shrink-0 overflow-x-hidden 1-max-md:!w-0 chatbot-conversations-list-div-1-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_DIV_2_CLASS = \"w-[260px] h-full chatbot-conversations-list-div-2-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_DIV_3_CLASS = \"draggable relative h-full w-full flex-1 items-start border-white/20 chatbot-conversations-list-div-3-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_DIV_4_CLASS = \"flex h-full w-full flex-col 1-px-3 chatbot-conversations-list-div-4-class\";\n\nexport const CHATBOT_CONVERSATIONS_LIST_ROW_1_DIV_1_CLASS = \"flex justify-between flex h-[40px] mt-2 mb-4 items-center md:h-header-height chatbot-conversations-list-row-1-div-1-class\";\n\nexport const CHATBOT_NEW_CONVERSATION_BUTTON_DIV_1_CLASS = \"flex chatbot-new-conversation-button-div-1-class\";\nexport const CHATBOT_NEW_CONVERSATION_BUTTON_SPAN_CLASS = \"flex chatbot-new-conversation-button-span-class\";\nexport const CHATBOT_NEW_CONVERSATION_BUTTON_CLASS = `text-xs chatbot-new-conversation-button-class`;\n\nexport const CHATBOT_CONVERSATIONS_LIST_ROW_2_DIV_1_CLASS = \"flex-col flex-1 h-[90%] transition-opacity duration-500 relative -mr-2 pr-2 overflow-y-auto chatbot-conversations-list-row-2-div-1-class\";\n\nexport const CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS = \"space-y-1 chatbot-conversations-list-heading-div-1-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_2_CLASS = \"mb-2 text-sm chatbot-conversations-list-heading-div-2-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_LM_CLASS = \"text-gray-400 chatbot-conversations-list-heading-text-lm-class\";\nexport const CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_DM_CLASS = \"text-gray-500 chatbot-conversations-list-heading-text-dm-class\";\n\nexport const CHATBOT_CONVERSATION_ITEM_DIV_1_CLASS = \"cursor-pointer align-middle flex chatbot-conversation-item-div-1-class\";\nexport const CHATBOT_CONVERSATION_ITEM_DIV_2_CLASS = \"w-[90%] chatbot-conversation-item-div-2-class\";\nexport const CHATBOT_CONVERSATION_ITEM_DESC_OUTTER_CLASS = \"p-1 rounded overflow-hidden text-ellipsis whitespace-nowrap chatbot-conversation-item-desc-outer-class\"\nexport const CHATBOT_CONVERSATION_ITEM_DESC_INNER_CLASS = \"overflow-hidden text-ellipsis whitespace-nowrap chatbot-conversation-item-desc-inner-class\"\n\nexport const CHATBOT_CONVERSATION_ITEM_SEPARATOR_CLASS = \"w-[2%] chatbot-conversation-item-separator-class\"\n\nexport const CHATBOT_CONVERSATION_ITEM_DELETE_DIV_CLASS = \"w-[5%] p-1 rounded chatbot-conversation-item-delete-div-class\"\nexport const CHATBOT_CONVERSATION_ITEM_DELETE_BUTTON_CLASS = \"chatbot-conversation-item-delete-button-class\"\n\nexport const CHATBOT_CONVERSATIONS_TOGGLE_BUTTON_CLASS = \"flex justify-start chatbot-conversations-toggle-button-class\";\nexport const CHATBOT_CONVERSATIONS_HIDDEN_TOGGLE_BUTTON_CLASS = \"ml-2 mt-4 chatbot-conversations-hidden-toggle-button-class\";\n\n// Conversation messages column\n\nexport const CHATBOT_MESSAGE_AREA_DIV_1_CLASS = \"1-w-[80%] relative h-full 1-w-full flex-1 overflow-auto transition-width chatbot-message-area-div-1-class\";\nexport const CHATBOT_MESSAGE_AREA_DIV_2_CLASS = \"composer-parent flex h-full flex-col focus-visible:outline-0 chatbot-message-area-div-2-class\";\n\nexport const CHATBOT_MESSAGE_AREA_DIV_3_CLASS = \"flex-1 overflow-hidden chatbot-message-area-div-3-class\";\nexport const CHATBOT_MESSAGE_AREA_DIV_4_CLASS = \"relative h-full chatbot-message-area-div-4-class\";\n\n// Conversation messages row\n\nexport const CHATBOT_MESSAGE_BLOCK_CLASS = \"flex-1 p-4 mb-2 overflow-y-auto chatbot-message-block-class\";\n\nexport const CHATBOT_MESSAGE_CLASS = \"p-2 flex chatbot-message-class\";\nexport const CHATBOT_USER_MESSAGE_CONTAINER_CLASS = \"justify-end chatbot-user-message-container-class\";\n// export const CHATBOT_USER_MESSAGE_CLASS = \"p-2 rounded-full w-auto chatbot-user-message-class\";\nexport const CHATBOT_USER_MESSAGE_CLASS = \"p-2 rounded-xl w-auto chatbot-user-message-class\";\nexport const CHATBOT_USER_MESSAGE_LM_CLASS = \"bg-gray-300 chatbot-user-message-lm-class\";\nexport const CHATBOT_USER_MESSAGE_DM_CLASS = \"bg-gray-500 chatbot-user-message-dm-class\";\nexport const CHATBOT_BOT_MESSAGE_CONTAINER_CLASS = \"justify-start chatbot-bot-message-container-class\";\nexport const CHATBOT_BOT_MESSAGE_CLASS = \"p-1 rounded chatbot-bot-message-class\";\nexport const CHATBOT_BOT_MESSAGE_LM_CLASS = \"chatbot-bot-message-lm-class\";\nexport const CHATBOT_BOT_MESSAGE_DM_CLASS = \"chatbot-bot-message-dm-class\";\n\nexport const CHATBOT_FORMAT_MESSAGE_DIV_1_CLASS = \"chatbot-format-message-div-1-class\";\nexport const CHATBOT_FORMAT_MESSAGE_DIV_2_CLASS = \"rounded-md p-2 shadow-sm chatbot-format-message-div-2-class\";\nexport const CHATBOT_FORMAT_MESSAGE_ATTACHMENT_MESSAGE_CLASS = \"text-black font-bold chatbot-format-message-attachment-message-class\";\nexport const CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_DIV_CLASS = \"mt-2 chatbot-format-message-attachment-image-div-class\";\nexport const CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_IMG_CLASS = \"rounded-md chatbot-format-message-attachment-image-img-class\";\n\n// User input area row\n\nexport const CHATBOT_INPUT_AREA_DIV_1_CLASS = \"md:pt-0 dark:border-white/20 md:border-transparent md:dark:border-transparent w-full chatbot-input-area-div-1-class\";\nexport const CHATBOT_INPUT_AREA_DIV_2_CLASS = \"text-base px-3 md:px-4 m-auto w-full md:px-5 lg:px-4 xl:px-5 chatbot-input-area-div-2-class\";\nexport const CHATBOT_INPUT_AREA_DIV_3_CLASS = \"mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem] chatbot-input-area-div-3-class\";\nexport const CHATBOT_INPUT_AREA_DIV_4_CLASS = \"mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem] chatbot-input-area-div-4-class\";\nexport const CHATBOT_INPUT_AREA_DIV_5_CLASS = \"relative flex h-full max-w-full flex-1 flex-col chatbot-input-area-div-5-class\";\nexport const CHATBOT_INPUT_AREA_DIV_61_CLASS = \"absolute bottom-full left-0 right-0 z-20 chatbot-input-area-div-61-class\";\nexport const CHATBOT_INPUT_AREA_DIV_62_CLASS = \"group relative flex w-full items-center chatbot-input-area-div-62-class\";\n\n// export const CHATBOT_INPUT_AREA_TEXTAREA_CLASS = \"p-2 mr-2 rounded-xl w-full resize-none max-h-[200px] overflow-y-hidden chatbot-input-area-textarea-class\";\nexport const CHATBOT_INPUT_AREA_TEXTAREA_CLASS = \"p-2 mr-2 rounded-xl w-full resize-none max-h-[200px] overflow-y-auto chatbot-input-area-textarea-class\";\nexport const CHATBOT_INPUT_AREA_TEXTAREA_LM_CLASS = \"bg-gray-300 chatbot-input-area-textarea-lm-class\";\nexport const CHATBOT_INPUT_AREA_TEXTAREA_DM_CLASS = \"chatbot-input-area-textarea-dm-class\";\nexport const CHATBOT_INPUT_AREA_BUTTON_CLASS = `${BUTTON_LISTING_CLASS} mr-2 chatbot-input-area-button-class`;\nexport const CHATBOT_INPUT_AREA_WAIT_ANIMATION_CLASS = \"ml-2 flex items-center chatbot-input-area-wait-animation-class\";\n\n// AudioPlayer.css\n\nexport const AUDIO_PLAYER_DIV_1_CLASS = \"flex items-center gap-4 bg-[#287991] rounded-2xl p-3 w-max text-white audio-player-div-1-class\";\nexport const AUDIO_PLAYER_MENU_CONTENT_CLASS = \"hidden absolute bg-[#f9f9f9] shadow-lg p-3 z-10 audio-player-menu-content-class\";\nexport const AUDIO_PLAYER_MENU_HOVER_CONTENT_CLASS = \"inline relative top-0.5 -right-2.5 p-0.75 rounded bg-gray-500 text-white cursor-pointer text-xs z-20 .menu:hover audio-player-menu-content-class\";\nexport const AUDIO_PLAYER_PLAY_BUTTON_CLASS = \"border-none focus:outline-none audio-player-play-button-class\";\n\n// CameraComponent.css\n\nexport const CAMERA_COMPONENT_DIV_1_CLASS = \"camera-component-div-1-class\";\nexport const CAMERA_COMPONENT_DIV_2_CLASS = \"min-w-full w-full flex items-center mr-3 camera-component-div-2-class\";\nexport const CAMERA_COMPONENT_BUTTON_SUB_CLASS = `${BUTTON_LISTING_CLASS} mr-2 camera-component-button-sub-class`;\nexport const CAMERA_COMPONENT_BUTTON_MAIN_CLASS = `border-none mr-2 text-sm camera-component-button-main-class`;\nexport const CAMERA_COMPONENT_VIDEO_CONTAINER_CLASS = \"relative w-full max-w-full camera-component-video-container-class\";\nexport const CAMERA_COMPONENT_PHOTO_CLASS = \"mr-2 camera-component-photo-class\";\nexport const CAMERA_COMPONENT_VIDEO_CLASS = \"w-full h-auto .video-container camera-component-video-class\";\nexport const CAMERA_COMPONENT_VIDEO_CANVAS_CLASS = \"mt-2 w-full camera-component-video-canvas-class\";\n\n// IMPORTANT: the overlay is a child of the video element\n// That's why CameraComponent.css is still imported in CameraComponent.py\nexport const CAMERA_COMPONENT_OVERLAY_CLASS = \"absolute top-0 left-0 w-full h-full flex flex-col items-center justify-around bg-black bg-opacity-50 camera-component-overlay-class\";\nexport const CAMERA_COMPONENT_OVERLAY_BUTTON_CLASS = \"py-2.5 px-5 text-base bg-blue-500 text-white border-none cursor-pointer hover:bg-blue-700 camera-component-overlay-button-class\";\n\n// ScrollToBottomButton.css\n\nexport const SCROLL_TO_BOTTOM_BUTTON_DIV_1_CLASS = \"relative flex flex-col justify-end items-center overflow-hidden 1-justify-center scroll-to-bottom-button-div-1-class\";\nexport const SCROLL_TO_BOTTOM_BUTTON_DIV_2_CLASS = 'absolute pb-10 mb-2 scroll-to-bottom-button-div-2-class';\nexport const SCROLL_TO_BOTTOM_BUTTON_DIV_3_CLASS = \"fixed mx-auto w-full max-w-md scroll-to-bottom-button-div-3-class\";\nexport const SCROLL_TO_BOTTOM_BUTTON_FLOAT_CLASS = \"w-10 h-10 flex items-center justify-center rounded-full shadow-md bg-gray-300 text-white scroll-to-bottom-button-float-class\";\nexport const SCROLL_TO_BOTTOM_BUTTON_ICON_CLASS = \"1-mt-3 text-center scroll-to-bottom-button-icon-class\";\n\n// FileUploader\n\nexport const FILE_UPLOADER_DIV_1_CLASS = \"file-uploader-div-1-class\";\nexport const FILE_UPLOADER_DIV_2_CLASS = \"flex items-center file-uploader-div-1-class\";\nexport const FILE_UPLOADER_BASE_BUTTON_CLASS = `${BUTTON_LISTING_CLASS} file-uploader-base-button-class`;\nexport const FILE_UPLOADER_BUTTON_CLASS = `border-none mr-2 file-uploader-button-class`;\nexport const FILE_UPLOADER_INPUT_AREA_CONTAINER_CLASS = \"flex items-center file-uploader-input-area-container-class\";\nexport const FILE_UPLOADER_INPUT_AREA_INPUT_CLASS = \"p-0 m-0 file-uploader-input-area-input-class\";\n\n// VoiceMessageRecorder\n\nexport const VOICE_MESSAGE_RECORDER_DIV_1_CLASS = \"voice-message-recorder-div-1-class\";\nexport const VOICE_MESSAGE_RECORDER_BUTTON_CLASS = `border-none mr-1 mt-1 voice-message-recorder-button-class`;\n\n// ChatBotButton\n\nexport const CHATBOT_BUTTON_DIV_1_CLASS = \"align-middle flex chatbot-button-div-1-class\";\nexport const CHATBOT_BUTTON_DIV_2_CLASS = \"ml-2 chatbot-button-div-2-class\";\nexport const CHATBOT_BUTTON_LLM_POPUP_DIV_1 = \"mt-5 chatbot-button-llm-popup-div-1-class\";\nexport const CHATBOT_BUTTON_LLM_POPUP_DIV_2 = \"chatbot-button-llm-popup-div-2-class\";\n","import React, {useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport {\n    VOICE_MESSAGE_RECORDER_BUTTON_CLASS,\n    VOICE_MESSAGE_RECORDER_DIV_1_CLASS,\n} from '../../constants/class_name_constants.jsx';\nimport {\n    setChatbotErrorMsg,\n    dispatchWaitAnimation,\n} from './chatbot.general.functions.jsx';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faMicrophone,\n//     faStop,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faMicrophone,\n//     faStop,\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst getMediaTypeToRecord = gs.media.getMediaTypeToRecord;\nconst mediaSupported = gs.media.mediaSupported;\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\nconst debug = false;\n\nconst extControlsToShowHide = ['user_input', 'user_input_submit', 'fileUploader', 'cameraComponent'];\n\nconst useMicRecorder = false;\nconst useAxios = (process.env.REACT_APP_USE_AXIOS || \"1\") == \"1\";\n\nexport const VoiceMessageRecorder = ({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    sendMessage,\n}) => {\n    const [isRecording, setIsRecording] = useState(false);\n    const [audioData, setAudioData] = useState(null);\n    const [errorMsg, setErrorMsg] = useState(null);\n    const mediaRecorderRef = useRef(null);\n\n    const startRecording = async () => {\n        toggleIdVisibility(\"off\", extControlsToShowHide);\n        setIsRecording(true);\n        setErrorMsg(null);\n        if (useMicRecorder) {\n            startMicRecording();\n        } else {\n            startMediaDevices();\n        }\n    }\n\n    const startMicRecording = async () => {\n        setErrorMsg(\"MicRecorder is not implemented...\");\n\n        // // npm install mic-recorder-to-mp3\n        // const MicRecorder = require('mic-recorder-to-mp3');\n        // const recorder = new MicRecorder({\n        //     bitRate: 128\n        // });\n        // mediaRecorderRef.current = recorder;\n\n        // // Start recording. Browser will request permission to use your microphone.\n        // mediaRecorderRef.current.start().then(() => {\n        //     // something else\n        // }).catch((e) => {\n        //     console.error(e);\n        //     const errorMsgAux = 'We could not start recording:';\n        //     console.error(errorMsg, e);\n        //     setIsRecording(false);\n        //     setErrorMsg(`${errorMsgAux} ${e.message}`);\n        // });\n    };\n    \n    const startMediaDevices = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const mediaType = getMediaTypeToRecord();\n\n            if (debug) console_debug_log(`VoiceMessageRecorder | startRecording | extension: ${mediaType[\"extension\"]}`);\n            if (debug) console_debug_log(\"mediaSupported\", mediaSupported());\n\n            // Set the MediaRecorder options   \n            const mediaRecorder = new MediaRecorder(stream, mediaType[\"options\"]);\n            mediaRecorderRef.current = mediaRecorder;\n\n            // Handle the data available event\n            const chunks = [];  \n            mediaRecorder.ondataavailable = (e) => {\n                chunks.push(e.data);\n            };\n\n            // Handle the stop event\n            mediaRecorder.onstop = () => {\n                const blob = new Blob(chunks, { type: `audio/${mediaType[\"extension\"]}` });\n                setAudioData(blob);\n            };\n\n            // Start recording\n            mediaRecorder.start(1000);\n\n        } catch (error) {\n            const errorMsgAux = 'Error starting recording:';\n            console.error(errorMsg, error);\n            setIsRecording(false);\n            setErrorMsg(`${errorMsgAux} ${error.message}`);\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n        }\n    };\n\n    const stopRecording = () => {\n        if (useMicRecorder) {\n            stopMicRecording();\n        } else {\n            stopMediaDevices();\n        }\n    };\n    \n    const stopMicRecording = () => {\n        if (mediaRecorderRef.current) {\n            setIsRecording(false);\n\n            // Once you are done singing your best song, stop and get the mp3.\n            mediaRecorderRef.current\n                .stop()\n                .getMp3().then(([buffer, blob]) => {\n                    // do what ever you want with buffer and blob\n                    setAudioData(blob);\n                    // // Example: Create a mp3 file and play\n                    // const file = new File(buffer, 'me-at-thevoice.mp3', {\n                    //     type: blob.type,\n                    //     lastModified: Date.now()\n                    // });\n                    // const player = new Audio(URL.createObjectURL(file));\n                    // player.play();\n                }).catch((e) => {\n                    const errorMsgAux = 'We could not retrieve your message:';\n                    console.error(errorMsg, e);\n                    setIsRecording(false);\n                    setErrorMsg(`${errorMsgAux} ${e.message}`);\n                });\n        }\n    };\n\n    const stopMediaDevices = () => {\n        if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n            mediaRecorderRef.current.stop();\n            setIsRecording(false);\n        }\n    };\n\n    const sendFile = async (url, formData, authHeader, queryParams) => {\n        const headers = Object.assign(\n            { \n                'Access-Control-Allow-Origin': '*',\n            }, \n            authHeader\n        );\n        try {\n            const response = await axios.post(url, formData, {\n                headers: headers,\n                params: queryParams,\n            });\n            // Hide WaitAnimation after fetching data\n            dispatchWaitAnimation(false, dispatch);\n            if (debug) {\n                console_debug_log('[FA] VoiceMessageRecorder is calling setExternalInputMessage', response.data);\n            }\n            // Send the transcript to the input text box\n            setExternalInputMessage(response.data.response);\n            // Restore buttons in the input text area\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            if (handleUpdateSize) {\n                handleUpdateSize();\n            }\n            // Send the message if the sendMessage function is provided (automatic send functionality).\n            if (sendMessage) {\n                sendMessage();\n            }\n        } catch (errorRaw) {\n            console.error(errorRaw);\n            // Hide WaitAnimation after the error\n            const error = errorRaw.message + (typeof errorRaw.response !== 'undefined' ?  \": \" + errorRaw.response.data : '');\n            // Hide WaitAnimation after the error\n            dispatchWaitAnimation(false, dispatch);\n            // Restore buttons in the input text area\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n            // Send error message to the chatbot\n            console.error('[FA] Error sending voice message:', error);\n            setErrorMsg(error.message);\n        }\n    };\n\n    useEffect(() => {\n        if (debug) {\n            console_debug_log(`VoiceMessageRecorder | useEffect() of sendVoiceMessage | isRecording: ${isRecording}`);\n        }\n        const sendVoiceMessage = async () => {\n            if (!audioData) {\n                return;\n            }\n            // Prepare the audit to send to the API\n            const formData = new FormData();\n            const extension = audioData.type.split('/')[1];\n            const fileName = `voiceMessage.${extension}`;\n            // const appleDevice = MediaRecorder.isTypeSupported('audio/mpeg');\n            const appleDevice = extension === 'mp4';\n            const sourceLang = (appleDevice ? 'get_user_lang' : 'auto');\n            const other = (appleDevice ? 'no_mp3_native_support' : '');\n            formData.append('file', audioData, fileName);\n            const options = {\n                raw_body: true,\n                headers: MULTIPART_FORM_DATA_HEADER\n            };\n            const query_params = {\n                \"extension\": extension,\n                \"source_lang\": sourceLang,\n                \"other\": other,\n            }\n            const db = new dbApiService({ url: \"ai/voice_to_text\" });\n            if (debug) {\n                console_debug_log(`VoiceMessageRecorder | sendVoiceMessage | fileName: ${fileName}`);\n            }\n            // Clear previous message in the input text area\n            setExternalInputMessage('');\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            // if (handleUpdateSize) {\n            //     handleUpdateSize();\n            // }\n            // Clear audio data\n            setAudioData(null);\n            // Show WaitAnimation while fetching data\n            dispatchWaitAnimation(true, dispatch);\n            if (useAxios) {\n                const authHeader = gs.authHeader.authHeader();\n                const endpointUrl = `${process.env.REACT_APP_API_URL}/${\"ai/voice_to_text\"}`;\n                await sendFile(endpointUrl, formData, authHeader, query_params)\n            } else {\n                db.getAll(query_params, formData, 'POST', options).then(\n                    data => {\n                        if (debug) {\n                            console_debug_log(\"VoiceMessageRecorder | sendVoiceMessage | data:\", data);\n                        }\n                        // Hide WaitAnimation after fetching data\n                        dispatchWaitAnimation(false, dispatch);\n                        if (debug) {\n                            console_debug_log('VoiceMessageRecorder is calling setExternalInputMessage', data.response);\n                        }\n                        // Send the transcript to the input text box\n                        setExternalInputMessage(data.response);\n                        // Restore buttons in the input text area\n                        toggleIdVisibility(\"on\", extControlsToShowHide);\n                        // Update the size of the input text area if the handleUpdateSize function is provided.\n                        // if (handleUpdateSize) {\n                        //     handleUpdateSize();\n                        // }\n                        // Send the message if the sendMessage function is provided (automatic send functionality).\n                        if (sendMessage) {\n                            sendMessage();\n                        }\n                    },\n                    error => {\n                        error = formatCaughtError(error);\n                        if (debug) {\n                            console_debug_log(\"VoiceMessageRecorder | sendVoiceMessage | ERROR:\", error);\n                        }\n                        // Hide WaitAnimation after the error\n                        dispatchWaitAnimation(false, dispatch);\n                        // Restore buttons in the input text area\n                        toggleIdVisibility(\"on\", extControlsToShowHide);\n                        // Send error message to the chatbot\n                        console.error('Error sending voice message:', error);\n                        setErrorMsg(error.message);\n                    }\n                );\n            }\n        };\n        if (!isRecording && audioData) {\n            sendVoiceMessage();\n        }\n    }, [isRecording, audioData, setExternalInputMessage, handleUpdateSize, dispatch, sendMessage]);\n\n    useEffect(() => {\n        if (errorMsg != null) {\n            setChatbotErrorMsg(`Error processing the voice message: ${errorMsg}`, dispatch);\n        }\n    }, [errorMsg, dispatch]);\n\n    return (\n        <div\n            id={id}\n            // className=\"voice-recorder\"\n            className={VOICE_MESSAGE_RECORDER_DIV_1_CLASS}\n        >\n            <button\n                onClick={isRecording ? stopRecording : startRecording}\n                className={VOICE_MESSAGE_RECORDER_BUTTON_CLASS}\n                title={isRecording ? 'Stop Recording' : 'Start Recording'}\n            >\n                {/* <FontAwesomeIcon icon={isRecording ? 'stop' : 'microphone'} size='lg' /> */}\n                <GsIcons\n                    icon={isRecording ? 'stop' : 'microphone'}\n                    // size='lg'\n                    size='m'\n                    additionalIconsFn={iconsLibAiExtras}\n                />\n            </button>\n        </div>\n    );\n};\n","import * as gs from \"genericsuite\";\n\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst dbApiService = gs.dbService.dbApiService;\nconst defaultValue = gs.genericEditorUtilities.defaultValue;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\n// Ensure to install the crypto library with: npm install crypto\n// import crypto from 'crypto';\n\nconst debug = false;\n\n// Current user\n\nexport const getCurrentUserId = (state, dispach) => {\n    if (debug) {\n        console_debug_log(\">>--> getCurrentUserId | state:\", state);\n    }\n    if (typeof state !== \"undefined\" && state !== null) {\n        return state.currentUser.id;\n    }\n    return null;\n}\n\n// DB: generic calls\n\nexport let abortController = null; // Define this outside your component or in a useRef if you need to persist the controller across renders without causing re-renders.\n\nexport const ApiCall = async (\n    dispatch,\n    params,\n) => {\n    const getActionName = (operationType) => {\n        let response;\n        switch (operationType) {\n            case \"getAll\":\n                response = \"load\";\n                break;\n            case \"getOne\": \n                response = \"load\";\n                break;\n            case \"createRow\": \n                response = \"creation\";\n                break;\n            case \"updateRow\": \n                response = \"update\";\n                break;\n            case \"deleteRow\": \n                response = \"deletion\";\n                break;\n            default:\n                response = \"[invalid operation]\";\n        }\n        return response;\n    }\n\n    const getRequestMethod = (operationType) => {\n        let response;\n        switch (operationType) {\n            case \"getAll\":\n            case \"getOne\": \n                response = \"GET\";\n                break;\n            case \"createRow\": \n                response = \"POST\";\n                break;\n            case \"updateRow\": \n                response = \"PUT\";\n                break;\n            case \"deleteRow\": \n                response = \"DELETE\";\n                break;\n            default:\n                response = \"[invalid operation]\";\n        }\n        return response;\n    }\n\n    const processGoodResponse = (data) => {\n        if (debug) {\n            console_debug_log(`AiAssistant | ${operationName} | data:`, data);\n        }\n        if (responseAttrName !== \"\" && typeof data[responseAttrName] === \"undefined\") {\n            return {\n                ok: false,\n                response: null,\n                errorMessage: `Element ${responseAttrName} not found in the API response`,\n            }\n        }\n        return {\n            ok: !data.error,\n            response: (responseAttrName === \"\" ? data : data[responseAttrName]),\n            errorMessage: data.error_message,\n        }\n    }\n\n    const processErrorResponse = (errorRaw) => {\n        const error = formatCaughtError(errorRaw);\n        if (debug) {\n            console_debug_log(`AiAssistant | ${operationName} | ERROR:`, error);\n        }\n        return {\n            ok: false,\n            errorMessage: error.message,\n        }\n    }\n\n    const verifyId = (id) => {\n        return {\n            ok: (id !== null),\n            errorMessage: (id !== null ? \"\" : `Missing ID: ${id}`),\n        }\n    }\n\n    const the= \"the\";\n    const was_successful = \"was successful\";\n    const error_in_the =  \"error in the\";\n\n    const operationType = defaultValue(params, \"operationType\");\n    const operationName = defaultValue(params, \"operationName\", \"ApiCall\");\n    const operationDescription = defaultValue(params, \"operationDescription\", operationName);\n    const ActionDescription = defaultValue(params, \"ActionDescription\", getActionName(operationType));\n    const endpointUrl = defaultValue(params, \"endpointUrl\");\n    const requestMethod = defaultValue(params, \"requestMethod\", getRequestMethod(operationType));\n    const id = defaultValue(params, \"id\", null);\n    const query = defaultValue(params, \"query\", {});\n    const body = defaultValue(params, \"body\", {});\n    const options = defaultValue(params, \"options\", {});\n    const responseAttrName = defaultValue(params, \"responseAttrName\", \"resultset\");\n\n    let response; \n    const db = new dbApiService({ url: endpointUrl });\n    if (debug) {\n        console_debug_log(\n            `AiAssistant | ${operationName} | operationType: ${operationType}, requestMethod: ${requestMethod}, endpointUrl:`,\n            endpointUrl, 'body:', body, 'query:', query, 'options:', options, 'id:', id,\n        );\n    }\n    // Set API processing status\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: true });\n    try {\n        switch (operationType) {\n            case \"getAll\":\n                response = await db.getAll(query, body, requestMethod, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"getOne\":\n                response = await db.getOne(query, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"createRow\":\n                response = await db.createRow(body, query, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"updateRow\":\n                response = verifyId(id);\n                if (response.ok) {\n                    response = await db.updateRow(id, body, query, options).then(\n                        data => { return processGoodResponse(data) },\n                        error => { return processErrorResponse(error) }\n                    );\n                }\n                break;\n            case \"deleteRow\":\n                response = verifyId(id);\n                if (response.ok) {\n                    response = await db.deleteRow(id, body, query, options).then(\n                        data => { return processGoodResponse(data) },\n                        error => { return processErrorResponse(error) }\n                    );\n                }\n                break;\n            default:\n                response = {\n                    ok: false,\n                    errorMessage: `Invalid operation type: \"${operationType}\"`,\n                }\n        }\n    } catch (error) {\n        response = {\n            ok: false,\n            errorMessage: error.message,\n        }\n    }\n    if (response.ok) {\n        response.operationMessage = `${the} ${operationDescription} ${ActionDescription} ${was_successful}`;\n    } else {\n        response.operationMessage = `${error_in_the} ${operationDescription} ${ActionDescription}`;\n        console_debug_log('ApiCall ERROR:');\n        console_debug_log(response.operationMessage);\n    }\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: false }); // Clear API processing status\n    if (debug) {\n        console_debug_log(`AiAssistant | ${operationName} | response:`, response);\n    }\n    return response;\n}\n\n// const sendMessageToBot = async (messageText) => {\n//     try {\n//         const response = await fetch('http://yourapi.com/path-to-bot', {\n//             method: 'POST',\n//             headers: { 'Content-Type': 'application/json' },\n//             body: JSON.stringify({ message: messageText }),\n//             signal: abortController.signal\n//         });\n//         if (response.ok) {\n//             const data = await response.json();\n//             // Assuming the response includes the bot's reply in data.reply\n//             return data.reply;\n//         } else {\n//             throw new Error('Bot API responded with an error.');\n//         }\n//     } catch (error) {\n//         console.error('Error communicating with the bot:', error);\n//         return null; // Handle error appropriately\n//     }\n// };\n\n// DB: Conversation List\n\n// const generateNewConversationId = () => {\n//     return crypto.randomUUID();\n// };\n\nexport const checkConversationIdChange = async (state, dispatch, externalApiResponse) => {\n    let cid = state.currentConversationId;\n    let apiResponse;\n    if (debug) {\n        console_debug_log(`>> checkConversationIdChange | cid: ${cid} | externalApiResponse:`, externalApiResponse);\n    }\n    if (typeof externalApiResponse['cid'] !== 'undefined' && \n        state.currentConversationId !== externalApiResponse['cid']\n    ) {\n        cid = externalApiResponse['cid'];\n        // dispatch({ type: 'SET_CONVERSATION_ID', payload: cid });\n        //\n        // Reload and refresh conversation list\n        apiResponse = await fetchConversations(state, dispatch);\n        if (!apiResponse.ok) {\n            console.error(\"ERROR in checkConversationIdChange > fetchConversations\");\n            console.error(apiResponse.operationMessage);\n            console.error(apiResponse.errorMessage);\n        }\n    }\n    // Always refresh current conversation to get the latest Chatbot response\n    if (debug) {\n        console_debug_log(`checkConversationIdChange | REFRESH CURRENT CONVERSATION`);\n    }\n    if (cid !== null) {\n        apiResponse = await fetchOneConversation(cid, state, dispatch);\n        if (!apiResponse.ok) {\n            console.error(\"ERROR in checkConversationIdChange > fetchOneConversation\");\n            console.error(apiResponse);\n            console.error(apiResponse.operationMessage);\n            console.error(apiResponse.errorMessage);\n        }\n    }\n    return cid;\n}\n\nexport const loadConversationList = async (state, dispatch) => {\n    const currentUserId = getCurrentUserId(state, dispatch);\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"loadConversationList\",\n            operationDescription: \"Conversation list\",\n            operationType: \"getAll\",\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUserId,\n            }\n        }\n    );\n    return response;\n};\n\nexport const fetchConversations = async (state, dispatch) => {\n    const apiResponse = await loadConversationList(state, dispatch);\n    if (apiResponse.ok) {\n        dispatch({ type: 'SET_CONVERSATIONS', payload: apiResponse.response });\n    }\n    return apiResponse;\n};\n\nexport const fetchOneConversation = async (conversationId, state, dispatch) => {\n    const apiResponse = await loadConversation(conversationId, state, dispatch);\n    if (debug) {\n        console_debug_log(`fetchOneConversation | conversationId: ${conversationId} | apiResponse:`, apiResponse);\n    }\n    if (apiResponse.ok) {\n        const data = {\n            conversationId: conversationId,\n            messages: apiResponse.response.messages,\n        }\n        dispatch({ type: 'SET_MESSAGES', payload: data });\n    }\n    return apiResponse;\n};\n\n// DB: Conversations\n\n// const saveConversation = async (conversationId, conversation, dispatch) => {\n//     const conversationAddition = {user_id: currentUserId}\n//     const response = ApiCall(\n//         dispatch,\n//         {\n//             operationName: \"saveConversation\",\n//             operationDescription: \"Conversation\",\n//             operationType: (conversationId === null ? \"createRow\" : \"updateRow\"),\n//             if: conversationId,\n//             endpointUrl: \"ai_chatbot_conversations\",\n//             body: {...conversation, conversationAddition},\n//         }\n//     );\n//     return response;\n// };\n\nexport const loadConversation = async (conversationId, state, dispatch) => {\n    const currentUserId = getCurrentUserId(state, dispatch);\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"loadConversation (one)\",\n            operationDescription: \"Conversation\",\n            operationType: \"getOne\",\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUserId,\n                id: conversationId,\n            }\n        }\n    );\n    return response;\n};\n\nexport const deleteConversation = async (conversationId, state, dispatch) => {\n    const currentUserId = getCurrentUserId(state, dispatch);\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"deleteConversation\",\n            operationDescription: \"Conversation\",\n            operationType: \"deleteRow\",\n            id: conversationId,\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUserId,\n            }\n        }\n    );\n    return response;\n};\n\n// BOT API management\n\nexport const sendMessageToBot = async (messageText, state, dispatch) => {\n    // Set the fetch() abort controller\n    if (abortController) {\n        if (debug) {\n            console_debug_log(`AiAssistant | sendMessageToBot | ABORTING PREVIOUS REQUEST`);\n        }\n        abortController.abort(); // Abort previous request if it exists\n    }\n    abortController = new AbortController(); // Create a new controller for the new request\n    const chatToSend = [\n        // ...state.messages,\n        {\"role\": \"user\", \"content\": messageText}\n    ];\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"sendMessageToBot\",\n            operationDescription: \"Communication with AiAssistant\",\n            operationType: \"getAll\",\n            endpointUrl: \"ai/chatbot\",\n            requestMethod: \"POST\",\n            body: {\n                \"conversation\": JSON.stringify(chatToSend),\n                \"cid\": state.currentConversationId\n            },\n            responseAttrName: \"\",\n            options: {\n                signal: abortController.signal,\n            },\n        }\n    );\n    if (debug) {\n        console_debug_log('AiAssistant | sendMessageToBot | response:', response);\n    }\n    if (response.ok) {\n        checkConversationIdChange(state, dispatch, response);\n    }\n\n    return response;\n};\n\nexport const handleCancelProcessing = (dispatch) => {\n    if (abortController) abortController.abort(); // Abort the ongoing request\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: false }); // Clear API processing status\n};\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport {\n    FILE_UPLOADER_BASE_BUTTON_CLASS,\n    FILE_UPLOADER_BUTTON_CLASS,\n    FILE_UPLOADER_DIV_1_CLASS,\n    FILE_UPLOADER_DIV_2_CLASS,\n    FILE_UPLOADER_INPUT_AREA_CONTAINER_CLASS,\n    FILE_UPLOADER_INPUT_AREA_INPUT_CLASS,\n} from '../../constants/class_name_constants.jsx';\nimport {\n    setChatbotErrorMsg,\n    addMessageToConversation,\n    dispatchWaitAnimation,\n} from './chatbot.general.functions.jsx';\nimport { checkConversationIdChange } from './chatbot.db.operations.jsx';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faArrowUp,\n//     faTimes,\n//     faPaperclip, // Added clip icon\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faArrowUp, // Select file + Upload\n//     faTimes, // Close\n//     faPaperclip, // Added clip icon\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\n// const BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\nconst debug = false;\n\nconst useAxios = (process.env.REACT_APP_USE_AXIOS || \"1\") == \"1\";\n\nexport function FileUploader({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    state,\n    question,\n    fileTypeFilter,\n}) {\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [buttonToggle, setButtonToggle] = useState(false);\n\n    const handleFileChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            if (fileTypeFilter) {\n                // \"image/*\"\n                if (file.type.startsWith('image/')) {\n                    setSelectedFile(file);\n                } else {\n                    alert('Please selecct a valid image file.');\n                }\n            } else {\n                setSelectedFile(file);\n            }\n        }\n    };\n\n    const sendFile = async (url, formData, authHeader, queryParams) => {\n        const headers = Object.assign(\n            { \n                'Access-Control-Allow-Origin': '*',\n            }, \n            authHeader\n        );\n        try {\n            const response = await axios.post(url, formData, {\n                headers: headers,\n                params: queryParams,\n            });\n            dispatchWaitAnimation(false, dispatch);\n            checkConversationIdChange(state, dispatch, response.data).then(\n                () => {\n                    // Current conversation updated successfully\n                },\n                error => {\n                    error = formatCaughtError(error);\n                    setChatbotErrorMsg(error.message, dispatch);\n                }\n            );\n            setSelectedFile(null);\n            setButtonToggle(false);\n        } catch (errorRaw) {\n            console.error(errorRaw);\n            // Hide WaitAnimation after the error\n            const error = errorRaw.message + (typeof errorRaw.response !== 'undefined' ?  \": \" + errorRaw.response.data : '');\n            console.error('Error uploading the file:', error);\n            setChatbotErrorMsg(error, dispatch);\n            dispatchWaitAnimation(false, dispatch);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (selectedFile) {\n            const formData = new FormData();\n            const fileSize = (selectedFile.size / (1024 * 1024)).toFixed(2); // Mb\n            formData.append('file', selectedFile, selectedFile.name);\n            const options = {\n                raw_body: true,\n                headers: MULTIPART_FORM_DATA_HEADER\n            };\n            const query = {\n                \"cid\": state.currentConversationId,\n                question: question,\n                // image_extension: fileExtension,\n                file_name: selectedFile.name,\n            }\n            addMessageToConversation(question, \"user\", dispatch)\n            addMessageToConversation(\n                '```File Attachment: \"' + selectedFile.name + '\" (' + fileSize + ' Mb)```', \"attachment\",\n                dispatch\n            )\n            // Empty external input message\n            setExternalInputMessage(\"\");\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            if (handleUpdateSize) {\n                handleUpdateSize();\n            }\n            // Show WaitAnimation while fetching data\n            dispatchWaitAnimation(true, dispatch);\n            if (debug) {\n                console_debug_log(`FileUploader | selectedFile:`, selectedFile);\n            }\n            if (useAxios) {\n                const authHeader = gs.authHeader.authHeader();\n                const endpointUrl = `${process.env.REACT_APP_API_URL}/${\"ai/image_to_text\"}`;\n                await sendFile(endpointUrl, formData, authHeader, query)\n            } else {\n                const db = new dbApiService({ url: \"ai/image_to_text\" });\n                db.getAll(query, formData, 'POST', options).then(\n                    data => {\n                        if (debug) {\n                            console_debug_log(\"FileUploader | handleUpload | data:\", data);\n                        }\n                        dispatchWaitAnimation(false, dispatch);\n                        if (debug) {\n                            console_debug_log(`FileUploader is calling checkConversationIdChange(\"${data}\")`);\n                        }\n                        // addMessageToConversation(data.response, \"assistant\", dispatch);\n                        checkConversationIdChange(state, dispatch, data).then(\n                            () => {\n                                // Current conversation updated successfully\n                            },\n                            error => {\n                                error = formatCaughtError(error);\n                                if (debug) {\n                                    console_debug_log(\"FileUploader | checkConversationIdChange | ERROR:\", error);\n                                }\n                                setChatbotErrorMsg(error.message, dispatch);\n                            }\n                        );\n                        setSelectedFile(null);\n                        setButtonToggle(false);\n                    },\n                    errorRaw => {\n                        // Hide WaitAnimation after the error\n                        const error = formatCaughtError(errorRaw);\n                        if (debug) {\n                            console_debug_log(\">>--> FileUploader | handleUpload | errorRaw:\", errorRaw);\n                        }\n                        dispatchWaitAnimation(false, dispatch);\n                        console.error('Error uploading the file:', error);\n                        // setExternalErrorMsg(error.message);\n                        setChatbotErrorMsg(error.message, dispatch);\n                        if (debug) {\n                            console_debug_log(\"FileUploader | after setExternalErrorMsg...\");\n                        }\n                    }\n                );\n            }\n        } else {\n            alert('Please select a file to upload.');\n        }\n    };\n\n    useEffect(() => {\n        const extControlsToShowHide = ['user_input_submit', 'voiceMessageRecorder', 'cameraComponent'];\n        toggleIdVisibility((buttonToggle ? \"off\" : \"on\"), extControlsToShowHide);\n    }, [buttonToggle]);\n\n    return (\n        <div\n            id={id}\n            className={FILE_UPLOADER_DIV_1_CLASS}\n        >\n            <div\n                className={FILE_UPLOADER_DIV_2_CLASS}\n            >\n                <button\n                    onClick={() => setButtonToggle(buttonToggle ? false : true)}\n                    className={FILE_UPLOADER_BUTTON_CLASS}\n                    title={buttonToggle ? 'Close' : 'Select File'}\n                >\n                    {/* <FontAwesomeIcon icon={buttonToggle ? 'times' : 'paperclip'} size='lg' /> */}\n                    <GsIcons\n                        icon={buttonToggle ? 'times' : 'paperclip'}\n                        // size='lg'\n                        size='m'\n                        additionalIconsFn={iconsLibAiExtras}\n                    />\n                </button>\n                {buttonToggle && (\n                    <div\n                        className={FILE_UPLOADER_INPUT_AREA_CONTAINER_CLASS}\n                    >\n                        <input\n                            type=\"file\"\n                            accept={fileTypeFilter ? fileTypeFilter : \"*\"}\n                            onChange={handleFileChange}\n                            className={FILE_UPLOADER_INPUT_AREA_INPUT_CLASS}\n                        />\n                        <button\n                            onClick={handleUpload}\n                            // className={`${BUTTON_LISTING_CLASS}`}\n                            className={FILE_UPLOADER_BASE_BUTTON_CLASS}\n                            title='Submit'\n                        >\n                            {/* <FontAwesomeIcon icon='arrow-up' size='lg'/> */}\n                            <GsIcons\n                                icon='arrow-up'\n                                size='lg'\n                                additionalIconsFn={iconsLibAiExtras}\n                            />\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState, useRef } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport {\n    CAMERA_COMPONENT_BUTTON_MAIN_CLASS,\n    CAMERA_COMPONENT_BUTTON_SUB_CLASS,\n    CAMERA_COMPONENT_DIV_1_CLASS,\n    CAMERA_COMPONENT_DIV_2_CLASS,\n    CAMERA_COMPONENT_PHOTO_CLASS,\n    CAMERA_COMPONENT_VIDEO_CANVAS_CLASS,\n    CAMERA_COMPONENT_VIDEO_CLASS,\n    CAMERA_COMPONENT_VIDEO_CONTAINER_CLASS,\n} from '../../constants/class_name_constants.jsx';\nimport {\n    dispatchWaitAnimation,\n    addMessageToConversation,\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\nimport { checkConversationIdChange } from './chatbot.db.operations.jsx';\n\nimport './CameraComponent.css';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faArrowUp,\n//     faTimes,\n//     faCamera, // Camera\n//     faCameraRetro, // Icon for taking the photo\n//     faExchangeAlt, // Icon for interchange\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faArrowUp, // Arrow-up: to select file + perform the upload\n//     faTimes, // X: to close the component controls\n//     faCamera, // Camera\n//     faCameraRetro, // Icon for taking the photo\n//     faExchangeAlt, // Icon for interchange\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\n// const BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst ModalPopUp = gs.ModalPopUp.ModalPopUp;\n\nconst debug = false;\n\nconst extControlsToShowHide = ['user_input_submit', 'voiceMessageRecorder', 'fileUploader'];\nconst VIDEO_OFF = { display: 'none' }\nconst VIDEO_ON = { display: '' };\n\nexport const CameraComponent = ({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    state,\n    question,\n}) => {\n    const [facingMode, setFacingMode] = useState('environment');\n    const [buttonToggle, setButtonToggle] = useState(false);\n    const [photo, setPhoto] = useState(null);\n    const [cameraOn, setCameraOn] = useState(true)\n\n    const videoRef = useRef(null);\n    const canvasRef = useRef(null);\n    const stream = useRef(null);\n    \n    const startCamera = async () => {\n        try {\n            stream.current = await navigator.mediaDevices.getUserMedia({ video: true });\n            videoRef.current.srcObject = stream.current;\n        } catch (error) {\n            console.error('Error accessing camera:', error);\n        }\n    }\n\n    const toggleCamera = async () => {\n        setFacingMode((prevMode) => (prevMode === 'user' ? 'environment' : 'user'));\n        let constraints = { video: { facingMode: { exact: facingMode } } };\n        stream.current= await navigator.mediaDevices.getUserMedia(constraints);\n        videoRef.current.srcObject = stream.current;\n    };\n    \n    const stopCamera = () => {\n        if (videoRef.current && videoRef.current.srcObject) {\n            const tracks = videoRef.current.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n            videoRef.current.srcObject = null;\n        }\n    };\n\n    const takePhoto = () => {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const dataUrl = canvas.toDataURL('image/jpeg');\n        setPhoto(dataUrl);\n    };\n\n    const cameraOnOff = (newState) => {\n        if (!newState) {\n            stopCamera();\n        } else {\n            startCamera();\n        }\n        setCameraOn(newState);\n    }\n\n    const sendPhoto = async () => {\n        if (!question) {\n            alert('Please enter a question before upload the photo.');\n            return;\n        }\n        if (!photo) {\n            alert('Please click on the \"Open Camera\" icon and take a photo.');\n            return;\n        }\n        const formData = new FormData();\n        // Convert base64 to Blob before appending to formData\n        const base64Response = await fetch(photo);\n        const blob = await base64Response.blob();\n        const fileExtension = 'jpg';\n        const timestamp = new Date().toISOString().replace(/[-:.]/g, '_').slice(0, -5);\n        const fileName = `image_capture_${timestamp}.${fileExtension}`;\n        const fileSize = blob.size / (1024 * 1024).toFixed(2); // Size in Mb\n        formData.append('file', blob, fileName);\n        const options = {\n            raw_body: true,\n            headers: MULTIPART_FORM_DATA_HEADER\n        };\n        const db = new dbApiService({ url: \"ai/image_to_text\" });\n        const query = {\n            \"cid\": state.currentConversationId,\n            question: question,\n            file_name: fileName,\n        }\n        addMessageToConversation(question, \"user\", dispatch);\n        addMessageToConversation(\n            '```File Attachment: \"' + fileName + '\" (' + fileSize + ' Mb)```', \"attachment\",\n            dispatch\n        );\n        // Empty external input message\n        setExternalInputMessage(\"\");\n        // Update the size of the input text area if the handleUpdateSize function is provided.\n        if (handleUpdateSize) {\n            handleUpdateSize();\n        }\n        // Show WaitAnimation while fetching data\n        dispatchWaitAnimation(true, dispatch);\n        db.getAll(query, formData, 'POST', options).then(\n            data => {\n                if (debug) {\n                    console_debug_log(\"FileUploader | handleUpload | data:\", data);\n                }\n                dispatchWaitAnimation(false, dispatch);\n                if (debug) {\n                    console_debug_log(`FileUploader is calling checkConversationIdChange(\"${data}\")`);\n                }\n                // addMessageToConversation(data.response, \"assistant\", dispatch);\n                checkConversationIdChange(state, dispatch, data).then(\n                    () => {\n                        // Current conversation updated successfully\n                    },\n                    error => {\n                        error = formatCaughtError(error);\n                        if (debug) {\n                            console_debug_log(\"FileUploader | checkConversationIdChange | ERROR:\", error);\n                        }\n                        setChatbotErrorMsg(error.message, dispatch);\n                    }\n                );\n                setButtonToggle(false);\n            },\n            error => {\n                // Hide WaitAnimation after the error\n                error = formatCaughtError(error);\n                if (debug) {\n                    console_debug_log(\"FileUploader | handleUpload | ERROR:\", error);\n                }\n                dispatchWaitAnimation(false, dispatch);\n                console.error('Error upploading the file:', error);\n                // setExternalErrorMsg(error.message);\n                setChatbotErrorMsg(error.message, dispatch);\n            }\n        );\n        stopCamera();\n        setPhoto(null);\n        setButtonToggle(false);\n        toggleIdVisibility(\"on\", extControlsToShowHide);\n    };\n\n    return (\n        <div\n            id={id}\n            className={CAMERA_COMPONENT_DIV_1_CLASS}\n        >\n            <div\n                className={CAMERA_COMPONENT_DIV_2_CLASS}\n            >\n                <button\n                    onClick={() => {\n                        if(buttonToggle) {\n                            stopCamera();\n                            setPhoto(null);\n                        } else {\n                            startCamera();\n                        }\n                        setButtonToggle(buttonToggle ? false : true);\n                        toggleIdVisibility((buttonToggle ? \"on\" : \"off\"), extControlsToShowHide);\n                    }}\n                    className={CAMERA_COMPONENT_BUTTON_MAIN_CLASS}\n                    title={buttonToggle ? 'Close' : 'Start Camera'}\n                >\n                    {/* <FontAwesomeIcon icon={buttonToggle ? 'times' : 'camera'} size='lg' /> */}\n                    <GsIcons\n                        icon={buttonToggle ? 'times' : 'camera'}\n                        // size='lg'\n                        size='m'\n                        additionalIconsFn={iconsLibAiExtras}\n                    />\n                </button>\n                {buttonToggle && (\n                    <>\n                        <button\n                            onClick={() => cameraOnOff(!cameraOn)}\n                            className={CAMERA_COMPONENT_BUTTON_SUB_CLASS}\n                            title='Start Camera'\n                        >\n                            {/* <FontAwesomeIcon icon='camera-retro' size='lg'/> */}\n                            <GsIcons\n                                icon='camera-retro'\n                                size='lg'\n                                additionalIconsFn={iconsLibAiExtras}\n                            />\n                        </button>\n                        <button\n                            onClick={sendPhoto}\n                            className={CAMERA_COMPONENT_BUTTON_SUB_CLASS}\n                            title='Send Photo'\n                        >\n                            {/* <FontAwesomeIcon icon='arrow-up' size='lg'/> */}\n                            <GsIcons\n                                icon='arrow-up'\n                                size='lg'\n                                additionalIconsFn={iconsLibAiExtras}\n                            />\n                        </button>\n                        {photo && (\n                            <img\n                                src={photo}\n                                alt=\"Captured\"\n                                className={CAMERA_COMPONENT_PHOTO_CLASS}\n                                style={{ width: '30px', height: '30px' }}\n                            />)\n                        }\n                        <div\n                            className={CAMERA_COMPONENT_VIDEO_CONTAINER_CLASS}\n                        >\n                            {\n                                (cameraOn && (\n                                    <ModalPopUp\n                                        closeButtonAction={() => cameraOnOff(!cameraOn)}\n                                        secondButtonMessage='Change Front/Back'\n                                        secondButtonAction={toggleCamera}\n                                        primaryButtonMessage='Take Photo'\n                                        primaryButtonAction={takePhoto}\n                                        allowOnHide={false}\n                                    >\n                                        <video\n                                            className={CAMERA_COMPONENT_VIDEO_CLASS}\n                                            ref={videoRef}\n                                            autoPlay\n                                            playsInline\n                                        />\n                                        <canvas\n                                            ref={canvasRef}\n                                            className={CAMERA_COMPONENT_VIDEO_CANVAS_CLASS}\n                                            style={photo ? VIDEO_ON : VIDEO_OFF } \n                                        />\n                                    </ModalPopUp>\n                                ))\n                            }\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n};\n","import React, { useState, useEffect } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport { VoiceMessageRecorder } from './VoiceMessageRecorder.jsx';\nimport { FileUploader } from './FileUploader.jsx';\nimport { CameraComponent } from './CameraComponent.jsx';\n\nimport {\n    CHATBOT_INPUT_AREA_DIV_1_CLASS,\n    CHATBOT_INPUT_AREA_BUTTON_CLASS,\n    CHATBOT_INPUT_AREA_WAIT_ANIMATION_CLASS,\n    CHATBOT_INPUT_AREA_TEXTAREA_CLASS,\n    CHATBOT_INPUT_AREA_DIV_2_CLASS,\n    CHATBOT_INPUT_AREA_DIV_3_CLASS,\n    CHATBOT_INPUT_AREA_DIV_4_CLASS,\n    CHATBOT_INPUT_AREA_DIV_5_CLASS,\n    CHATBOT_INPUT_AREA_DIV_62_CLASS,\n    CHATBOT_INPUT_AREA_DIV_61_CLASS,\n    CHATBOT_INPUT_AREA_TEXTAREA_DM_CLASS,\n    CHATBOT_INPUT_AREA_TEXTAREA_LM_CLASS,\n} from '../../constants/class_name_constants.jsx';\n\nimport {\n    handleCancelProcessing,\n    sendMessageToBot,\n    checkConversationIdChange,\n    fetchConversations,\n    fetchOneConversation,\n} from \"./chatbot.db.operations.jsx\";\n\nimport {\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\n\n/*\nWarning: Failed prop type: Invalid prop `size` of value `m` supplied to `FontAwesomeIcon`,\nexpected one of [\"2xs\",\"xs\",\"sm\",\"lg\",\"xl\",\"2xl\",\"1x\",\"2x\",\"3x\",\"4x\",\"5x\",\"6x\",\"7x\",\"8x\",\"9x\",\"10x\"].\n*/ \n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faGreaterThan,\n//     faStop,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faGreaterThan,\n//     faStop,\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst useAppContext = gs.AppContext.useAppContext;\nconst resizeManager = gs.ui.resizeManager;\n\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst convertId = gs.dbService.convertId;\n\nconst usePlainFetch = gs.responseHandlersService.usePlainFetch;\nconst growUpTextArea = gs.ui.growUpTextArea;\nconst resetTextArea = gs.ui.resetTextArea;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst WaitAnimation = gs.waitAnimationUtility.WaitAnimation;\nconst getFilenameFromContentDisposition = gs.blobFilesUtilities.getFilenameFromContentDisposition;\nconst responseHasFile = gs.blobFilesUtilities.responseHasFile;\n\n// const BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\nconst debug = false;\n\nconst useResetTextArea = false;\n// const userInputViewportHeight = 80;\nconst userInputViewportHeight = 66;\n/* <UserInput>.userInputViewportHeight must be the same as \".conversation-block.height\" in ChatBot.css */\n/* 81 for 81vh, 78 for 78vh, an so on */\nconst userInputMaxOffsetHeight = 200;\n\nconst setConversationBlockHeight = () => {\n    // Get the conversation block element\n    const conversationBlockObj = document.getElementById('conversation-block');\n    // Get the chatbot main container element\n    const chatbotContainerObj = document.getElementById('chatbot-container');\n    // Get the input area container element\n    const chatbotInputAreaObj = document.getElementById('chatbot-input-area');\n    // Assign the height of the main container to the chatbot container\n    if (chatbotInputAreaObj) {\n        conversationBlockObj.style.height = `${chatbotContainerObj.offsetHeight - chatbotInputAreaObj.offsetHeight - 10}px`;\n        if (debug) {\n            console_debug_log(\"conversationBlockObj.style.height:\", conversationBlockObj.style.height);\n        }\n    }\n}\n\nconst getWindowMaxHeight = () => {\n    const windowHeight = (window.screen.availHeight - (window.outerHeight - window.innerHeight));\n    return windowHeight;\n}\n\nconst setChatBotContainerHeight = () => {\n    // Get the chatbot main container element\n    const chatbotContainerObj = document.getElementById('chatbot-container');\n    if (!chatbotContainerObj || typeof chatbotContainerObj[\"parentElement\"] === \"undefined\") {\n        return;\n    }\n    // Get the <main /> tag element\n    const mainContainerObj = chatbotContainerObj.parentElement;\n    const mainContainerHeight = mainContainerObj ? (mainContainerObj.id === \"root\" ? getWindowMaxHeight() : mainContainerObj.offsetHeight) : getWindowMaxHeight();\n    // Get the <footer /> html tag element\n    const footerObj = document.getElementsByTagName('footer');\n    // const footerHeight = (sideMenu ? (footerObj && footerObj[0] ? footerObj[0].offsetHeight : 0) : 5);\n    const footerHeight = 5;\n    // Assign the height of the chatbot container to the main container minus the footer height\n    chatbotContainerObj.style.height = `${mainContainerHeight - footerHeight}px`;\n    if (debug) {\n        console_debug_log(\"|| mainContainerObj:\", mainContainerObj, 'mainContainerHeight:', mainContainerHeight, 'chatbotContainerObj:', chatbotContainerObj, 'chatbotContainerObj.offsetHeight:', chatbotContainerObj ? chatbotContainerObj.offsetHeight : -111);\n        console_debug_log(\"footerObj:\", footerObj, 'footerHeight:', footerHeight);\n        console_debug_log(\"NEW chatbotContainerObj.style.height (offsetHeight):\", chatbotContainerObj ? chatbotContainerObj.offsetHeight : -111);\n    }\n}\n\nconst setTextAreaHeight = () => {\n    // Adjust text area size\n    if (useResetTextArea) {\n        resetTextArea(\"user_input\", \"conversation-block\", userInputViewportHeight, userInputMaxOffsetHeight);\n    } else {\n        const user_input = document.getElementById(\"user_input\");\n        if (user_input) {\n            user_input.style.height = 'auto'\n            user_input.style.height = `${Math.min(user_input.scrollHeight, userInputMaxOffsetHeight)}px`\n        }\n    }\n}\n\nexport const resizeAll = () => {\n    setChatBotContainerHeight();\n    setTextAreaHeight();\n    setConversationBlockHeight();\n}\n\nexport const UserInput = ({\n    dispatch,\n    state,\n    userQuestion, // state.inputMessage\n}) => {\n    const { theme, isWide, isDarkMode, sideMenu } = useAppContext();\n    const [inputMessage, setInputMessage] = useState(userQuestion);\n    const [updateSize, setUpdateSize] = useState(false);\n\n    useEffect(() => {\n        resizeAll();\n    }, []);\n    \n    useEffect(() => {\n        const resizer = resizeManager(() => {\n            resizeAll();\n        })\n        resizer.addListener();\n        return () => resizer.removeListener();\n    }, [])\n\n    useEffect(() => {\n        setInputMessage(state.inputMessage);\n    }, [state.inputMessage]);\n\n    useEffect(() => {\n        setTextAreaHeight();\n    }, [updateSize, inputMessage]);\n\n    // Function to handle adjust text area size on input change from external component\n    const handleUpdateSize = () => {\n        setUpdateSize(!updateSize)\n    };\n\n    // Function to handle input change\n    const handleInputChange = (e) => {\n        /* IMPORTANT:\n           ONLY one call to a useState() is allowed when external component\n           calls a internal function or useState.\n           THE SOLUTION IS: pass the various function or useState to the external component\n           and call them one after another from it.\n        */\n        if (typeof e === \"string\") {\n            setInputMessage(e);\n        } else {\n            if (debug) {\n                console_debug_log(`InputBlock | handleInputChange: \"${e}\"`);\n            }\n            setInputMessage(e.target.value);\n        }\n    };\n\n    // Function to handle sending a message\n    const sendMessage = async (newInputMessage = null) => {\n        const extControlsToShowHide = ['fileUploader', 'voiceMessageRecorder', 'cameraComponent'];\n        const botReplyDebug = false;\n        if (newInputMessage === null) {\n            newInputMessage = inputMessage;\n        }\n        if (typeof newInputMessage !== \"undefined\" && newInputMessage !== null && newInputMessage.trim() !== \"\") {\n            // Dispatch the message to the chat\n            const userMessage = { content: newInputMessage, role: 'user' }; // Adjust structure as needed\n            dispatch({ type: 'ADD_MESSAGE', payload: userMessage });\n            // Clear the user input\n            setInputMessage('');\n            // Adjust text area size\n            handleUpdateSize();\n            // Hide buttons other than the stop\n            toggleIdVisibility((\"off\"), extControlsToShowHide);\n            // Send the message to the bot and get the response\n            const botReply = await sendMessageToBot(newInputMessage, state, dispatch);\n            if (botReply.ok) {\n                let continueProcessing = true;\n                if (!usePlainFetch) {\n                    const headers = botReply.response.headers;\n                    if (botReplyDebug) console_debug_log('|||| botReply:', botReply)\n                    if (responseHasFile(headers)) {\n                        if (debug) console_debug_log('|||| OCTET-STREAM | botReply.response.file:', botReply.response.file);\n                        const fileUrl = botReply.response.file;\n                        const filename = getFilenameFromContentDisposition(headers);\n                        const botMessage = { content: botReply.response.response, role: 'assistant', attachment_url: fileUrl, filename: filename };\n                        dispatch({ type: 'ADD_MESSAGE', payload: botMessage });\n                        continueProcessing = false;\n                    }\n                }\n                if (continueProcessing) {\n                    // Add the response to the conversation...\n                    if (botReply.response.response) {\n                        const botMessage = { content: botReply.response.response, role: 'assistant' };\n                        dispatch({ type: 'ADD_MESSAGE', payload: botMessage });\n                    }\n                    // Read current conversation from the database to refresh the chat space\n                    checkConversationIdChange(state, dispatch, botReply.response).then(\n                        () => {\n                            // Current conversation updated successfully\n                        },\n                        error => {\n                            console.error('>> Error updating current conversation:', error);\n                            error = formatCaughtError(error);\n                            setChatbotErrorMsg(error.message, dispatch);\n                        }\n                    );\n                }\n            } else {\n                // botReply.ok is not OK...\n                let errorToReport = botReply.errorMessage;\n\n                console.error('>> Error communicating with the bot:', errorToReport);\n\n                // Refresh the conversation list on any error...\n                fetchConversations(state, dispatch)\n                    .then(\n                        apiResponse => {\n                            if (debug) {\n                                console_debug_log(`>>> UserInput converstion list refresh error | apiResponse:`, apiResponse);\n                            }\n                            if (!apiResponse.ok) {\n                                errorToReport = `\\n\\nAditionally, refreshing the conversations list: ${apiResponse.errorMessage}`;\n                            } else {\n                                // Try to refresh current conversation from botReply.response\n                                let cid = state.currentConversationId;\n                                if (cid === null) {\n                                    // New conversation... try to get the first element of the refreshed conversation list\n                                    if (state.conversations.length > 0) {\n                                        // There are conversations in the list...\n                                        if (apiResponse.response[0].title === newInputMessage) {\n                                            // Now we are sure the 1st conversation corresponds to the updated current conversation\n                                            // because the 1st conversation title is the same as the 1st message content\n                                            cid = convertId(apiResponse.response[0]._id);\n                                            dispatch({ type: 'SET_CONVERSATION_ID', payload: cid });\n                                        }\n                                    }\n                                }\n                                if (cid !== null) {\n                                    fetchOneConversation(cid, state, dispatch).then(\n                                        () => {\n                                            // Current conversation updated successfully\n                                            resizeAll();\n                                        },\n                                        error => {\n                                            error = formatCaughtError(error);\n                                            console.error('>> UserInput current conversation update error:', error);\n                                            errorToReport = `\\n\\nAditionally, reading current conversation: ${error}`;\n                                        }\n                                    );\n                                }\n                            }\n                        },\n                        error => {\n                            errorToReport = `\\n\\nAditionally: ${error}`;\n                        }\n                    );\n    \n                setChatbotErrorMsg(errorToReport, dispatch);\n            }\n            toggleIdVisibility((\"on\"), extControlsToShowHide);\n        }\n    };\n\n    return (\n        <div\n            id=\"chatbot-input-area\"\n            className={`${CHATBOT_INPUT_AREA_DIV_1_CLASS} ${theme.background}`}\n        >\n            <div\n                className={CHATBOT_INPUT_AREA_DIV_2_CLASS}\n            >\n                <div\n                    className={CHATBOT_INPUT_AREA_DIV_3_CLASS}\n                >\n                    <div\n                        className={CHATBOT_INPUT_AREA_DIV_4_CLASS}\n                    >\n                        <div\n                            className={CHATBOT_INPUT_AREA_DIV_5_CLASS}\n                        >\n                            <div\n                                className={CHATBOT_INPUT_AREA_DIV_61_CLASS}\n                            />\n                            <div\n                                className={CHATBOT_INPUT_AREA_DIV_62_CLASS}\n                            >\n                                <textarea\n                                    name=\"user_input\"\n                                    id=\"user_input\"\n                                    value={inputMessage}\n                                    className={`${CHATBOT_INPUT_AREA_TEXTAREA_CLASS} ${theme.input} ${isDarkMode ? CHATBOT_INPUT_AREA_TEXTAREA_DM_CLASS : CHATBOT_INPUT_AREA_TEXTAREA_LM_CLASS}`}\n                                    aria-label=\"Message AI Assistant...\"\n                                    rows=\"1\" \n                                    onChange={handleInputChange}\n                                    // onKeyDown={(event) => {\n                                    //     if (event.key === 'Enter') {\n                                    //         // setInputMessage(event.target.value);\n                                    //         sendMessage();\n                                    //     }\n                                    // }}\n                                    disabled={state && state.isApiProcessing}\n                                />\n                                <button\n                                    name=\"user_input_submit\"\n                                    id=\"user_input_submit\"\n                                    onClick={() => (state && state.isApiProcessing ? handleCancelProcessing(dispatch) : sendMessage())}\n                                    className={CHATBOT_INPUT_AREA_BUTTON_CLASS}\n                                    title={state &&  state.isApiProcessing ? 'Stop Processing' : 'Chat with AI Assistant'}\n                                >\n                                    {/* <FontAwesomeIcon icon={state && state.isApiProcessing ? 'stop' : 'greater-than'} size='lg'/> */}\n                                    <GsIcons\n                                        // icon={state && state.isApiProcessing ? 'stop' : 'greater-than'}\n                                        icon={state && state.isApiProcessing ? 'stop' : 'arrow-up'}\n                                        size='lg'\n                                        additionalIconsFn={iconsLibAiExtras}\n                                    />\n                                </button>\n                                <VoiceMessageRecorder\n                                    id='voiceMessageRecorder'\n                                    dispatch={dispatch}\n                                    // sendMessage={sendMessage}\n                                    setExternalInputMessage={handleInputChange}\n                                    handleUpdateSize={handleUpdateSize}\n                                />\n                                <FileUploader\n                                    id='fileUploader'\n                                    question={inputMessage}\n                                    setExternalInputMessage={handleInputChange}\n                                    handleUpdateSize={handleUpdateSize}\n                                    dispatch={dispatch}\n                                    state={state}\n                                    // fileTypeFilter=\"image/*\"\n                                />\n                                <CameraComponent\n                                    id='cameraComponent'\n                                    question={inputMessage}\n                                    setExternalInputMessage={handleInputChange}\n                                    handleUpdateSize={handleUpdateSize}\n                                    dispatch={dispatch}\n                                    state={state}\n                                />\n                                {state && state.isApiProcessing && \n                                    <div className={CHATBOT_INPUT_AREA_WAIT_ANIMATION_CLASS}><WaitAnimation /></div>\n                                }\n                                {\n                                    (useResetTextArea ?\n                                        growUpTextArea(\"user_input\", \"conversation-block\", userInputViewportHeight, userInputMaxOffsetHeight)\n                                            :\n                                        resizeAll()\n                                    )\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\nimport {\n    CHATBOT_NEW_CONVERSATION_BUTTON_CLASS,\n    CHATBOT_NEW_CONVERSATION_BUTTON_DIV_1_CLASS,\n    CHATBOT_NEW_CONVERSATION_BUTTON_SPAN_CLASS,\n} from '../../constants/class_name_constants.jsx';\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\n\n// import './ChatBot.css';\n\n// const BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n// //const INPUT_FLEXIBLE_CLASS = gs.classNameConstants.INPUT_FLEXIBLE_CLASS;\n\nconst GsIcons = gs.IconsLib.GsIcons;\n\n// const debug = false;\n\nexport const NewConversationButton = ({\n    dispatch,\n    // startNewConversation,\n}) => {\n\n    // Call this when you want to start a new conversation\n    const startNewConversation = () => {\n        // Generate a new conversation ID using UUID for enhanced security\n        // const newConversationId = generateNewConversationId();\n        dispatch({ type: 'START_NEW_CONVERSATION', payload: { conversationId: null } });\n    };\n\n    return (\n        <div\n            className={CHATBOT_NEW_CONVERSATION_BUTTON_DIV_1_CLASS}\n        >\n            <span\n                className={CHATBOT_NEW_CONVERSATION_BUTTON_SPAN_CLASS}\n            >\n                <button\n                    key='new-conversation-button'\n                    onClick={() => startNewConversation()}\n                    // className={`${BUTTON_LISTING_CLASS} text-xs mb-2`}\n                    className={CHATBOT_NEW_CONVERSATION_BUTTON_CLASS}\n                >\n                    {/* New Conversation */}\n                    <GsIcons\n                        icon={'new-conversation'}\n                        size='lg'\n                        additionalIconsFn={iconsLibAiExtras}\n                    />\n                </button>\n            </span>\n        </div>\n    );\n};\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    loadConversation,\n    deleteConversation,\n} from './chatbot.db.operations.jsx';\nimport {\n    CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_2_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_DM_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_LM_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DIV_1_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DIV_2_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DESC_INNER_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DESC_OUTTER_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DELETE_DIV_CLASS,\n    CHATBOT_CONVERSATION_ITEM_DELETE_BUTTON_CLASS,\n    CHATBOT_CONVERSATION_ITEM_SEPARATOR_CLASS,\n} from '../../constants/class_name_constants.jsx';\n\n// import './ChatBot.css';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faTrash,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faTrash,\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst convertId = gs.dbService.convertId;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst timestampToDate = gs.dateTimestamp.timestampToDate;\nconst useAppContext = gs.AppContext.useAppContext;\n\nconst HIDDEN_CLASS = gs.classNameConstants.HIDDEN_CLASS;\n\nconst debug = false;\n\n// const dateColumn = \"creation_date\";\nconst dateColumn = \"update_date\";\n\nexport const ConversationList = ({\n    state,\n    dispatch,\n    showSideBar,\n}) => {\n    const { theme, isWide, isDarkMode } = useAppContext();\n\n    const setErrorMsg = (errorMsg) => {\n        dispatch({ type: 'SET_ERROR_MSG', payload: errorMsg });\n    }\n\n    const h2_class = `${CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_2_CLASS} ${theme.isDarkMode ? CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_DM_CLASS : CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_LM_CLASS}`;\n\n    // Handle load conversation\n    const handleLoadConversation = async (conversationId, state, dispatch) => {\n        if (!showSideBar) {\n            return;\n        }\n        const apiResponse = await loadConversation(conversationId, state, dispatch);\n        if (debug) console_debug_log('handleLoadConversation | apiResponse:', apiResponse);\n        if (apiResponse.ok) {\n            const data = {\n                conversationId: conversationId,\n                messages: apiResponse.response.messages,\n            }\n            dispatch({ type: 'SET_MESSAGES', payload: data });\n        } else {\n            setErrorMsg(apiResponse.errorMessage);\n        }\n    };\n\n    const confirmDeleteConversation = async (conversationId, dispatch, title) => {\n        if (window.confirm(`'Are you sure you want to delete this conversation?\\n\\n${title}`)) {\n            handleDeleteConversation(conversationId, dispatch);\n        }\n    };\n\n    // Handle delete conversation\n    const handleDeleteConversation = async (conversationId, dispatch) => {\n        const startNew = (conversationId === state.currentConversationId);\n        const apiResponse = await deleteConversation(conversationId, state, dispatch);\n        if (debug) {\n            console_debug_log(`handleDeleteConversation | conversationId: ${conversationId} | state.currentConversationId: ${state.currentConversationId} | startNew: ${startNew} | apiResponse:`, apiResponse);\n        }\n        if (apiResponse.ok) {\n            dispatch({ type: 'DELETE_CONVERSATION', payload: conversationId });\n            if (startNew) {\n                dispatch({ type: 'START_NEW_CONVERSATION', payload: { conversationId: null } });\n            }\n        } else {\n            setErrorMsg(apiResponse.errorMessage);\n        }\n    };\n\n    const fixTitle = (title) => (title.length === 0 ? \"Empty\" : title);\n\n    const groupConversationsByDate = (conversations) => {\n        const groups = {\n            today: [],\n            yesterday: [],\n            lastSevenDays: [],\n            lastMonth: [],\n            older: {}\n        };\n        const now = new Date();\n        const today = now.setHours(0, 0, 0, 0);\n        const yesterday = new Date(today).setDate(now.getDate() - 1);\n        const sevenDaysAgo = new Date(today).setDate(now.getDate() - 7);\n        const oneMonthAgo = new Date(today).setMonth(now.getMonth() - 1);\n\n        conversations.forEach(conversation => {\n            const timestampUnixEpoch = conversation[dateColumn]*1000;\n            const conversationDate = new Date(timestampUnixEpoch);\n            const conversationTime = conversationDate.setHours(0, 0, 0, 0);\n            if (conversationTime === today) {\n                groups.today.push(conversation);\n            } else if (conversationTime === yesterday) {\n                groups.yesterday.push(conversation);\n            } else if (conversationTime > sevenDaysAgo) {\n                groups.lastSevenDays.push(conversation);\n            } else if (conversationTime > oneMonthAgo) {\n                groups.lastMonth.push(conversation);\n            } else {\n                const monthYear = conversationDate.toLocaleString('default', { month: 'long', year: 'numeric' });\n                if (!groups.older[monthYear]) {\n                    groups.older[monthYear] = [];\n                }\n                groups.older[monthYear].push(conversation);\n            }\n        });\n        return groups;\n    };\n\n    const renderConversations = (conversations) => {\n        return conversations.map(conversation => {\n            const convId = convertId(conversation._id);\n            // console.log('renderConversations | convId: ' + `${convId}_div...`);\n            // console.log('renderConversations | conversation:', conversation);\n            return (\n                <div\n                    key={`${convId}_main_div`}\n                    className={CHATBOT_CONVERSATION_ITEM_DIV_1_CLASS}\n                    onMouseOver={() => {\n                        const element = document.getElementById(`${convId}_options`)\n                        if (element) {\n                            element.style.display = 'block';\n                        }\n                    }}\n                    onMouseOut={() => {\n                        const element = document.getElementById(`${convId}_options`)\n                        if (element) {\n                            element.style.display = 'none';\n                        }\n                    }}\n                >\n                    <div\n                        key={`${convId}_inner_div`}\n                        className={CHATBOT_CONVERSATION_ITEM_DIV_2_CLASS}\n                    >\n                        <div\n                            key={`${convId}_desc_outter_div`}\n                            className={`${CHATBOT_CONVERSATION_ITEM_DESC_OUTTER_CLASS} ${theme.textHoverSide}`}\n                            onClick={() => handleLoadConversation(convId, state, dispatch)}\n                        >\n                            <button\n                                key={`${convId}_desc_button`}\n                                title={timestampToDate(conversation[dateColumn], true, \" \", false)}\n                            >\n                                <div\n                                    key={`${convId}_desc_inner_div`}\n                                    className={CHATBOT_CONVERSATION_ITEM_DESC_INNER_CLASS}\n                                >\n                                    {fixTitle(conversation.title)}\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                    <div\n                        id={`${convId}_options`}\n                        className={HIDDEN_CLASS}\n                    >\n                        <div\n                            className={CHATBOT_CONVERSATION_ITEM_SEPARATOR_CLASS}\n                        />\n                        <div\n                            key={`${convId}_delete_div`}\n                            // className={`${CHATBOT_CONVERSATION_ITEM_DELETE_DIV_CLASS} ${theme.textHoverSide}`}\n                            className={CHATBOT_CONVERSATION_ITEM_DELETE_DIV_CLASS}\n                        >\n                            <button\n                                key={`${convId}_delete_button`}\n                                type=\"button\"\n                                onClick={() => confirmDeleteConversation(convId, dispatch, conversation.title)}\n                                className={CHATBOT_CONVERSATION_ITEM_DELETE_BUTTON_CLASS}\n                                // className={`${CHATBOT_CONVERSATION_ITEM_DELETE_BUTTON_CLASS} ${theme.textHoverSide}`}\n                            >\n                                {/* <FontAwesomeIcon icon=\"trash\" size='xs' /> */}\n                                <GsIcons\n                                    icon=\"trash\"\n                                    size='xs'\n                                />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            );\n        });\n    };\n\n    if (!(state && state.conversations)) {\n        return null;\n    }\n\n    const groupedConversations = groupConversationsByDate(state.conversations);\n    return (\n        <div\n            key='conversation_list_main_div'\n            // style={{ display: (state.conversationListToggle ? '' : 'none') }}\n            className={(state.conversationListToggle ? '' : HIDDEN_CLASS)}\n        >\n            {groupedConversations.today.length > 0 && (\n                <div\n                    key=\"today\"\n                    className={CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS}\n                >\n                    <h2\n                        className={h2_class}\n                    >\n                        Today\n                    </h2>\n                    {renderConversations(groupedConversations.today)}\n                </div>\n            )}\n            {groupedConversations.yesterday.length > 0 && (\n                <div\n                    key=\"yesterday\"\n                    className={CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS}\n                >\n                    <h2\n                        className={h2_class}\n                    >\n                        Yesterday\n                    </h2>\n                    {renderConversations(groupedConversations.yesterday)}\n                </div>\n            )}\n            {groupedConversations.lastSevenDays.length > 0 && (\n                <div\n                    key=\"lastSevenDays\"\n                    className={CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS}\n                >\n                    <h2\n                        className={h2_class}\n                    >\n                        Last 7 Days\n                    </h2>\n                    {renderConversations(groupedConversations.lastSevenDays)}\n                </div>\n            )}\n            {groupedConversations.lastMonth.length > 0 && (\n                <div\n                    key=\"lastMonth\"\n                    className={CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS}\n                >\n                    <h2\n                        className={h2_class}\n                    >\n                        Last Month\n                    </h2>\n                    {renderConversations(groupedConversations.lastMonth)}\n                </div>\n            )}\n            {Object.keys(groupedConversations.older).map(monthYear => (\n                <div\n                    key={\"month_year_\" + monthYear}\n                    className={CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS}\n                >\n                    <h2\n                        className={h2_class}\n                    >\n                        {monthYear}\n                    </h2>\n                    {renderConversations(groupedConversations.older[monthYear])}\n                </div>\n            ))}\n        </div>\n    );\n}\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    CHATBOT_CONVERSATIONS_TOGGLE_BUTTON_CLASS,\n} from '../../constants/class_name_constants.jsx';\nimport { setConversationListToggle } from './chatbot.general.functions.jsx';\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\n\n// import './ChatBot.css';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faGreaterThan,\n//     faLessThan,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faGreaterThan,\n//     faLessThan,\n// );\n\nconst GsIcons = gs.IconsLib.GsIcons;\n// const ToggleSideBar = gs.NavLib.ToggleSideBar;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const ConversationsToggleButton = ({\n    id,\n    className,\n    state,\n    dispatch,\n}) => {\n    if (debug) {\n        console_debug_log('ConversationsToggleButton...');\n    }\n    return (\n        <>\n            {/* <button\n                key='conversation-list-toggle-button'\n                type='button'\n                className=\"bg-white border-none focus:outline-none\"\n                onClick={() => setConversationListToggle(!state.conversationListToggle, dispatch)}\n            >\n                <FontAwesomeIcon\n                    icon={state.conversationListToggle ? 'less-than' : 'greater-than'}\n                    size='xl'\n                    style={{ color: 'lightgray' }}\n                />\n            </button> */}\n            <button\n                key={id}\n                className={CHATBOT_CONVERSATIONS_TOGGLE_BUTTON_CLASS + \" \" + (className ?? '')}\n                onClick={() => setConversationListToggle(!state.conversationListToggle, dispatch)}\n            >\n                <GsIcons\n                    icon={'conversation-list-toggle'}\n                    size='lg'\n                    additionalIconsFn={iconsLibAiExtras}\n                />\n            </button>\n            {/* <ToggleSideBar\n                key='conversation-list-toggle-button'\n                onClick={() => setConversationListToggle(!state.conversationListToggle, dispatch)}\n                className={CHATBOT_CONVERSATIONS_TOGGLE_BUTTON_CLASS + \" \" + (className ?? '')}\n            >\n            </ToggleSideBar> */}\n        </>\n    )\n}\n","import React, { useState, useRef } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport {\n  AUDIO_PLAYER_DIV_1_CLASS,\n  AUDIO_PLAYER_MENU_CONTENT_CLASS,\n  AUDIO_PLAYER_MENU_HOVER_CONTENT_CLASS,\n  AUDIO_PLAYER_PLAY_BUTTON_CLASS,\n} from '../../constants/class_name_constants.jsx';\n// import './AudioPlayer.css';\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faPlay,\n//     faStop,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faPlay,\n//     faStop,\n// );\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst WARNING_MSG_CLASS = gs.classNameConstants.WARNING_MSG_CLASS;\nconst defaultFilenametoDownload = gs.blobFilesUtilities.defaultFilenametoDownload;\nconst decodeBlob = gs.blobFilesUtilities.decodeBlob;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\nconst browserAudioController = true;\n\nconst AudioPlayer = ({ blobUrl, filename, expired, errorMsgSuffix }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const audioPlayer = useRef(); // reference to the audio component\n\n  const fixBlob = () => {\n    if (!blobUrl) {\n      return;\n    }\n    fetch(blobUrl).then(r => {\n      r.blob().then(blob => {\n        const reader = new FileReader();\n        // reader.readAsDataURL(blob);  // Convert to data:audio/mpeg;base64,Ly9Qa3h...\n        reader.readAsText(blob);  // No convertion at all... just get what it receives...\n        reader.onloadend = function() {\n          const newBlobUrl = decodeBlob(reader.result, filename);\n          audioPlayer.current.src = newBlobUrl;\n          audioPlayer.current.play();\n        }\n      });\n    });\n  };\n\n  // Play & Pause toggle function\n  const togglePlayPause = () => {\n    const prevValue = isPlaying;\n    setIsPlaying(!prevValue);\n    if (!prevValue) {\n      audioPlayer.current.play().catch(error => {\n        if (debug) console_debug_log(\"AudioPlayer | togglePlayPause | error:\", error, 'error.message:', error.message);\n        const errorMsgs = [\n            \"Failed to load because no supported source was found.\",\n            \"The element has no supported sources.\",\n        ]\n        if (Object.values(errorMsgs).some(msg => error.message.includes(msg))) {\n          // Probably the data comes from AWS API Gateway in Base64 format\n          // Try to convert Base64 to Binary\n          fixBlob();\n        } else {\n          console.error(error);\n        }\n      });\n    } else {\n      audioPlayer.current.pause();\n    }\n  };\n\n  // Update the current time\n  const onPlaying = () => {\n    setCurrentTime(audioPlayer.current.currentTime);\n    setDuration(audioPlayer.current.duration);\n    if (audioPlayer.current.duration === audioPlayer.current.currentTime) {\n      setIsPlaying(false);\n    }\n  };\n\n  // Adjust current time as per the slider\n  const onScrub = (value) => {\n    setCurrentTime(value);\n    audioPlayer.current.currentTime = value;\n    if (!isPlaying) {\n      togglePlayPause();\n    }\n  };\n\n  // Download the audio file\n  const downloadAudio = () => {\n    const link = document.createElement('a');\n    link.href = blobUrl;\n    link.setAttribute('download', filename ? filename : defaultFilenametoDownload); // or any other format\n    document.body.appendChild(link);\n    link.click();\n  };\n\n  if (expired) {\n    return (\n      <div\n        className={WARNING_MSG_CLASS}\n      >\n        {`Audio file expired${errorMsgSuffix}`}\n      </div>\n    );\n  }\n\n  if (browserAudioController) {\n    return (\n      <>\n        <audio\n          ref={audioPlayer}\n          src={blobUrl}\n          controls\n          onBeforeInput={togglePlayPause}\n        />\n      </>\n    );\n  }\n\n  return (\n    <div\n      className={AUDIO_PLAYER_DIV_1_CLASS}\n    >\n      <audio ref={audioPlayer} src={blobUrl} onTimeUpdate={onPlaying} />\n      <button\n        onClick={togglePlayPause}\n        className={AUDIO_PLAYER_PLAY_BUTTON_CLASS}\n      >\n          {/* <FontAwesomeIcon icon={isPlaying ? 'stop' : 'play'} size='sm'/> */}\n          <GsIcons\n            icon={isPlaying ? 'stop' : 'play'}\n            size='sm'\n            additionalIconsFn={iconsLibAiExtras}\n          />\n      </button>\n      <input\n        type=\"range\"\n        value={currentTime}\n        step=\"1\"\n        min=\"0\"\n        max={duration}\n        onChange={(e) => onScrub(e.target.value)}\n      />\n      <div\n        className={AUDIO_PLAYER_MENU_HOVER_CONTENT_CLASS}\n      >\n        <button\n          onClick={() => {}}\n        >\n            ...\n        </button>\n        <div\n          className={AUDIO_PLAYER_MENU_CONTENT_CLASS}\n        >\n          <button\n            onClick={downloadAudio}\n          >\n              Download\n            </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n","import React, { useEffect } from 'react'\n\nimport * as gs from \"genericsuite\";\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const GoToTheBottom = ({ elementId, elementsToRender }) => {\n    const objDiv = document.getElementById(elementId);\n    if (debug) {\n        console_debug_log(`GoToTheBottom (${elementId}) | objDiv:`, objDiv)\n    }\n    useEffect(() => {\n        if (objDiv && elementsToRender !== '') {\n            // objDiv.scrollIntoView(false);\n            objDiv.scrollTop = objDiv.scrollHeight;\n            if (debug) {\n                console_debug_log(`GoToTheBottom (${elementId}) | objDiv.scrollTop: ${objDiv.scrollTop} | objDiv.scrollHeight: ${objDiv.scrollHeight}`)\n            }\n            // Sometimes it needs a second change, specially when the object is being populated\n            // objDiv.scrollTop = objDiv.scrollHeight;\n        }\n    }, [objDiv, elementsToRender, elementId]);\n    return (<></>);\n}\n","import React, { useEffect } from 'react'\n\nimport * as gs from \"genericsuite\";\n\nimport { iconsLibAiExtras } from '../../helpers/iconsLibAiExtras.jsx';\nimport {\n    SCROLL_TO_BOTTOM_BUTTON_DIV_1_CLASS,\n    SCROLL_TO_BOTTOM_BUTTON_DIV_2_CLASS,\n    SCROLL_TO_BOTTOM_BUTTON_DIV_3_CLASS,\n    SCROLL_TO_BOTTOM_BUTTON_FLOAT_CLASS,\n    SCROLL_TO_BOTTOM_BUTTON_ICON_CLASS\n} from '../../constants/class_name_constants.jsx';\n// import \"./ScrollToBottomButton.css\";\n\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import fontawesome from \"@fortawesome/fontawesome\";\n// import {\n//     faArrowDown,\n// } from \"@fortawesome/fontawesome-free-solid\";\n// fontawesome.library.add(\n//     faArrowDown,\n// );\n\nconst GsIcons = gs.IconsLib.GsIcons;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const ScrollToBottomButton = ({ elementId, elementsToRender }) => {\n    const element = document.getElementById(elementId);\n\n    const scrollToBottom = () => {\n        if (element) {\n            element.scrollTop = element.scrollHeight;\n        }\n    };\n\n    useEffect(() => {\n        if (element && elementsToRender !== '') {\n            // let lastScrollTop =\n            //     element.scrollY || element.scrollTop;\n            element.addEventListener(\n                'scroll',\n                function handleScroll() {\n                    // const scrollTopPosition =\n                    //     element.scrollY || element.scrollTop;\n                    // if (scrollTopPosition > lastScrollTop) {\n                    //     console.log('scrolling down');\n                    // } else if (scrollTopPosition < lastScrollTop) {\n                    //     console.log('scrolling up');\n                    // }\n                    // lastScrollTop =\n                    //     scrollTopPosition <= 0 ? 0 : scrollTopPosition;\n                    showDebugInfo(element, elementId);\n                    const buttonElement = document.getElementById('scroll-overfolw-button');\n                    buttonElement.style.visibility=(showButton(element));    \n                },\n                false,\n            );\n        }\n    }, [element, elementsToRender, elementId]);\n\n    showDebugInfo(element, elementId);\n    return (\n        <div\n            id='scroll-overfolw-button'\n            style={{visibility: showButton(element)}}\n            className={SCROLL_TO_BOTTOM_BUTTON_DIV_1_CLASS}\n        >\n            <div\n                className={SCROLL_TO_BOTTOM_BUTTON_DIV_2_CLASS}\n            >\n                <div\n                    className={SCROLL_TO_BOTTOM_BUTTON_DIV_3_CLASS}\n                >\n                    <button\n                        onClick={scrollToBottom}\n                        className={SCROLL_TO_BOTTOM_BUTTON_FLOAT_CLASS}\n                    >\n                        <i\n                            // className=\"a fa-plus my-float\"\n                            className={SCROLL_TO_BOTTOM_BUTTON_ICON_CLASS}\n                        >\n                            {/* <FontAwesomeIcon icon='arrow-down' size='lg'/> */}\n                            <GsIcons\n                                icon='arrow-down'\n                                size='lg'\n                                additionalIconsFn={iconsLibAiExtras}\n                            />\n                        </i>\n                    </button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst showButton = (element) => (\n    // 'visible' and 'hidden' cannot be VISIBLE_CLASS and HIDDEN_CLASS constants, should remain as those fixed strings...\n    ((element && element.scrollHeight > element.scrollTop+element.clientHeight) ? 'visible' : 'hidden')\n);\n\nconst showDebugInfo = (element, elementId) => {\n    if (debug && element) {\n        console_debug_log(` ScrollToBottomButton (${elementId}) | showButton: ${showButton(element)} | element.scrollTop: ${element.scrollTop} | element.scrollHeight: ${element.scrollHeight} |  element.clientHeight: ${ element.clientHeight} | element.offsetHeight: ${element.offsetHeight}`);\n    }\n}\n","import React from 'react';\n\n///////////////////////////\n\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter\n\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/master/AVAILABLE_LANGUAGES_HLJS.MD\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/master/AVAILABLE_LANGUAGES_PRISM.MD\n// \"Prism\" has more supported languages and the most intenresting, comprared with  \"HLJS\"\n\nimport { Prism, Light } from 'react-syntax-highlighter';\nimport { vscDarkPlus as shStyleforPrism } from 'react-syntax-highlighter/dist/cjs/styles/prism/index.js';\nimport { grayscale as shStyleForLight } from 'react-syntax-highlighter/dist/cjs/styles/hljs/index.js';\n\n///////////////////////////\n\nimport * as gs from \"genericsuite\";\n\nconst LinkifyText = gs.ui.LinkifyText;\nconst CopyButton = gs.ui.CopyButton;\nconst renderMarkdownContent = gs.ui.renderMarkdownContent;\n\nexport const ChatCodeBlock = ({ children, shType = \"prism\" }) => {\n    // Regular expression to match code blocks enclosed in ```\n    const codeRegex = /```([\\s\\S]*?)```/g;\n\n    // Split content into parts with and without code blocks\n    const parts = children.split(codeRegex);\n\n    return (\n        <>\n            {parts.map((part, index) => {\n                if (index % 2 === 0) {\n                    // Render non-code parts as markdown text\n                    // If part constains [] and (), return <LinkifyText ... />, else, call renderMarkdownContent()\n                    // if (part.includes('[') && part.includes(']') && part.includes('(') && part.includes(')')) {\n                    //     return (\n                    //         <LinkifyText key={`${index}-other`}>\n                    //             <i>{part}</i>\n                    //         </LinkifyText>\n                    //     );\n                    // }\n                    return (\n                        <>\n                            {renderMarkdownContent(part)}\n                        </>\n                    );\n                } else {\n                    // Handle code blocks\n                    let content = part.trim();\n                    let language = content.split('\\n')[0];\n                    \n                    // Special handling for plaintext\n                    if (language === 'plaintext') {\n                        content = content.substring(language.length + 1).trim();\n                        return (\n                            <div key={`${index}-plaintext`}>\n                                {renderMarkdownContent(content)}\n                            </div>\n                        );\n                    }\n\n                    content = content.substring(language.length + 1).trim();\n                    \n                    return (\n                        <div key={`${index}-content-wrapper`}>\n                            <div style={{ position: 'relative' }}>\n                                <div\n                                    key={`${index}-language`}\n                                    style={{\n                                        backgroundColor: 'rgb(30, 30, 30)',\n                                        color: 'wheat',\n                                        marginTop: '10px',\n                                        padding: '10px',\n                                        overflowX: 'auto',\n                                    }}\n                                >\n                                    {language}\n                                </div>\n                                <div key={`${index}-content`}>\n                                    {shType === \"prism\" ? (\n                                        <Prism\n                                            language={language}\n                                            style={shStyleforPrism}\n                                            wrapLongLines={true}\n                                        >\n                                            {content}\n                                        </Prism>\n                                    ) : (\n                                        <Light\n                                            language={language}\n                                            style={shStyleForLight}\n                                            wrapLongLines={true}\n                                        >\n                                            {content}\n                                        </Light>\n                                    )}\n                                    <CopyButton text={content} />\n                                </div>\n                            </div>\n                        </div>\n                    );\n                }\n            })}\n        </>\n    );\n};\n","import React, { useState, useEffect } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport AudioPlayer from './AudioPlayer.jsx';\nimport { GoToTheBottom } from './GoToTheBottom.jsx'\nimport { ScrollToBottomButton } from './ScrollToBottomButton.jsx'\nimport { ChatCodeBlock } from './ChatCodeBlock.jsx';\nimport {\n    CHATBOT_MESSAGE_BLOCK_CLASS,\n    CHATBOT_FORMAT_MESSAGE_DIV_1_CLASS,\n    CHATBOT_FORMAT_MESSAGE_DIV_2_CLASS,\n    CHATBOT_FORMAT_MESSAGE_ATTACHMENT_MESSAGE_CLASS,\n    CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_DIV_CLASS,\n    CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_IMG_CLASS,\n    CHATBOT_MESSAGE_CLASS,\n    CHATBOT_BOT_MESSAGE_CLASS,\n    CHATBOT_USER_MESSAGE_CLASS,\n    CHATBOT_USER_MESSAGE_DM_CLASS,\n    CHATBOT_USER_MESSAGE_LM_CLASS,\n    CHATBOT_BOT_MESSAGE_LM_CLASS,\n    CHATBOT_BOT_MESSAGE_DM_CLASS,\n    CHATBOT_USER_MESSAGE_CONTAINER_CLASS,\n    CHATBOT_BOT_MESSAGE_CONTAINER_CLASS,\n} from '../../constants/class_name_constants.jsx';\n\n// import './ChatBot.css';\n\nconst useAppContext = gs.AppContext.useAppContext;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst usePlainFetch = gs.responseHandlersService.usePlainFetch;\nconst getFileExtension = gs.blobFilesUtilities.getFileExtension;\nconst performDownload = gs.blobFilesUtilities.performDownload;\n\nconst INFO_MSG_CLASS = gs.classNameConstants.INFO_MSG_CLASS;\nconst WARNING_MSG_CLASS = gs.classNameConstants.WARNING_MSG_CLASS;\n\nconst debug = false;\nconst defaultDownloadFilename = 'file_with_no_name.mp3'\n\nexport const ConversationBlock = ({\n    id,\n    state,\n    handleRetry,\n}) => {\n    const { theme, isWide, isDarkMode } = useAppContext();\n\n    const getStyleClasses = () => ({        \n        \"userMessage\": `${theme.text} ${CHATBOT_USER_MESSAGE_CLASS} ${isDarkMode ? CHATBOT_USER_MESSAGE_DM_CLASS : CHATBOT_USER_MESSAGE_LM_CLASS}`,\n        \"userMessageContainer\": CHATBOT_USER_MESSAGE_CONTAINER_CLASS,\n        \"botMessage\": `${theme.label} ${CHATBOT_BOT_MESSAGE_CLASS} ${isDarkMode ? CHATBOT_BOT_MESSAGE_DM_CLASS : CHATBOT_BOT_MESSAGE_LM_CLASS}`,\n        \"botMessageContainer\": CHATBOT_BOT_MESSAGE_CONTAINER_CLASS,\n    });\n\n    const [elementsToRender, setElementsToRender] = useState('');\n    const [styleClass, setStyleClass] = useState(getStyleClasses());\n\n    useEffect(() => {\n        if (debug) console_debug_log(`ConversationBlock | isDarkMode: ${isDarkMode}`);\n        setStyleClass(getStyleClasses());\n    }, [theme, isDarkMode]);\n\n    if (debug) {\n        console_debug_log(`ConversationBlock | state.errorMsg: ${state.errorMsg} | state:`, state);\n    }\n\n    const formatMessage = (messageObject) => {\n        let message = messageObject.content;\n        const hasDownloadFileToken = message && message.includes(\"[SEND_FILE_BACK]\");\n        const downloadedFilename = hasDownloadFileToken ? message.replace(\"[SEND_FILE_BACK]=\", \"\").split('/').pop() : null;\n        const url = typeof messageObject.attachment_url !== \"undefined\" ? messageObject.attachment_url : null;\n        const hasAttachment = (url !== null || hasDownloadFileToken);\n        let filename = typeof messageObject.filename !== \"undefined\" ? messageObject.filename : downloadedFilename; \n        const extension = filename ? getFileExtension(filename) : null;\n        let errorMsgSuffix = usePlainFetch ? \" (No headers allowed)\" : \"\";\n        if (hasAttachment && extension) {\n            if (['wav', 'mp3'].includes(extension.toLowerCase())) {\n                return (\n                    <AudioPlayer\n                        blobUrl={url}\n                        filename={filename}\n                        expired={hasDownloadFileToken}\n                        errorMsgSuffix={errorMsgSuffix}\n                    />\n                );\n            } else {\n                if (hasDownloadFileToken) {\n                    return (\n                        <p\n                            className={WARNING_MSG_CLASS}\n                            title={filename}\n                        >\n                            {(['wav', 'mp3'].includes(extension.toLowerCase()) ? \"Audio file link\" : \"Link\") + ` expired...${errorMsgSuffix}`}\n                        </p>\n                    )\n                }\n                // Link to download the file calling the performDownload function   \n                return (\n                    <button\n                        className={INFO_MSG_CLASS}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            performDownload(url, filename);\n                        }}\n                    >\n                        {(message ? message : `Click here to download the \"${filename}\" file`)+errorMsgSuffix}\n                    </button>\n                );\n            }\n        }\n        if (hasAttachment || (message && message.startsWith('```File'))) {\n            if (message && message.startsWith('```')) {\n                message = message.substring(3, message.length - 3);\n                const firstWord = message.split(' ')[0];\n                message = message.substring(firstWord.length + 1).trim();\n            }\n            if (hasAttachment && !message) {\n                if (!filename) {\n                    filename = defaultDownloadFilename;\n                    errorMsgSuffix += (errorMsgSuffix.trim() === '' ? '' : '.') + ' WARNING: no file name received. Fix the Backend API to send headers.'\n                }\n                message = filename;\n            }\n            return (\n                <div\n                    className={CHATBOT_FORMAT_MESSAGE_DIV_1_CLASS}\n                >\n                    <div\n                        className={CHATBOT_FORMAT_MESSAGE_DIV_2_CLASS}\n                    >\n                        {hasAttachment && (\n                            <a\n                                href={messageObject.attachment_url}\n                                target='_blank'\n                                rel=\"noreferrer\"\n                                className={CHATBOT_FORMAT_MESSAGE_ATTACHMENT_MESSAGE_CLASS}\n                            >\n                                {message+errorMsgSuffix}\n                            </a>\n                        )}\n                        {!hasAttachment && (\n                            <>{message+errorMsgSuffix}</>\n                        )}\n                    </div>\n                    {hasAttachment && ['jpg', 'jpeg', 'gif', 'png', 'svg', 'bmp', 'webp', 'tiff'].includes(String(getFileExtension(messageObject.attachment_url)).toLowerCase()) && (\n                            <div\n                                className={CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_DIV_CLASS}\n                            >\n                                <img\n                                    className={CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_IMG_CLASS}\n                                    src={messageObject.attachment_url}\n                                    alt={`Attachment: ${message}`}\n                                    style={{maxHeight: 'auto', width: 'fit-content', maxWidth: '100%'}}\n                                />\n                            </div>\n                        )\n                    }\n                </div>\n            );\n        }\n        let shType = \"prism\";\n        // if (message.includes('\\n')) {\n        //     // https://www.markdownguide.org/basic-syntax/\n        //     // message.replace(/\\n/g, '<BR/>');\n        //     message = '```markdown```' + message;\n        //     shType = \"hljs\";\n        // }\n        if (message.includes('```plaintext```')) {\n            shType = \"hljs\";\n            // Remove the plaintext markers if they're at the start/end of the message\n            if (message.startsWith('```plaintext```')) {\n                message = message.substring('```plaintext```'.length);\n            }\n        }\n        \n        // If there are no code blocks, wrap the content in plaintext markers\n        if (!message.includes('```')) {\n            message = '```plaintext\\n' + message + '\\n```';\n        }\n        return (\n            <ChatCodeBlock\n                shType={shType}\n            >\n                {message}\n            </ChatCodeBlock>\n        );\n    }\n\n    useEffect(() => {\n        setElementsToRender(state.messages.map((message, index) => (\n            <div\n                key={index}\n                className={`${CHATBOT_MESSAGE_CLASS} ${message.role === 'user' ? styleClass.userMessageContainer : styleClass.botMessageContainer}`}\n            >\n                <div\n                    className={message.role === 'user' ? styleClass.userMessage : styleClass.botMessage}\n                >\n                    {formatMessage(message)}\n                </div>\n            </div>\n        )));\n    }, [state.messages])\n\n    return (\n        <>\n            <div\n                id={id ? id : \"conversation-block\"}\n                className={`${CHATBOT_MESSAGE_BLOCK_CLASS} ${theme.background}`}\n            >\n                {state && !state.errorMsg && state.messages && elementsToRender}\n            </div>\n            <ScrollToBottomButton\n                elementId={id ? id : \"conversation-block\"}\n                elementsToRender={elementsToRender}\n            />\n            <GoToTheBottom\n                elementId={id ? id : \"conversation-block\"}\n                elementsToRender={elementsToRender}\n            />\n        </>\n    );\n}\n","import React, { useEffect, useReducer } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    setChatbotInputMessage,\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\n\nimport { UserInput, resizeAll } from './UserInput.jsx';\nimport {\n    fetchConversations,\n} from './chatbot.db.operations.jsx';\nimport { NewConversationButton } from './NewConversationButton.jsx';\nimport { ConversationList } from './ConversationList.jsx';\nimport { ConversationsToggleButton } from './ConversationsToggleButton.jsx';\nimport { ConversationBlock } from './ConversationBlock.jsx';\n\n// import './ChatBot.css';\nimport {\n    CHATBOT_CONTAINER_DIV_1_CLASS,\n    CHATBOT_MESSAGE_AREA_DIV_1_CLASS,\n    CHATBOT_MESSAGE_AREA_DIV_2_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_DIV_1_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_DIV_2_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_DIV_3_CLASS,\n    CHATBOT_MESSAGE_AREA_DIV_3_CLASS,\n    CHATBOT_MESSAGE_AREA_DIV_4_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_DIV_4_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_ROW_1_DIV_1_CLASS,\n    CHATBOT_CONVERSATIONS_LIST_ROW_2_DIV_1_CLASS,\n    CHATBOT_CONVERSATIONS_HIDDEN_TOGGLE_BUTTON_CLASS,\n} from '../../constants/class_name_constants.jsx';\n\nconst convertId = gs.dbService.convertId;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst isMobileDevice = gs.ui.isMobileDevice;\nconst getUrlParams = gs.urlParams.getUrlParams;\nconst errorAndReEnter = gs.errorAndReenter.errorAndReEnter;\nconst useUser = gs.UserContext.useUser;\nconst useAppContext = gs.AppContext.useAppContext;\n\nconst HIDDEN_CLASS = gs.classNameConstants.HIDDEN_CLASS;\nconst isWindowWide = gs.ui.isWindowWide;\n\nconst debug = false;\n\nconst urlParams = getUrlParams();\n\n// A reducer function for chat state management\nconst chatReducer = (state, action) => {\n    switch (action.type) {\n\n        // Messages\n    \n        case 'ADD_MESSAGE':\n            // Adds a new message to the chat history\n            return {\n                ...state,\n                messages: [...state.messages, action.payload]\n            };\n\n        case 'SET_MESSAGES':\n            if (debug) {\n                console_debug_log(\" ChatReducer | SET_MESSAGES | action:\", action);\n            }\n            return {\n                ...state,\n                // Payload has an array of messages and the conversationId\n                currentConversationId: action.payload.conversationId,\n                messages: action.payload.messages,\n            };\n\n        // Conversations\n\n        // TODO\n        case 'CLEAR_CHAT':\n            // Clears the chat history\n            return {\n                ...state,\n                messages: []\n            };\n\n        case 'START_NEW_CONVERSATION':\n            return {\n                ...state,\n                currentConversationId: action.payload.conversationId,\n                messages: []\n            };\n\n        case 'SET_CONVERSATION_ID':\n            return {\n                ...state,\n                currentConversationId: action.payload,\n            };\n\n        // Conversation List\n\n        case 'SET_CONVERSATIONS':\n            return {\n                ...state,\n                conversations: action.payload\n            };\n\n        case 'DELETE_CONVERSATION':\n            return {\n                ...state,\n                conversations: state.conversations.filter(conversation => convertId(conversation._id) !== action.payload)\n            };\n\n        // Bot\n    \n        case 'API_PROCESSING_STATUS':\n            return {\n                ...state,\n                isApiProcessing: action.payload\n            };\n\n        case 'SET_INPUT_MESSAGE':\n            return {\n                ...state,\n                inputMessage: action.payload\n            };\n            \n        case 'SET_CONVERSATION_LIST_TOGGLE':\n            return {\n                ...state,\n                conversationListToggle: action.payload\n            };\n            \n        case 'SET_ERROR_MSG':\n            return {\n                ...state,\n                errorMsg: action.payload\n            };\n\n        // Current user\n\n        case 'SET_CURRENT_USER':\n            return {\n                ...state,\n                // Payload has the currentUser data\n                currentUser: action.payload,\n            };\n\n        // Not registered action\n    \n        default:\n            if (debug) {\n                console_debug_log(\"ChatReducer | NOT REGISTERED ACTION:\", action, \"|| state:\", state);\n            }\n            return state;\n    }\n};\n\n// Chatbot main component\n\nexport const ChatBot = ({\n    userQuestion = (urlParams.q ? decodeURIComponent(urlParams.q) : ''),\n    showSideBar = !(urlParams.ssb && urlParams.ssb === \"0\")\n}) => {\n    const { currentUser } = useUser();\n    const { theme, isWide, isDarkMode, sideMenu, setIsWide } = useAppContext();\n\n    const [state, dispatch] = useReducer(chatReducer, {\n        messages: [],\n        conversations: [],\n        currentConversationId: null,\n        isApiProcessing: false,\n        isTyping: false,\n        inputMessage: userQuestion,\n        // conversationListToggle: false, // conversation history sidebar off by default always\n        conversationListToggle: !isMobileDevice(), // conversation history sidebar on by default in desktop\n        errorMsg: null,\n        currentUser: currentUser,\n    });\n\n    const columnSizeList = () =>\n        (showSideBar && state.conversationListToggle ? (isMobileDevice() ? '60%' : '20%') : \"0%\")\n\n    // const columnSizeMessages = () =>\n    //     (showSideBar && state.conversationListToggle ? (isMobileDevice() ? '20%' : '80%') : \"100%\")\n    \n    if (debug) {\n        console_debug_log(\"AiAssistant STATE:\", state);\n        console_debug_log(\"AiAssistant Main | state.errorMsg:\", state.errorMsg);\n    }\n\n    // If there's an initial UserQuestion, send it inmediatelly to the LLM\n    // useEffect(() => {\n    //     if (userQuestion !== '') {\n    //         sendMessage(userQuestion);\n    //     }\n    // }, [userQuestion, sendMessage]);\n\n    const handleClose = (e) => {\n        setChatbotErrorMsg(null, dispatch);\n        resizeAll();\n    }\n\n    const handleRetry = (e) => {\n        if (state && state.messages) {\n            const lastUserMessage = state.messages.slice().reverse().find(\n                message => message.role === 'user' && message.content !== ''\n            );\n            if (debug) {\n                console_debug_log(\"handleRetry | lastUserMessage:\", lastUserMessage, \"state.messages:\", state.messages);\n            }\n            if (\n                typeof lastUserMessage !== \"undefined\" &&\n                lastUserMessage !== null &&\n                typeof lastUserMessage[\"content\"] !== \"undefined\"\n            ) {\n                if (debug) {\n                    console_debug_log(`handleRetry | setChatbotInputMessage: ${lastUserMessage.content}`);\n                }\n                setChatbotInputMessage(lastUserMessage.content, dispatch);\n            }\n        }\n        setChatbotErrorMsg(null, dispatch);\n        resizeAll();\n    };\n    \n    // Load conversations\n    useEffect(() => {\n        resizeAll();\n        fetchConversations(state, dispatch)\n            .then(\n                apiResponse => {\n                    if (debug) {\n                        console_debug_log(`>>> AiAssistant INITIAL useEffect |  apiResponse:`, apiResponse);\n                    }\n                    if (!apiResponse.ok) {\n                        setChatbotErrorMsg(apiResponse.errorMessage, dispatch)\n                    }\n                },\n                error => setChatbotErrorMsg(error, dispatch)\n            );\n        return () => {\n            // Cleanup\n            if (sideMenu) {\n                // Restore the side menu \"slide\" condition\n                setIsWide(isWindowWide());\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        dispatch({ type: 'SET_CURRENT_USER', payload: currentUser });\n    }, [currentUser]);\n\n    useEffect(() => {\n        if (sideMenu) {\n            // Set the side menu to \"slide\" as it's in mobile device mode\n            setIsWide(false);\n        } else {\n            setIsWide(isWindowWide());\n        }\n    }, [sideMenu]);\n\n    return (\n        <div\n            id='chatbot-container'\n            className={`${CHATBOT_CONTAINER_DIV_1_CLASS} ${theme.background}`}\n        >\n            {/* Error message */}\n            {state.errorMsg && (\n                <>\n                    {errorAndReEnter(state.errorMsg, null, null, handleRetry, null, false, true, handleClose)}\n                </>\n            )}\n            {/* Conversarion toggle button (when the conversation list is not visible) */}\n            {!(showSideBar && state.conversationListToggle) && (\n                <ConversationsToggleButton\n                    id='conversations-toggle-button-1'\n                    className={CHATBOT_CONVERSATIONS_HIDDEN_TOGGLE_BUTTON_CLASS}\n                    state={state}\n                    dispatch={dispatch}\n                />\n            )}\n            {/* Conversarion list area */}\n            <div\n                className={CHATBOT_CONVERSATIONS_LIST_DIV_1_CLASS + (showSideBar && state.conversationListToggle ? '' : HIDDEN_CLASS)}\n                style={{ width: columnSizeList() }}\n            >\n                <div\n                    className={CHATBOT_CONVERSATIONS_LIST_DIV_2_CLASS}\n                >\n                    <div\n                        className={CHATBOT_CONVERSATIONS_LIST_DIV_3_CLASS}\n                    >\n                        <div\n                            className={CHATBOT_CONVERSATIONS_LIST_DIV_4_CLASS}\n                        >\n                            <div\n                                className={CHATBOT_CONVERSATIONS_LIST_ROW_1_DIV_1_CLASS}\n                            >\n                                <ConversationsToggleButton\n                                    id='conversations-toggle-button-2'\n                                    className={showSideBar ? '' : HIDDEN_CLASS}\n                                    state={state}\n                                    dispatch={dispatch}\n                                />\n                                <NewConversationButton\n                                    dispatch={dispatch}\n                                />\n                            </div>\n                            <div\n                                className={CHATBOT_CONVERSATIONS_LIST_ROW_2_DIV_1_CLASS}\n                            >\n                                <ConversationList\n                                    state={state}\n                                    dispatch={dispatch}\n                                    showSideBar={showSideBar}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Conversation messages area */}\n            <div\n                className={CHATBOT_MESSAGE_AREA_DIV_1_CLASS}\n            >\n                <div\n                    role=\"presentation\"\n                    className={CHATBOT_MESSAGE_AREA_DIV_2_CLASS}\n                >\n                    <div\n                        className={CHATBOT_MESSAGE_AREA_DIV_3_CLASS}\n                    >\n                        {/* Error message */}\n                        {/* {state.errorMsg && (\n                            <>\n                                {errorAndReEnter(state.errorMsg, null, null, handleRetry)}\n                            </>\n                        )} */}\n                        <div \n                            id=\"message-area\"\n                            className={CHATBOT_MESSAGE_AREA_DIV_4_CLASS}\n                            // style={{ width: columnSizeMessages() }}\n                        >\n                            <ConversationBlock\n                                id=\"conversation-block\"\n                                state={state}\n                                handleRetry={handleRetry}\n                            />\n                            <UserInput\n                                state={state}\n                                dispatch={dispatch}\n                                userQuestion={state.inputMessage}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\nimport { ChatBot } from '../ChatBot/ChatBot.jsx';\n// import { ChatBotButton } from '../ChatBotButton/ChatBotButton.jsx';\n\nconst mergeDicts = gs.dictUtilities.mergeDicts;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nconst defaultComponentMap = {\n    \"Chatbot\": ChatBot,\n    // \"ChatBotButton\": ChatBotButton,\n};\n\nexport const App = ({componentMap = {}, appLogo = null}) => {\n    const componentMapFinal = mergeDicts(componentMap, defaultComponentMap);\n    if (debug) console_debug_log(\"GS_AI App | componentMapFinal:\", componentMapFinal);\n    return (\n        <gs.App\n            appLogo={(appLogo === null ? 'gs_ai_logo_circle.svg' : appLogo)}\n            componentMap={componentMapFinal}\n        />\n    );\n}\n","// AI button\n\nimport React, { useState } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    CHATBOT_BUTTON_DIV_1_CLASS,\n    CHATBOT_BUTTON_DIV_2_CLASS,\n    CHATBOT_BUTTON_LLM_POPUP_DIV_1,\n    CHATBOT_BUTTON_LLM_POPUP_DIV_2,\n} from '../../constants/class_name_constants.jsx';\n\nimport { ChatBot } from \"../ChatBot/ChatBot.jsx\"\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\n// const imageDirectory = gs.generalConstants.imageDirectory;\n// const sparkIcon = gs.spark;\n// Does not work:\n// import SparkIcon from \"../../images/spark.svg\";\nconst GsIcons = gs.IconsLib.GsIcons;\n\nconst debug = false;\nconst sparkClickOpenWindow = true;\n\nexport const ChatBotButton = ({\n    valueElement,\n    chatbot_prompt,\n}) => {\n    const [showLLMPopup, setShowLLMPopup] = useState(false);\n\n    if (debug) {\n        console_debug_log(`ChatBotButton | valueElement: ${valueElement} | document.getElementById(valueElement)| ${document.getElementById(valueElement)} | chatbot_prompt: ${chatbot_prompt}`);\n    }\n\n    const setPrompt = (prompt, valueToReplace) => {\n        return prompt.replace(\"%s\", valueToReplace);\n    }\n    \n    const handleSparkClick = (e) => {\n        e.preventDefault();\n        const inputValue = document.getElementById(valueElement).value;\n        if (inputValue !== \"\") {\n            if (sparkClickOpenWindow) {\n                window.open(\n                    window.location.origin + '/chatbot?menu=0&ssb=0&q=' + setPrompt(chatbot_prompt, inputValue),\n                    'AppChatbotPopUp',\n                    'height=600,width=400'\n                );\n            } else {\n                setShowLLMPopup(!showLLMPopup);\n            }\n        }\n    };\n\n    return (\n        <>\n            <div\n                className={CHATBOT_BUTTON_DIV_1_CLASS}\n            >\n                <div\n                    className={CHATBOT_BUTTON_DIV_2_CLASS}\n                >\n                    <button\n                        onClick={handleSparkClick}\n                    >\n                        {/* <img src={imageDirectory + sparkIcon} alt=\"Open AI Chat\" /> */}\n                        <GsIcons\n                            icon=\"spark\"\n                            alt=\"Open AI Assistant\"\n                        />\n                    </button>\n                </div>\n            </div>\n            {showLLMPopup && (\n                <div\n                    className={CHATBOT_BUTTON_LLM_POPUP_DIV_1}\n                >\n                    <div\n                        // className=\"llm-popup\"\n                        className={CHATBOT_BUTTON_LLM_POPUP_DIV_2}\n                    >\n                        <ChatBot\n                            userQuestion={setPrompt(chatbot_prompt, document.getElementById(valueElement).value)}\n                            showSideBar={false}\n                        />\n                    </div>\n                </div>\n            )}\n        </>\n    );\n};\n\n","// Components\nimport { App } from './components/App/App.jsx';\nimport { CameraComponent } from './components/ChatBot/CameraComponent.jsx';\nimport { ChatBotButton } from './components/ChatBotButton/ChatBotButton.jsx';\nimport { ChatBot } from './components/ChatBot/ChatBot.jsx';\nimport { ChatCodeBlock } from \"./components/ChatBot/ChatCodeBlock.jsx\";\nimport { ConversationBlock } from \"./components/ChatBot/ConversationBlock.jsx\";\nimport { ConversationList } from \"./components/ChatBot/ConversationList.jsx\";\nimport { ConversationsToggleButton } from \"./components/ChatBot/ConversationsToggleButton.jsx\";\nimport { FileUploader } from './components/ChatBot/FileUploader.jsx';\nimport { NewConversationButton } from \"./components/ChatBot/NewConversationButton.jsx\";\nimport { UserInput } from \"./components/ChatBot/UserInput.jsx\";\nimport { VoiceMessageRecorder } from './components/ChatBot/VoiceMessageRecorder.jsx';\n// Images\nconst gsAiLogoCircle = 'gs_ai_logo_circle.svg'\n\nexport {\n    // Components\n    App,\n    CameraComponent,\n    ChatBotButton,\n    ChatBot,\n    ChatCodeBlock,\n    ConversationBlock,\n    ConversationList,\n    ConversationsToggleButton,\n    FileUploader,\n    NewConversationButton,\n    UserInput,\n    VoiceMessageRecorder,\n    // Images\n    gsAiLogoCircle,\n};\n"],"names":["gs","loggingService","console_debug_log","setChatbotErrorMsg","errorMsg","dispatch","type","payload","setChatbotInputMessage","inputMessage","addMessageToConversation","newMessage","role","systemMessage","content","dispatchWaitAnimation","waitAnimationFlag","setConversationListToggle","conversationListToggle","iconsLibAiExtras","icon","size","width","height","alt","id","className","selectedSvg","React","createElement","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinejoin","focusable","style","fillRule","clipRule","BUTTON_LISTING_CLASS","classNameConstants","CHATBOT_CONTAINER_DIV_1_CLASS","CHATBOT_CONVERSATIONS_LIST_DIV_1_CLASS","CHATBOT_CONVERSATIONS_LIST_DIV_2_CLASS","CHATBOT_CONVERSATIONS_LIST_DIV_3_CLASS","CHATBOT_CONVERSATIONS_LIST_DIV_4_CLASS","CHATBOT_CONVERSATIONS_LIST_ROW_1_DIV_1_CLASS","CHATBOT_NEW_CONVERSATION_BUTTON_DIV_1_CLASS","CHATBOT_NEW_CONVERSATION_BUTTON_SPAN_CLASS","CHATBOT_NEW_CONVERSATION_BUTTON_CLASS","CHATBOT_CONVERSATIONS_LIST_ROW_2_DIV_1_CLASS","CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_1_CLASS","CHATBOT_CONVERSATIONS_LIST_HEADING_DIV_2_CLASS","CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_LM_CLASS","CHATBOT_CONVERSATIONS_LIST_HEADING_TEXT_DM_CLASS","CHATBOT_CONVERSATION_ITEM_DIV_1_CLASS","CHATBOT_CONVERSATION_ITEM_DIV_2_CLASS","CHATBOT_CONVERSATION_ITEM_DESC_OUTTER_CLASS","CHATBOT_CONVERSATION_ITEM_DESC_INNER_CLASS","CHATBOT_CONVERSATION_ITEM_SEPARATOR_CLASS","CHATBOT_CONVERSATION_ITEM_DELETE_DIV_CLASS","CHATBOT_CONVERSATION_ITEM_DELETE_BUTTON_CLASS","CHATBOT_CONVERSATIONS_TOGGLE_BUTTON_CLASS","CHATBOT_CONVERSATIONS_HIDDEN_TOGGLE_BUTTON_CLASS","CHATBOT_MESSAGE_AREA_DIV_1_CLASS","CHATBOT_MESSAGE_AREA_DIV_2_CLASS","CHATBOT_MESSAGE_AREA_DIV_3_CLASS","CHATBOT_MESSAGE_AREA_DIV_4_CLASS","CHATBOT_MESSAGE_BLOCK_CLASS","CHATBOT_MESSAGE_CLASS","CHATBOT_USER_MESSAGE_CONTAINER_CLASS","CHATBOT_USER_MESSAGE_CLASS","CHATBOT_USER_MESSAGE_LM_CLASS","CHATBOT_USER_MESSAGE_DM_CLASS","CHATBOT_BOT_MESSAGE_CONTAINER_CLASS","CHATBOT_BOT_MESSAGE_CLASS","CHATBOT_BOT_MESSAGE_LM_CLASS","CHATBOT_BOT_MESSAGE_DM_CLASS","CHATBOT_FORMAT_MESSAGE_DIV_1_CLASS","CHATBOT_FORMAT_MESSAGE_DIV_2_CLASS","CHATBOT_FORMAT_MESSAGE_ATTACHMENT_MESSAGE_CLASS","CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_DIV_CLASS","CHATBOT_FORMAT_MESSAGE_ATTACHMENT_IMAGE_IMG_CLASS","CHATBOT_INPUT_AREA_DIV_1_CLASS","CHATBOT_INPUT_AREA_DIV_2_CLASS","CHATBOT_INPUT_AREA_DIV_3_CLASS","CHATBOT_INPUT_AREA_DIV_4_CLASS","CHATBOT_INPUT_AREA_DIV_5_CLASS","CHATBOT_INPUT_AREA_DIV_61_CLASS","CHATBOT_INPUT_AREA_DIV_62_CLASS","CHATBOT_INPUT_AREA_TEXTAREA_CLASS","CHATBOT_INPUT_AREA_TEXTAREA_LM_CLASS","CHATBOT_INPUT_AREA_TEXTAREA_DM_CLASS","CHATBOT_INPUT_AREA_BUTTON_CLASS","CHATBOT_INPUT_AREA_WAIT_ANIMATION_CLASS","CAMERA_COMPONENT_DIV_1_CLASS","CAMERA_COMPONENT_DIV_2_CLASS","CAMERA_COMPONENT_BUTTON_SUB_CLASS","CAMERA_COMPONENT_BUTTON_MAIN_CLASS","CAMERA_COMPONENT_VIDEO_CONTAINER_CLASS","CAMERA_COMPONENT_PHOTO_CLASS","CAMERA_COMPONENT_VIDEO_CLASS","CAMERA_COMPONENT_VIDEO_CANVAS_CLASS","SCROLL_TO_BOTTOM_BUTTON_DIV_1_CLASS","SCROLL_TO_BOTTOM_BUTTON_DIV_2_CLASS","SCROLL_TO_BOTTOM_BUTTON_DIV_3_CLASS","SCROLL_TO_BOTTOM_BUTTON_FLOAT_CLASS","SCROLL_TO_BOTTOM_BUTTON_ICON_CLASS","FILE_UPLOADER_DIV_1_CLASS","FILE_UPLOADER_DIV_2_CLASS","FILE_UPLOADER_BASE_BUTTON_CLASS","FILE_UPLOADER_BUTTON_CLASS","FILE_UPLOADER_INPUT_AREA_CONTAINER_CLASS","FILE_UPLOADER_INPUT_AREA_INPUT_CLASS","VOICE_MESSAGE_RECORDER_DIV_1_CLASS","VOICE_MESSAGE_RECORDER_BUTTON_CLASS","CHATBOT_BUTTON_DIV_1_CLASS","CHATBOT_BUTTON_DIV_2_CLASS","CHATBOT_BUTTON_LLM_POPUP_DIV_1","CHATBOT_BUTTON_LLM_POPUP_DIV_2","GsIcons","IconsLib","dbApiService","dbService","MULTIPART_FORM_DATA_HEADER","formatCaughtError","errorAndReenter","toggleIdVisibility","ui","getMediaTypeToRecord","media","mediaSupported","debug","extControlsToShowHide","useAxios","process","env","REACT_APP_USE_AXIOS","VoiceMessageRecorder","_ref","setExternalInputMessage","handleUpdateSize","sendMessage","isRecording","setIsRecording","useState","audioData","setAudioData","setErrorMsg","mediaRecorderRef","useRef","startRecording","startMediaDevices","stream","navigator","mediaDevices","getUserMedia","audio","mediaType","mediaRecorder","MediaRecorder","current","chunks","ondataavailable","e","push","data","onstop","blob","Blob","start","error","errorMsgAux","console","message","stopRecording","stopMediaDevices","state","stop","sendFile","url","formData","authHeader","queryParams","headers","Object","assign","response","axios","post","params","errorRaw","useEffect","sendVoiceMessage","FormData","extension","split","fileName","appleDevice","sourceLang","other","append","options","raw_body","query_params","db","endpointUrl","REACT_APP_API_URL","getAll","then","onClick","title","additionalIconsFn","defaultValue","genericEditorUtilities","getCurrentUserId","dispach","currentUser","abortController","ApiCall","getActionName","operationType","getRequestMethod","processGoodResponse","responseAttrName","ok","errorMessage","error_message","processErrorResponse","verifyId","the","was_successful","error_in_the","operationName","operationDescription","ActionDescription","requestMethod","query","body","getOne","createRow","updateRow","deleteRow","operationMessage","checkConversationIdChange","externalApiResponse","cid","currentConversationId","apiResponse","fetchConversations","fetchOneConversation","loadConversationList","currentUserId","user_id","conversationId","loadConversation","messages","deleteConversation","sendMessageToBot","messageText","abort","AbortController","chatToSend","JSON","stringify","signal","handleCancelProcessing","FileUploader","question","fileTypeFilter","selectedFile","setSelectedFile","buttonToggle","setButtonToggle","handleFileChange","file","target","files","startsWith","alert","handleUpload","fileSize","toFixed","name","file_name","accept","onChange","ModalPopUp","VIDEO_OFF","display","VIDEO_ON","CameraComponent","facingMode","setFacingMode","photo","setPhoto","cameraOn","setCameraOn","videoRef","canvasRef","startCamera","video","srcObject","toggleCamera","prevMode","constraints","exact","stopCamera","tracks","getTracks","forEach","track","takePhoto","canvas","context","getContext","drawImage","dataUrl","toDataURL","cameraOnOff","newState","sendPhoto","base64Response","fetch","fileExtension","timestamp","Date","toISOString","replace","slice","Fragment","src","closeButtonAction","secondButtonMessage","secondButtonAction","primaryButtonMessage","primaryButtonAction","allowOnHide","ref","autoPlay","playsInline","useAppContext","AppContext","resizeManager","convertId","usePlainFetch","responseHandlersService","growUpTextArea","resetTextArea","WaitAnimation","waitAnimationUtility","getFilenameFromContentDisposition","blobFilesUtilities","responseHasFile","userInputMaxOffsetHeight","setConversationBlockHeight","conversationBlockObj","document","getElementById","chatbotContainerObj","chatbotInputAreaObj","offsetHeight","getWindowMaxHeight","windowHeight","window","screen","availHeight","outerHeight","innerHeight","setChatBotContainerHeight","mainContainerObj","parentElement","mainContainerHeight","getElementsByTagName","footerHeight","setTextAreaHeight","user_input","Math","min","scrollHeight","resizeAll","UserInput","userQuestion","theme","isWide","isDarkMode","sideMenu","setInputMessage","updateSize","setUpdateSize","resizer","addListener","removeListener","handleInputChange","value","newInputMessage","arguments","length","undefined","trim","userMessage","botReply","continueProcessing","fileUrl","filename","botMessage","attachment_url","errorToReport","conversations","_id","background","input","rows","disabled","isApiProcessing","NewConversationButton","startNewConversation","key","timestampToDate","dateTimestamp","HIDDEN_CLASS","dateColumn","ConversationList","showSideBar","h2_class","handleLoadConversation","confirmDeleteConversation","confirm","handleDeleteConversation","startNew","fixTitle","groupConversationsByDate","groups","today","yesterday","lastSevenDays","lastMonth","older","now","setHours","setDate","getDate","sevenDaysAgo","oneMonthAgo","setMonth","getMonth","conversation","timestampUnixEpoch","conversationDate","conversationTime","monthYear","toLocaleString","month","year","renderConversations","map","convId","onMouseOver","element","onMouseOut","textHoverSide","groupedConversations","keys","ConversationsToggleButton","WARNING_MSG_CLASS","defaultFilenametoDownload","decodeBlob","AudioPlayer","blobUrl","expired","errorMsgSuffix","isPlaying","setIsPlaying","duration","setDuration","currentTime","setCurrentTime","audioPlayer","fixBlob","r","reader","FileReader","readAsText","onloadend","newBlobUrl","result","play","togglePlayPause","prevValue","catch","errorMsgs","values","some","msg","includes","pause","controls","onBeforeInput","GoToTheBottom","elementId","elementsToRender","objDiv","scrollTop","ScrollToBottomButton","scrollToBottom","addEventListener","handleScroll","buttonElement","visibility","showButton","clientHeight","LinkifyText","CopyButton","renderMarkdownContent","ChatCodeBlock","children","shType","codeRegex","parts","part","index","language","substring","position","backgroundColor","color","marginTop","padding","overflowX","Prism","shStyleforPrism","wrapLongLines","Light","shStyleForLight","text","getFileExtension","performDownload","INFO_MSG_CLASS","defaultDownloadFilename","ConversationBlock","handleRetry","getStyleClasses","label","setElementsToRender","styleClass","setStyleClass","formatMessage","messageObject","hasDownloadFileToken","downloadedFilename","pop","hasAttachment","toLowerCase","preventDefault","firstWord","href","rel","String","maxHeight","maxWidth","userMessageContainer","botMessageContainer","isMobileDevice","getUrlParams","urlParams","errorAndReEnter","useUser","UserContext","isWindowWide","chatReducer","action","filter","ChatBot","q","decodeURIComponent","ssb","setIsWide","useReducer","isTyping","columnSizeList","handleClose","lastUserMessage","reverse","find","mergeDicts","dictUtilities","defaultComponentMap","App","componentMap","appLogo","componentMapFinal","ChatBotButton","valueElement","chatbot_prompt","showLLMPopup","setShowLLMPopup","setPrompt","prompt","valueToReplace","handleSparkClick","inputValue","open","location","origin"],"mappings":"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","x_google_ignoreList":[6]}