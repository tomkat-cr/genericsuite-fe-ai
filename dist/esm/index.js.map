{"version":3,"file":"index.js","sources":["../../src/lib/components/ChatBot/chatbot.general.functions.jsx","../../src/lib/components/ChatBot/VoiceMessageRecorder.jsx","../../src/lib/components/ChatBot/chatbot.db.operations.jsx","../../src/lib/components/ChatBot/FileUploader.jsx","../../node_modules/style-inject/dist/style-inject.es.js","../../src/lib/components/ChatBot/CameraComponent.jsx","../../src/lib/components/ChatBot/UserInput.jsx","../../src/lib/components/ChatBot/NewConversationButton.jsx","../../src/lib/components/ChatBot/ConversationList.jsx","../../src/lib/components/ChatBot/ConversationsToggleButton.jsx","../../src/lib/components/ChatBot/AudioPlayer.jsx","../../src/lib/components/ChatBot/GoToTheBottom.jsx","../../src/lib/components/ChatBot/ScrollToBottomButton.jsx","../../src/lib/components/ChatBot/ChatCodeBlock.jsx","../../src/lib/components/ChatBot/ConversationBlock.jsx","../../src/lib/components/ChatBot/ChatBot.jsx","../../src/lib/components/App/App.jsx","../../src/lib/components/ChatBotButton/ChatBotButton.jsx","../../src/lib/index.cjs"],"sourcesContent":["import * as gs from \"genericsuite\";\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const setChatbotErrorMsg = (errorMsg, dispatch) => {\n    dispatch({ type: 'SET_ERROR_MSG', payload: errorMsg });\n}\n\nexport const setChatbotInputMessage = (inputMessage, dispatch) => {\n    dispatch({ type: 'SET_INPUT_MESSAGE', payload: inputMessage });\n}\n\nexport const addMessageToConversation = (newMessage, role, dispatch) => {\n    const systemMessage = { content: newMessage, role: role };\n    dispatch({ type: 'ADD_MESSAGE', payload: systemMessage });\n\n}\n\nexport const dispatchWaitAnimation = (waitAnimationFlag, dispatch) => {\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: waitAnimationFlag })\n}\n\nexport const setConversationListToggle = (conversationListToggle, dispatch) => {\n    if (debug) {\n        console_debug_log(`setConversationListToggle | conversationListToggle: ${conversationListToggle}`);\n    }\n    dispatch({ type: 'SET_CONVERSATION_LIST_TOGGLE', payload: conversationListToggle });\n}\n","import React, {useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    setChatbotErrorMsg,\n    dispatchWaitAnimation,\n} from './chatbot.general.functions.jsx';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faMicrophone,\n    faStop,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faMicrophone,\n    faStop,\n);\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst getMediaTypeToRecord = gs.media.getMediaTypeToRecord;\nconst mediaSupported = gs.media.mediaSupported;\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\nconst debug = true;\n\nconst extControlsToShowHide = ['user_input', 'user_input_submit', 'fileUploader', 'cameraComponent'];\n\nconst useMicRecorder = false;\nconst useAxios = (process.env.REACT_APP_USE_AXIOS || \"1\") == \"1\";\n\nexport const VoiceMessageRecorder = ({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    sendMessage,\n}) => {\n    const [isRecording, setIsRecording] = useState(false);\n    const [audioData, setAudioData] = useState(null);\n    const [errorMsg, setErrorMsg] = useState(null);\n    const mediaRecorderRef = useRef(null);\n\n    const startRecording = async () => {\n        toggleIdVisibility(\"off\", extControlsToShowHide);\n        setIsRecording(true);\n        setErrorMsg(null);\n        if (useMicRecorder) {\n            startMicRecording();\n        } else {\n            startMediaDevices();\n        }\n    }\n\n    const startMicRecording = async () => {\n        setErrorMsg(\"MicRecorder is not implemented...\");\n\n        // // npm install mic-recorder-to-mp3\n        // const MicRecorder = require('mic-recorder-to-mp3');\n        // const recorder = new MicRecorder({\n        //     bitRate: 128\n        // });\n        // mediaRecorderRef.current = recorder;\n\n        // // Start recording. Browser will request permission to use your microphone.\n        // mediaRecorderRef.current.start().then(() => {\n        //     // something else\n        // }).catch((e) => {\n        //     console.error(e);\n        //     const errorMsgAux = 'We could not start recording:';\n        //     console.error(errorMsg, e);\n        //     setIsRecording(false);\n        //     setErrorMsg(`${errorMsgAux} ${e.message}`);\n        // });\n    };\n    \n    const startMediaDevices = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const mediaType = getMediaTypeToRecord();\n\n            if (debug) console_debug_log(`VoiceMessageRecorder | startRecording | extension: ${mediaType[\"extension\"]}`);\n            if (debug) console_debug_log(\"mediaSupported\", mediaSupported());\n\n            // Set the MediaRecorder options   \n            const mediaRecorder = new MediaRecorder(stream, mediaType[\"options\"]);\n            mediaRecorderRef.current = mediaRecorder;\n\n            // Handle the data available event\n            const chunks = [];  \n            mediaRecorder.ondataavailable = (e) => {\n                chunks.push(e.data);\n            };\n\n            // Handle the stop event\n            mediaRecorder.onstop = () => {\n                const blob = new Blob(chunks, { type: `audio/${mediaType[\"extension\"]}` });\n                setAudioData(blob);\n            };\n\n            // Start recording\n            mediaRecorder.start(1000);\n\n        } catch (error) {\n            const errorMsgAux = 'Error starting recording:';\n            console.error(errorMsg, error);\n            setIsRecording(false);\n            setErrorMsg(`${errorMsgAux} ${error.message}`);\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n        }\n    };\n\n    const stopRecording = () => {\n        if (useMicRecorder) {\n            stopMicRecording();\n        } else {\n            stopMediaDevices();\n        }\n    };\n    \n    const stopMicRecording = () => {\n        if (mediaRecorderRef.current) {\n            setIsRecording(false);\n\n            // Once you are done singing your best song, stop and get the mp3.\n            mediaRecorderRef.current\n                .stop()\n                .getMp3().then(([buffer, blob]) => {\n                    // do what ever you want with buffer and blob\n                    setAudioData(blob);\n                    // // Example: Create a mp3 file and play\n                    // const file = new File(buffer, 'me-at-thevoice.mp3', {\n                    //     type: blob.type,\n                    //     lastModified: Date.now()\n                    // });\n                    // const player = new Audio(URL.createObjectURL(file));\n                    // player.play();\n                }).catch((e) => {\n                    const errorMsgAux = 'We could not retrieve your message:';\n                    console.error(errorMsg, e);\n                    setIsRecording(false);\n                    setErrorMsg(`${errorMsgAux} ${e.message}`);\n                });\n        }\n    };\n\n    const stopMediaDevices = () => {\n        if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n            mediaRecorderRef.current.stop();\n            setIsRecording(false);\n        }\n    };\n\n    const sendFile = async (url, formData, authHeader, queryParams) => {\n        const headers = Object.assign(\n            { \n                'Access-Control-Allow-Origin': '*',\n            }, \n            authHeader\n        );\n        try {\n            const response = await axios.post(url, formData, {\n                headers: headers,\n                params: queryParams,\n            });\n            // Hide WaitAnimation after fetching data\n            dispatchWaitAnimation(false, dispatch);\n            if (debug) {\n                console_debug_log('[FA] VoiceMessageRecorder is calling setExternalInputMessage', response.data);\n            }\n            // Send the transcript to the input text box\n            setExternalInputMessage(response.data.response);\n            // Restore buttons in the input text area\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            if (handleUpdateSize) {\n                handleUpdateSize();\n            }\n            // Send the message if the sendMessage function is provided (automatic send functionality).\n            if (sendMessage) {\n                sendMessage();\n            }\n        } catch (errorRaw) {\n            console.error(errorRaw);\n            // Hide WaitAnimation after the error\n            const error = errorRaw.message + (typeof errorRaw.response !== 'undefined' ?  \": \" + errorRaw.response.data : '');\n            // Hide WaitAnimation after the error\n            dispatchWaitAnimation(false, dispatch);\n            // Restore buttons in the input text area\n            toggleIdVisibility(\"on\", extControlsToShowHide);\n            // Send error message to the chatbot\n            console.error('[FA] Error sending voice message:', error);\n            setErrorMsg(error.message);\n        }\n    };\n\n    useEffect(() => {\n        if (debug) {\n            console_debug_log(`VoiceMessageRecorder | useEffect() of sendVoiceMessage | isRecording: ${isRecording}`);\n        }\n        const sendVoiceMessage = async () => {\n            if (!audioData) {\n                return;\n            }\n            // Prepare the audit to send to the API\n            const formData = new FormData();\n            const extension = audioData.type.split('/')[1];\n            const fileName = `voiceMessage.${extension}`;\n            // const appleDevice = MediaRecorder.isTypeSupported('audio/mpeg');\n            const appleDevice = extension === 'mp4';\n            const sourceLang = (appleDevice ? 'get_user_lang' : 'auto');\n            const other = (appleDevice ? 'no_mp3_native_support' : '');\n            formData.append('file', audioData, fileName);\n            const options = {\n                raw_body: true,\n                headers: MULTIPART_FORM_DATA_HEADER\n            };\n            const query_params = {\n                \"extension\": extension,\n                \"source_lang\": sourceLang,\n                \"other\": other,\n            }\n            const db = new dbApiService({ url: \"ai/voice_to_text\" });\n            if (debug) {\n                console_debug_log(`VoiceMessageRecorder | sendVoiceMessage | fileName: ${fileName}`);\n            }\n            // Clear previous message in the input text area\n            setExternalInputMessage('');\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            // if (handleUpdateSize) {\n            //     handleUpdateSize();\n            // }\n            // Clear audio data\n            setAudioData(null);\n            // Show WaitAnimation while fetching data\n            dispatchWaitAnimation(true, dispatch);\n            if (useAxios) {\n                const authHeader = gs.authHeader.authHeader();\n                const endpointUrl = `${process.env.REACT_APP_API_URL}/${\"ai/voice_to_text\"}`;\n                await sendFile(endpointUrl, formData, authHeader, query_params)\n            } else {\n                db.getAll(query_params, formData, 'POST', options).then(\n                    data => {\n                        if (debug) {\n                            console_debug_log(\"VoiceMessageRecorder | sendVoiceMessage | data:\", data);\n                        }\n                        // Hide WaitAnimation after fetching data\n                        dispatchWaitAnimation(false, dispatch);\n                        if (debug) {\n                            console_debug_log('VoiceMessageRecorder is calling setExternalInputMessage', data.response);\n                        }\n                        // Send the transcript to the input text box\n                        setExternalInputMessage(data.response);\n                        // Restore buttons in the input text area\n                        toggleIdVisibility(\"on\", extControlsToShowHide);\n                        // Update the size of the input text area if the handleUpdateSize function is provided.\n                        // if (handleUpdateSize) {\n                        //     handleUpdateSize();\n                        // }\n                        // Send the message if the sendMessage function is provided (automatic send functionality).\n                        if (sendMessage) {\n                            sendMessage();\n                        }\n                    },\n                    error => {\n                        error = formatCaughtError(error);\n                        if (debug) {\n                            console_debug_log(\"VoiceMessageRecorder | sendVoiceMessage | ERROR:\", error);\n                        }\n                        // Hide WaitAnimation after the error\n                        dispatchWaitAnimation(false, dispatch);\n                        // Restore buttons in the input text area\n                        toggleIdVisibility(\"on\", extControlsToShowHide);\n                        // Send error message to the chatbot\n                        console.error('Error sending voice message:', error);\n                        setErrorMsg(error.message);\n                    }\n                );\n            }\n        };\n        if (!isRecording && audioData) {\n            sendVoiceMessage();\n        }\n    }, [isRecording, audioData, setExternalInputMessage, handleUpdateSize, dispatch, sendMessage]);\n\n    useEffect(() => {\n        if (errorMsg != null) {\n            setChatbotErrorMsg(`Error processing the voice message: ${errorMsg}`, dispatch);\n        }\n    }, [errorMsg, dispatch]);\n\n    return (\n        <div\n            id={id}\n            className=\"voice-recorder\"\n        >\n            <button\n                onClick={isRecording ? stopRecording : startRecording}\n                className={`${BUTTON_LISTING_CLASS} mr-2`}\n                title={isRecording ? 'Stop Recording' : 'Start Recording'}\n            >\n                <FontAwesomeIcon icon={isRecording ? 'stop' : 'microphone'} size='lg' />\n            </button>\n        </div>\n    );\n};\n","import * as gs from \"genericsuite\";\n\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst authenticationService = gs.authenticationService.authenticationService;\nconst dbApiService = gs.dbService.dbApiService;\nconst defaultValue = gs.genericEditorUtilities.defaultValue;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\n// Ensure to install the crypto library with: npm install crypto\n// import crypto from 'crypto';\n\nconst debug = false;\n\n// Current user\n\nexport const getCurrentUser = () => {\n    let currentUser;\n    const setCurrentUser = (x) => {\n        currentUser = x;\n    }\n    if (authenticationService.currentUser) {\n        const subscription = authenticationService.currentUser.subscribe(\n            x => (setCurrentUser(x))\n        );\n        subscription.unsubscribe();\n    }\n    if (typeof currentUser !== \"undefined\" && currentUser !== null) {\n        return currentUser.id;\n    }\n    return null;\n}\n\nexport const currentUser = getCurrentUser();\n\n// DB: generic calls\n\nexport let abortController = null; // Define this outside your component or in a useRef if you need to persist the controller across renders without causing re-renders.\n\nexport const ApiCall = async (\n    dispatch,\n    params,\n) => {\n    const getActionName = (operationType) => {\n        let response;\n        switch (operationType) {\n            case \"getAll\":\n                response = \"load\";\n                break;\n            case \"getOne\": \n                response = \"load\";\n                break;\n            case \"createRow\": \n                response = \"creation\";\n                break;\n            case \"updateRow\": \n                response = \"update\";\n                break;\n            case \"deleteRow\": \n                response = \"deletion\";\n                break;\n            default:\n                response = \"[invalid operation]\";\n        }\n        return response;\n    }\n\n    const getRequestMethod = (operationType) => {\n        let response;\n        switch (operationType) {\n            case \"getAll\":\n            case \"getOne\": \n                response = \"GET\";\n                break;\n            case \"createRow\": \n                response = \"POST\";\n                break;\n            case \"updateRow\": \n                response = \"PUT\";\n                break;\n            case \"deleteRow\": \n                response = \"DELETE\";\n                break;\n            default:\n                response = \"[invalid operation]\";\n        }\n        return response;\n    }\n\n    const processGoodResponse = (data) => {\n        if (debug) {\n            console_debug_log(`AiAssistant | ${operationName} | data:`, data);\n        }\n        if (responseAttrName !== \"\" && typeof data[responseAttrName] === \"undefined\") {\n            return {\n                ok: false,\n                response: null,\n                errorMessage: `Element ${responseAttrName} not found in the API response`,\n            }\n        }\n        return {\n            ok: !data.error,\n            response: (responseAttrName === \"\" ? data : data[responseAttrName]),\n            errorMessage: data.error_message,\n        }\n    }\n\n    const processErrorResponse = (errorRaw) => {\n        const error = formatCaughtError(errorRaw);\n        if (debug) {\n            console_debug_log(`AiAssistant | ${operationName} | ERROR:`, error);\n        }\n        return {\n            ok: false,\n            errorMessage: error.message,\n        }\n    }\n\n    const verifyId = (id) => {\n        return {\n            ok: (id !== null),\n            errorMessage: (id !== null ? \"\" : `Missing ID: ${id}`),\n        }\n    }\n\n    const the= \"the\";\n    const was_successful = \"was successful\";\n    const error_in_the =  \"error in the\";\n\n    const operationType = defaultValue(params, \"operationType\");\n    const operationName = defaultValue(params, \"operationName\", \"ApiCall\");\n    const operationDescription = defaultValue(params, \"operationDescription\", operationName);\n    const ActionDescription = defaultValue(params, \"ActionDescription\", getActionName(operationType));\n    const endpointUrl = defaultValue(params, \"endpointUrl\");\n    const requestMethod = defaultValue(params, \"requestMethod\", getRequestMethod(operationType));\n    const id = defaultValue(params, \"id\", null);\n    const query = defaultValue(params, \"query\", {});\n    const body = defaultValue(params, \"body\", {});\n    const options = defaultValue(params, \"options\", {});\n    const responseAttrName = defaultValue(params, \"responseAttrName\", \"resultset\");\n\n    let response; \n    const db = new dbApiService({ url: endpointUrl });\n    if (debug) {\n        console_debug_log(\n            `AiAssistant | ${operationName} | operationType: ${operationType}, requestMethod: ${requestMethod}, endpointUrl:`,\n            endpointUrl, 'body:', body, 'query:', query, 'options:', options, 'id:', id,\n        );\n    }\n    // Set API processing status\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: true });\n    try {\n        switch (operationType) {\n            case \"getAll\":\n                response = await db.getAll(query, body, requestMethod, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"getOne\":\n                response = await db.getOne(query, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"createRow\":\n                response = await db.createRow(body, query, options).then(\n                    data => { return processGoodResponse(data) },\n                    error => { return processErrorResponse(error) }\n                );\n                break;\n            case \"updateRow\":\n                response = verifyId(id);\n                if (response.ok) {\n                    response = await db.updateRow(id, body, query, options).then(\n                        data => { return processGoodResponse(data) },\n                        error => { return processErrorResponse(error) }\n                    );\n                }\n                break;\n            case \"deleteRow\":\n                response = verifyId(id);\n                if (response.ok) {\n                    response = await db.deleteRow(id, body, query, options).then(\n                        data => { return processGoodResponse(data) },\n                        error => { return processErrorResponse(error) }\n                    );\n                }\n                break;\n            default:\n                response = {\n                    ok: false,\n                    errorMessage: `Invalid operation type: \"${operationType}\"`,\n                }\n        }\n    } catch (error) {\n        response = {\n            ok: false,\n            errorMessage: error.message,\n        }\n    }\n    if (response.ok) {\n        response.operationMessage = `${the} ${operationDescription} ${ActionDescription} ${was_successful}`;\n    } else {\n        response.operationMessage = `${error_in_the} ${operationDescription} ${ActionDescription}`;\n        console_debug_log('ApiCall ERROR:');\n        console_debug_log(response.operationMessage);\n    }\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: false }); // Clear API processing status\n    if (debug) {\n        console_debug_log(`AiAssistant | ${operationName} | response:`, response);\n    }\n    return response;\n}\n\n// const sendMessageToBot = async (messageText) => {\n//     try {\n//         const response = await fetch('http://yourapi.com/path-to-bot', {\n//             method: 'POST',\n//             headers: { 'Content-Type': 'application/json' },\n//             body: JSON.stringify({ message: messageText }),\n//             signal: abortController.signal\n//         });\n//         if (response.ok) {\n//             const data = await response.json();\n//             // Assuming the response includes the bot's reply in data.reply\n//             return data.reply;\n//         } else {\n//             throw new Error('Bot API responded with an error.');\n//         }\n//     } catch (error) {\n//         console.error('Error communicating with the bot:', error);\n//         return null; // Handle error appropriately\n//     }\n// };\n\n// DB: Conversation List\n\n// const generateNewConversationId = () => {\n//     return crypto.randomUUID();\n// };\n\nexport const checkConversationIdChange = async (state, dispatch, externalApiResponse) => {\n    let cid = state.currentConversationId;\n    let apiResponse;\n    // if (debug) {\n        console_debug_log(`>> checkConversationIdChange | cid: ${cid} | externalApiResponse:`, externalApiResponse);\n    // }\n    if (typeof externalApiResponse['cid'] !== 'undefined' && \n        state.currentConversationId !== externalApiResponse['cid']\n    ) {\n        cid = externalApiResponse['cid'];\n        // dispatch({ type: 'SET_CONVERSATION_ID', payload: cid });\n        //\n        // Reload and refresh conversation list\n        apiResponse = await fetchConversations(dispatch);\n        if (!apiResponse.ok) {\n            console.error(\"ERROR in checkConversationIdChange > fetchConversations\");\n            console.error(apiResponse.operationMessage);\n            console.error(apiResponse.errorMessage);\n        }\n    }\n    // Always refresh current conversation to get the latest Chatbot response\n    if (debug) {\n        console_debug_log(`checkConversationIdChange | REFRESH CURRENT CONVERSATION`);\n    }\n    if (cid !== null) {\n        apiResponse = await fetchOneConversation(cid, dispatch);\n        if (!apiResponse.ok) {\n            console.error(\"ERROR in checkConversationIdChange > fetchOneConversation\");\n            console.error(apiResponse);\n            console.error(apiResponse.operationMessage);\n            console.error(apiResponse.errorMessage);\n        }\n    }\n    return cid;\n}\n\nexport const loadConversationList = async (dispatch) => {\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"loadConversationList\",\n            operationDescription: \"Conversation list\",\n            operationType: \"getAll\",\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUser,\n            }\n        }\n    );\n    return response;\n};\n\nexport const fetchConversations = async (dispatch) => {\n    const apiResponse = await loadConversationList(dispatch);\n    if (apiResponse.ok) {\n        dispatch({ type: 'SET_CONVERSATIONS', payload: apiResponse.response });\n    }\n    return apiResponse;\n};\n\nconst fetchOneConversation = async (conversationId, dispatch) => {\n    const apiResponse = await loadConversation(conversationId, dispatch);\n    if (debug) {\n        console_debug_log(`fetchOneConversation | conversationId: ${conversationId} | apiResponse:`, apiResponse);\n    }\n    if (apiResponse.ok) {\n        const data = {\n            conversationId: conversationId,\n            messages: apiResponse.response.messages,\n        }\n        dispatch({ type: 'GET_MESSAGES', payload: data });\n    }\n    return apiResponse;\n};\n\n// DB: Conversations\n\n// const saveConversation = async (conversationId, conversation, dispatch) => {\n//     const conversationAddition = {user_id: currentUser}\n//     const response = ApiCall(\n//         dispatch,\n//         {\n//             operationName: \"saveConversation\",\n//             operationDescription: \"Conversation\",\n//             operationType: (conversationId === null ? \"createRow\" : \"updateRow\"),\n//             if: conversationId,\n//             endpointUrl: \"ai_chatbot_conversations\",\n//             body: {...conversation, conversationAddition},\n//         }\n//     );\n//     return response;\n// };\n\nexport const loadConversation = async (conversationId, dispatch) => {\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"loadConversation (one)\",\n            operationDescription: \"Conversation\",\n            operationType: \"getOne\",\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUser,\n                id: conversationId,\n            }\n        }\n    );\n    return response;\n};\n\nexport const deleteConversation = async (conversationId, dispatch) => {\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"deleteConversation\",\n            operationDescription: \"Conversation\",\n            operationType: \"deleteRow\",\n            id: conversationId,\n            endpointUrl: \"ai_chatbot_conversations\",\n            query: {\n                user_id: currentUser,\n            }\n        }\n    );\n    return response;\n};\n\n// BOT API management\n\nexport const sendMessageToBot = async (messageText, state, dispatch) => {\n    // Set the fetch() abort controller\n    if (abortController) {\n        if (debug) {\n            console_debug_log(`AiAssistant | sendMessageToBot | ABORTING PREVIOUS REQUEST`);\n        }\n        abortController.abort(); // Abort previous request if it exists\n    }\n    abortController = new AbortController(); // Create a new controller for the new request\n    const chatToSend = [\n        // ...state.messages,\n        {\"role\": \"user\", \"content\": messageText}\n    ];\n    const response = ApiCall(\n        dispatch,\n        {\n            operationName: \"sendMessageToBot\",\n            operationDescription: \"Communication with AiAssistant\",\n            operationType: \"getAll\",\n            endpointUrl: \"ai/chatbot\",\n            requestMethod: \"POST\",\n            body: {\n                \"conversation\": JSON.stringify(chatToSend),\n                \"cid\": state.currentConversationId\n            },\n            responseAttrName: \"\",\n            options: {\n                signal: abortController.signal,\n            },\n        }\n    );\n    if (debug) {\n        console_debug_log('AiAssistant | sendMessageToBot | response:', response);\n    }\n    if (response.ok) {\n        checkConversationIdChange(state, dispatch, response);\n    }\n\n    return response;\n};\n\nexport const handleCancelProcessing = (dispatch) => {\n    if (abortController) abortController.abort(); // Abort the ongoing request\n    dispatch({ type: 'API_PROCESSING_STATUS', payload: false }); // Clear API processing status\n};\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    setChatbotErrorMsg,\n    addMessageToConversation,\n    dispatchWaitAnimation,\n} from './chatbot.general.functions.jsx';\nimport { checkConversationIdChange } from './chatbot.db.operations.jsx';\n\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faArrowUp,\n    faTimes,\n    faPaperclip, // Added clip icon\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faArrowUp, // Select file + Upload\n    faTimes, // Close\n    faPaperclip, // Added clip icon\n);\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n\nconst debug = true;\n\nconst useAxios = (process.env.REACT_APP_USE_AXIOS || \"1\") == \"1\";\n\nexport function FileUploader({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    state,\n    question,\n    fileTypeFilter,\n}) {\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [buttonToggle, setButtonToggle] = useState(false);\n\n    const handleFileChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            if (fileTypeFilter) {\n                // \"image/*\"\n                if (file.type.startsWith('image/')) {\n                    setSelectedFile(file);\n                } else {\n                    alert('Please selecct a valid image file.');\n                }\n            } else {\n                setSelectedFile(file);\n            }\n        }\n    };\n\n    const sendFile = async (url, formData, authHeader, queryParams) => {\n        const headers = Object.assign(\n            { \n                'Access-Control-Allow-Origin': '*',\n            }, \n            authHeader\n        );\n        try {\n            const response = await axios.post(url, formData, {\n                headers: headers,\n                params: queryParams,\n            });\n            dispatchWaitAnimation(false, dispatch);\n            checkConversationIdChange(state, dispatch, response.data).then(\n                () => {\n                    // Current conversation updated sucssesfuly\n                },\n                error => {\n                    error = formatCaughtError(error);\n                    setChatbotErrorMsg(error.message, dispatch);\n                }\n            );\n            setSelectedFile(null);\n            setButtonToggle(false);\n        } catch (errorRaw) {\n            console.error(errorRaw);\n            // Hide WaitAnimation after the error\n            const error = errorRaw.message + (typeof errorRaw.response !== 'undefined' ?  \": \" + errorRaw.response.data : '');\n            console.error('Error uploading the file:', error);\n            setChatbotErrorMsg(error, dispatch);\n            dispatchWaitAnimation(false, dispatch);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (selectedFile) {\n            const formData = new FormData();\n            const fileSize = (selectedFile.size / (1024 * 1024)).toFixed(2); // Mb\n            formData.append('file', selectedFile, selectedFile.name);\n            const options = {\n                raw_body: true,\n                headers: MULTIPART_FORM_DATA_HEADER\n            };\n            const query = {\n                \"cid\": state.currentConversationId,\n                question: question,\n                // image_extension: fileExtension,\n                file_name: selectedFile.name,\n            }\n            addMessageToConversation(question, \"user\", dispatch)\n            addMessageToConversation(\n                '```File Attachment: \"' + selectedFile.name + '\" (' + fileSize + ' Mb)```', \"attachment\",\n                dispatch\n            )\n            // Empty external input message\n            setExternalInputMessage(\"\");\n            // Update the size of the input text area if the handleUpdateSize function is provided.\n            if (handleUpdateSize) {\n                handleUpdateSize();\n            }\n            // Show WaitAnimation while fetching data\n            dispatchWaitAnimation(true, dispatch);\n            if (debug) {\n                console_debug_log(`FileUploader | selectedFile:`, selectedFile);\n            }\n            if (useAxios) {\n                const authHeader = gs.authHeader.authHeader();\n                const endpointUrl = `${process.env.REACT_APP_API_URL}/${\"ai/image_to_text\"}`;\n                await sendFile(endpointUrl, formData, authHeader, query)\n            } else {\n                const db = new dbApiService({ url: \"ai/image_to_text\" });\n                db.getAll(query, formData, 'POST', options).then(\n                    data => {\n                        if (debug) {\n                            console_debug_log(\"FileUploader | handleUpload | data:\", data);\n                        }\n                        dispatchWaitAnimation(false, dispatch);\n                        if (debug) {\n                            console_debug_log(`FileUploader is calling checkConversationIdChange(\"${data}\")`);\n                        }\n                        // addMessageToConversation(data.response, \"assistant\", dispatch);\n                        checkConversationIdChange(state, dispatch, data).then(\n                            () => {\n                                // Current conversation updated sucssesfuly\n                            },\n                            error => {\n                                error = formatCaughtError(error);\n                                if (debug) {\n                                    console_debug_log(\"FileUploader | checkConversationIdChange | ERROR:\", error);\n                                }\n                                setChatbotErrorMsg(error.message, dispatch);\n                            }\n                        );\n                        setSelectedFile(null);\n                        setButtonToggle(false);\n                    },\n                    errorRaw => {\n                        // Hide WaitAnimation after the error\n                        const error = formatCaughtError(errorRaw);\n                        if (debug) {\n                            console_debug_log(\">>--> FileUploader | handleUpload | errorRaw:\", errorRaw);\n                        }\n                        dispatchWaitAnimation(false, dispatch);\n                        console.error('Error uploading the file:', error);\n                        // setExternalErrorMsg(error.message);\n                        setChatbotErrorMsg(error.message, dispatch);\n                        if (debug) {\n                            console_debug_log(\"FileUploader | after setExternalErrorMsg...\");\n                        }\n                    }\n                );\n            }\n        } else {\n            alert('Please select a file to upload.');\n        }\n    };\n\n    useEffect(() => {\n        const extControlsToShowHide = ['user_input_submit', 'voiceMessageRecorder', 'cameraComponent'];\n        toggleIdVisibility((buttonToggle ? \"off\" : \"on\"), extControlsToShowHide);\n    }, [buttonToggle]);\n\n    return (\n        <div\n            id={id}\n            className=\"file-uploader\"\n        >\n            <div\n                className=\"flex items-center\"\n            >\n                <button\n                    onClick={() => setButtonToggle(buttonToggle ? false : true)}\n                    className={`${BUTTON_LISTING_CLASS} mr-2`}\n                    title={buttonToggle ? 'Close' : 'Select File'}\n                >\n                    <FontAwesomeIcon icon={buttonToggle ? 'times' : 'paperclip'} size='lg' />\n                </button>\n                {buttonToggle && (\n                    <div className='flex items-center'>\n                        <input\n                            type=\"file\"\n                            accept={fileTypeFilter ? fileTypeFilter : \"*\"}\n                            onChange={handleFileChange}\n                            className='p-0 m-0'\n                        />\n                        <button\n                            onClick={handleUpload}\n                            className={`${BUTTON_LISTING_CLASS}`}\n                            title='Submit'\n                        >\n                            <FontAwesomeIcon icon='arrow-up' size='lg'/>\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState, useRef } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    dispatchWaitAnimation,\n    addMessageToConversation,\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\nimport { checkConversationIdChange } from './chatbot.db.operations.jsx';\n\nimport './CameraComponent.css';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faArrowUp,\n    faTimes,\n    faCamera, // Camera\n    faCameraRetro, // Icon for taking the photo\n    faExchangeAlt, // Icon for interchange\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faArrowUp, // Arrow-up: to select file + perform the upload\n    faTimes, // X: to close the component controls\n    faCamera, // Camera\n    faCameraRetro, // Icon for taking the photo\n    faExchangeAlt, // Icon for interchange\n);\n\nconst dbApiService = gs.dbService.dbApiService;\nconst MULTIPART_FORM_DATA_HEADER = gs.dbService.MULTIPART_FORM_DATA_HEADER;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst ModalPopUp = gs.ModalPopUp.ModalPopUp;\n\nconst debug = false;\n\nconst extControlsToShowHide = ['user_input_submit', 'voiceMessageRecorder', 'fileUploader'];\nconst VIDEO_OFF = { display: 'none' }\nconst VIDEO_ON = { display: '' };\n\nexport const CameraComponent = ({\n    id,\n    setExternalInputMessage,\n    handleUpdateSize,\n    dispatch,\n    state,\n    question,\n}) => {\n    const [facingMode, setFacingMode] = useState('environment');\n    const [buttonToggle, setButtonToggle] = useState(false);\n    const [photo, setPhoto] = useState(null);\n    const [cameraOn, setCameraOn] = useState(true)\n\n    const videoRef = useRef(null);\n    const canvasRef = useRef(null);\n    const stream = useRef(null);\n    \n    const startCamera = async () => {\n        try {\n            stream.current = await navigator.mediaDevices.getUserMedia({ video: true });\n            videoRef.current.srcObject = stream.current;\n        } catch (error) {\n            console.error('Error accessing camera:', error);\n        }\n    }\n\n    const toggleCamera = async () => {\n        setFacingMode((prevMode) => (prevMode === 'user' ? 'environment' : 'user'));\n        let constraints = { video: { facingMode: { exact: facingMode } } };\n        stream.current= await navigator.mediaDevices.getUserMedia(constraints);\n        videoRef.current.srcObject = stream.current;\n    };\n    \n    const stopCamera = () => {\n        if (videoRef.current && videoRef.current.srcObject) {\n            const tracks = videoRef.current.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n            videoRef.current.srcObject = null;\n        }\n    };\n\n    const takePhoto = () => {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const dataUrl = canvas.toDataURL('image/jpeg');\n        setPhoto(dataUrl);\n    };\n\n    const cameraOnOff = (newState) => {\n        if (!newState) {\n            stopCamera();\n        } else {\n            startCamera();\n        }\n        setCameraOn(newState);\n    }\n\n    const sendPhoto = async () => {\n        if (!question) {\n            alert('Please enter a question before upload the photo.');\n            return;\n        }\n        if (!photo) {\n            alert('Please click on the \"Open Camera\" icon and take a photo.');\n            return;\n        }\n        const formData = new FormData();\n        // Convert base64 to Blob before appending to formData\n        const base64Response = await fetch(photo);\n        const blob = await base64Response.blob();\n        const fileExtension = 'jpg';\n        const timestamp = new Date().toISOString().replace(/[-:.]/g, '_').slice(0, -5);\n        const fileName = `image_capture_${timestamp}.${fileExtension}`;\n        const fileSize = blob.size / (1024 * 1024).toFixed(2); // Size in Mb\n        formData.append('file', blob, fileName);\n        const options = {\n            raw_body: true,\n            headers: MULTIPART_FORM_DATA_HEADER\n        };\n        const db = new dbApiService({ url: \"ai/image_to_text\" });\n        const query = {\n            \"cid\": state.currentConversationId,\n            question: question,\n            file_name: fileName,\n        }\n        addMessageToConversation(question, \"user\", dispatch);\n        addMessageToConversation(\n            '```File Attachment: \"' + fileName + '\" (' + fileSize + ' Mb)```', \"attachment\",\n            dispatch\n        );\n        // Empty external input message\n        setExternalInputMessage(\"\");\n        // Update the size of the input text area if the handleUpdateSize function is provided.\n        if (handleUpdateSize) {\n            handleUpdateSize();\n        }\n        // Show WaitAnimation while fetching data\n        dispatchWaitAnimation(true, dispatch);\n        db.getAll(query, formData, 'POST', options).then(\n            data => {\n                if (debug) {\n                    console_debug_log(\"FileUploader | handleUpload | data:\", data);\n                }\n                dispatchWaitAnimation(false, dispatch);\n                if (debug) {\n                    console_debug_log(`FileUploader is calling checkConversationIdChange(\"${data}\")`);\n                }\n                // addMessageToConversation(data.response, \"assistant\", dispatch);\n                checkConversationIdChange(state, dispatch, data).then(\n                    () => {\n                        // Current conversation updated sucssesfuly\n                    },\n                    error => {\n                        error = formatCaughtError(error);\n                        if (debug) {\n                            console_debug_log(\"FileUploader | checkConversationIdChange | ERROR:\", error);\n                        }\n                        setChatbotErrorMsg(error.message, dispatch);\n                    }\n                );\n                setButtonToggle(false);\n            },\n            error => {\n                // Hide WaitAnimation after the error\n                error = formatCaughtError(error);\n                if (debug) {\n                    console_debug_log(\"FileUploader | handleUpload | ERROR:\", error);\n                }\n                dispatchWaitAnimation(false, dispatch);\n                console.error('Error upploading the file:', error);\n                // setExternalErrorMsg(error.message);\n                setChatbotErrorMsg(error.message, dispatch);\n            }\n        );\n        stopCamera();\n        setPhoto(null);\n        setButtonToggle(false);\n        toggleIdVisibility(\"on\", extControlsToShowHide);\n    };\n\n    return (\n        <div\n            id={id}\n            className=\"camera-capture\"\n        >\n            <div\n                className='min-w-full w-full flex items-center mr-3'\n            >\n                <button\n                    onClick={() => {\n                        if(buttonToggle) {\n                            stopCamera();\n                            setPhoto(null);\n                        } else {\n                            startCamera();\n                        }\n                        setButtonToggle(buttonToggle ? false : true);\n                        toggleIdVisibility((buttonToggle ? \"on\" : \"off\"), extControlsToShowHide);\n                    }}\n                    className={`${BUTTON_LISTING_CLASS} mr-2`}\n                    title={buttonToggle ? 'Close' : 'Start Camera'}\n                >\n                    <FontAwesomeIcon icon={buttonToggle ? 'times' : 'camera'} size='lg' />\n                </button>\n                {buttonToggle && (\n                    <>\n                        <button\n                            onClick={() => cameraOnOff(!cameraOn)}\n                            className={`${BUTTON_LISTING_CLASS} mr-2`}\n                            title='Start Camera'\n                        >\n                            <FontAwesomeIcon icon='camera-retro' size='lg'/>\n                        </button>\n                        <button\n                            onClick={sendPhoto}\n                            className={`${BUTTON_LISTING_CLASS} mr-2`}\n                            title='Send Photo'\n                        >\n                            <FontAwesomeIcon icon='arrow-up' size='lg'/>\n                        </button>\n                        {photo && (\n                            <img\n                                src={photo}\n                                alt=\"Captured\"\n                                className='mr-2'\n                                style={{ width: '30px', height: '30px' }}\n                            />)\n                        }\n                        <div className=\"video-container\">\n                            {\n                                (cameraOn && (\n                                    <ModalPopUp\n                                        closeButtonAction={() => cameraOnOff(!cameraOn)}\n                                        secondButtonMessage='Change Front/Back'\n                                        secondButtonAction={toggleCamera}\n                                        primaryButtonMessage='Take Photo'\n                                        primaryButtonAction={takePhoto}\n                                        allowOnHide={false}\n                                    >\n                                        <video\n                                            ref={videoRef}\n                                            autoPlay\n                                            playsInline\n                                        />\n                                        <canvas\n                                            ref={canvasRef}\n                                            className='mt-2 w-full'\n                                            style={photo ? VIDEO_ON : VIDEO_OFF } \n                                        />\n                                    </ModalPopUp>\n                                ))\n                            }\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n};\n","import React, { useState, useEffect } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { VoiceMessageRecorder } from './VoiceMessageRecorder.jsx';\nimport { FileUploader } from './FileUploader.jsx';\nimport { CameraComponent } from './CameraComponent.jsx';\n\nimport {\n    handleCancelProcessing,\n    sendMessageToBot,\n    checkConversationIdChange,\n} from \"./chatbot.db.operations.jsx\";\n\nimport {\n    // setChatbotInputMessage,\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\n\n/*\nWarning: Failed prop type: Invalid prop `size` of value `m` supplied to `FontAwesomeIcon`,\nexpected one of [\"2xs\",\"xs\",\"sm\",\"lg\",\"xl\",\"2xl\",\"1x\",\"2x\",\"3x\",\"4x\",\"5x\",\"6x\",\"7x\",\"8x\",\"9x\",\"10x\"].\n*/ \n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faGreaterThan,\n    faStop,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faGreaterThan,\n    faStop,\n);\n\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst usePlainFetch = gs.responseHandlersService.usePlainFetch;\nconst growUpTextArea = gs.ui.growUpTextArea;\nconst resetTextArea = gs.ui.resetTextArea;\nconst toggleIdVisibility = gs.ui.toggleIdVisibility;\nconst formatCaughtError = gs.errorAndReenter.formatCaughtError;\nconst WaitAnimation = gs.waitAnimationUtility.WaitAnimation;\nconst getFilenameFromContentDisposition = gs.blobFilesUtilities.getFilenameFromContentDisposition;\nconst responseHasFile = gs.blobFilesUtilities.responseHasFile;\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n// const INPUT_FLEXIBLE_CLASS = gs.classNameConstants.INPUT_FLEXIBLE_CLASS;\n\nconst debug = false;\n\nconst userInputViewportHeight = 80;\n/* <UserInput>.userInputViewportHeight must be the same as \".conversation-block.height\" in ChatBot.css */\n/* 81 for 81vh, 78 for 78vh, an so on */\nconst userInputMaxOffsetHeight = 200;\n\nexport const UserInput = ({\n    dispatch,\n    state,\n    userQuestion, // state.inputMessage\n}) => {\n    const [inputMessage, setInputMessage] = useState(userQuestion);\n    const [updateSize, setUpdateSize] = useState(false);\n\n    useEffect(() => {\n        setInputMessage(state.inputMessage);\n    }, [state.inputMessage]);\n\n    useEffect(() => {\n        // Adjust text area size\n        resetTextArea(\"user_input\", \"conversation-block\", userInputViewportHeight, userInputMaxOffsetHeight);\n    }, [updateSize]);\n\n    // Function to handle adjust text area size on input change from external component\n    const handleUpdateSize = () => {\n        setUpdateSize(!updateSize)\n    };\n\n    // Function to handle input change\n    const handleInputChange = (e) => {\n        /* IMPORTANT:\n           ONLY one call to a useState() is allowed when external component\n           calls a internal function or useState.\n           THE SOLUTION IS: pass the various function or useState to the external component\n           and call them one after another from it.\n        */\n        if (typeof e === \"string\") {\n            setInputMessage(e);\n            // setExternalInputMessage(e); // Update the external input message\n        } else {\n            if (debug) {\n                console_debug_log(`InputBlock | handleInputChange: \"${e}\"`);\n            }\n            setInputMessage(e.target.value);\n            // setExternalInputMessage(e.target.value); // Update the external input message\n        }\n        // setUpdateSize(!updateSize);\n    };\n\n    // Function to handle sending a message\n    const sendMessage = async (newInputMessage = null) => {\n        const extControlsToShowHide = ['fileUploader', 'voiceMessageRecorder', 'cameraComponent'];\n        const botReplyDebug = false;\n        if (newInputMessage === null) {\n            newInputMessage = inputMessage;\n        }\n        if (typeof newInputMessage !== \"undefined\" && newInputMessage !== null && newInputMessage.trim() !== \"\") {\n            // Dispatch the message to the chat\n            const userMessage = { content: newInputMessage, role: 'user' }; // Adjust structure as needed\n            dispatch({ type: 'ADD_MESSAGE', payload: userMessage });\n            // // Set external (global) input message [Deprecated]\n                // setChatbotInputMessage(newInputMessage, dispatch);\n            // Clear the user input\n            setInputMessage('');\n            // Adjust text area size\n            handleUpdateSize();\n            // Hide buttons other than the stop\n            toggleIdVisibility((\"off\"), extControlsToShowHide);\n            // Send the message to the bot and get the response\n            const botReply = await sendMessageToBot(newInputMessage, state, dispatch);\n            if (botReply.ok) {\n                let continueProcessing = true;\n                if (!usePlainFetch) {\n                    const headers = botReply.response.headers;\n                    if (botReplyDebug) console_debug_log('|||| botReply:', botReply)\n                    if (responseHasFile(headers)) {\n                        if (debug) console_debug_log('|||| OCTET-STREAM | botReply.response.file:', botReply.response.file);\n                        const fileUrl = botReply.response.file;\n                        const filename = getFilenameFromContentDisposition(headers);\n                        const botMessage = { content: botReply.response.response, role: 'assistant', attachment_url: fileUrl, filename: filename };\n                        dispatch({ type: 'ADD_MESSAGE', payload: botMessage });\n                        continueProcessing = false;\n                    }\n                }\n                if (continueProcessing) {\n                    // Add the response to the conversation...\n                    if (botReply.response.response) {\n                        const botMessage = { content: botReply.response.response, role: 'assistant' };\n                        dispatch({ type: 'ADD_MESSAGE', payload: botMessage });\n                    }\n                    // Read current conversation from the database to refresh the chat space\n                    checkConversationIdChange(state, dispatch, botReply.response).then(\n                        () => {\n                            // Current conversation updated sucssesfuly\n                        },\n                        error => {\n                            error = formatCaughtError(error);\n                            console.error('>> Error updating current conversation:', botReply.errorMessage);\n                            setChatbotErrorMsg(error.message, dispatch);\n                        }\n                    );\n                }\n            } else {\n                console.error('>> Error communicating with the bot:', botReply.errorMessage);\n                setChatbotErrorMsg(botReply.errorMessage, dispatch);\n            }\n            toggleIdVisibility((\"on\"), extControlsToShowHide);\n        }\n    };\n\n    return (\n        <div\n            className=\"input-area\"\n        >\n            <textarea\n                name=\"user_input\"\n                id=\"user_input\"\n                value={inputMessage}\n                // TODO: remove INPUT_FLEXIBLE_CLASS and put the css in ChatBot.css\n                // className={`${INPUT_FLEXIBLE_CLASS} mr-2`}\n                className=\"p-2\"\n                aria-label=\"Message AI Assistant...\"\n                rows=\"1\" \n                onChange={handleInputChange}\n                onKeyDown={(event) => {\n                    if (event.key === 'Enter') {\n                        // setInputMessage(event.target.value);\n                        sendMessage();\n                    }\n                }}\n                disabled={state && state.isApiProcessing}\n            />\n            <div>\n                <button\n                    name=\"user_input_submit\"\n                    id=\"user_input_submit\"\n                    onClick={() => (state && state.isApiProcessing ? handleCancelProcessing(dispatch) : sendMessage())}\n                    className={`${BUTTON_LISTING_CLASS} mr-2`}\n                    title={state &&  state.isApiProcessing ? 'Stop Processing' : 'Chat with AI Assistant'}\n                >\n                    <FontAwesomeIcon icon={state && state.isApiProcessing ? 'stop' : 'greater-than'} size='lg'/>\n                </button>\n            </div>\n            <VoiceMessageRecorder\n                id='voiceMessageRecorder'\n                dispatch={dispatch}\n                // sendMessage={sendMessage}\n                setExternalInputMessage={handleInputChange}\n                handleUpdateSize={handleUpdateSize}\n            />\n            <FileUploader\n                id='fileUploader'\n                question={inputMessage}\n                setExternalInputMessage={handleInputChange}\n                handleUpdateSize={handleUpdateSize}\n                dispatch={dispatch}\n                state={state}\n                // fileTypeFilter=\"image/*\"\n            />\n            <CameraComponent\n                id='cameraComponent'\n                question={inputMessage}\n                setExternalInputMessage={handleInputChange}\n                handleUpdateSize={handleUpdateSize}\n                dispatch={dispatch}\n                state={state}\n            />\n            {state && state.isApiProcessing && \n                <div className=\"ml-2 flex items-center\"><WaitAnimation /></div>\n            }\n            {\n                growUpTextArea(\"user_input\", \"conversation-block\", userInputViewportHeight, userInputMaxOffsetHeight)\n            }\n        </div>\n    )\n}\n    \n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport './ChatBot.css';\n\nconst BUTTON_LISTING_CLASS = gs.classNameConstants.BUTTON_LISTING_CLASS;\n// const INPUT_FLEXIBLE_CLASS = gs.classNameConstants.INPUT_FLEXIBLE_CLASS;\n\n// const debug = false;\n\nexport const NewConversationButton = ({\n    dispatch,\n    // startNewConversation,\n}) => {\n\n    // Call this when you want to start a new conversation\n    const startNewConversation = () => {\n        // Generate a new conversation ID using UUID for enhanced security\n        // const newConversationId = generateNewConversationId();\n        dispatch({ type: 'START_NEW_CONVERSATION', payload: { conversationId: null } });\n    };\n\n    return (\n        <>\n            <button\n                key='new-conversation-button'\n                onClick={() => startNewConversation()}\n                className={`${BUTTON_LISTING_CLASS} text-xs mb-2`}\n            >\n                New Conversation\n            </button>\n        </>\n    );\n};\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    loadConversation,\n    deleteConversation,\n} from './chatbot.db.operations.jsx';\n\nimport './ChatBot.css';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faTrash,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faTrash,\n);\n\nconst convertId = gs.dbService.convertId;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst timestampToDate = gs.dateTimestamp.timestampToDate;\n\nconst debug = false;\n\n// const dateColumn = \"creation_date\";\nconst dateColumn = \"update_date\";\n\nexport const ConversationList = ({\n    state,\n    dispatch,\n    showSideBar,\n}) => {\n    const setErrorMsg = (errorMsg) => {\n        dispatch({ type: 'SET_ERROR_MSG', payload: errorMsg });\n    }\n\n    // Handle load conversation\n    const handleLoadConversation = async (conversationId, dispatch) => {\n        if (!showSideBar) {\n            return;\n        }\n        const apiResponse = await loadConversation(conversationId, dispatch);\n        if (debug) console_debug_log('handleLoadConversation | apiResponse:', apiResponse);\n        if (apiResponse.ok) {\n            const data = {\n                conversationId: conversationId,\n                messages: apiResponse.response.messages,\n            }\n            dispatch({ type: 'GET_MESSAGES', payload: data });\n        } else {\n            setErrorMsg(apiResponse.errorMessage);\n        }\n    };\n\n    const confirmDeleteConversation = async (conversationId, dispatch, title) => {\n        if (window.confirm(`'Are you sure you want to delete this conversation?\\n\\n${title}`)) {\n            handleDeleteConversation(conversationId, dispatch);\n        }\n    };\n\n    // Handle delete conversation\n    const handleDeleteConversation = async (conversationId, dispatch) => {\n        const startNew = (conversationId === state.currentConversationId);\n        const apiResponse = await deleteConversation(conversationId, dispatch);\n        if (debug) {\n            console_debug_log(`handleDeleteConversation | conversationId: ${conversationId} | state.currentConversationId: ${state.currentConversationId} | startNew: ${startNew} | apiResponse:`, apiResponse);\n        }\n        if (apiResponse.ok) {\n            dispatch({ type: 'DELETE_CONVERSATION', payload: conversationId });\n            if (startNew) {\n                dispatch({ type: 'START_NEW_CONVERSATION', payload: { conversationId: null } });\n            }\n        } else {\n            setErrorMsg(apiResponse.errorMessage);\n        }\n    };\n\n    const fixTitle = (title) => (title.length === 0 ? \"Empty\" : title);\n\n    const groupConversationsByDate = (conversations) => {\n        const groups = {\n            today: [],\n            yesterday: [],\n            lastSevenDays: [],\n            lastMonth: [],\n            older: {}\n        };\n        const now = new Date();\n        const today = now.setHours(0, 0, 0, 0);\n        const yesterday = new Date(today).setDate(now.getDate() - 1);\n        const sevenDaysAgo = new Date(today).setDate(now.getDate() - 7);\n        const oneMonthAgo = new Date(today).setMonth(now.getMonth() - 1);\n\n        conversations.forEach(conversation => {\n            const timestampUnixEpoch = conversation[dateColumn]*1000;\n            const conversationDate = new Date(timestampUnixEpoch);\n            const conversationTime = conversationDate.setHours(0, 0, 0, 0);\n            if (conversationTime === today) {\n                groups.today.push(conversation);\n            } else if (conversationTime === yesterday) {\n                groups.yesterday.push(conversation);\n            } else if (conversationTime > sevenDaysAgo) {\n                groups.lastSevenDays.push(conversation);\n            } else if (conversationTime > oneMonthAgo) {\n                groups.lastMonth.push(conversation);\n            } else {\n                const monthYear = conversationDate.toLocaleString('default', { month: 'long', year: 'numeric' });\n                if (!groups.older[monthYear]) {\n                    groups.older[monthYear] = [];\n                }\n                groups.older[monthYear].push(conversation);\n            }\n        });\n        return groups;\n    };\n\n    const renderConversations = (conversations) => {\n        return conversations.map(conversation => {\n            const convId = convertId(conversation._id);\n            // console.log('renderConversations | convId: ' + `${convId}_div...`);\n            // console.log('renderConversations | conversation:', conversation);\n            return (\n                <div\n                    key={`${convId}_main_div`}\n                    className=\"conversation-item align-middle flex\"\n                >\n                    <div\n                        key={`${convId}_inner_div`}\n                        style={{ width: '95%'}}\n                    >\n                        <div\n                            key={`${convId}_desc_outter_div`}\n                            style={{ maxWidth: '100%', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}\n                        >\n                            <button\n                                key={`${convId}_desc_button`}\n                                onClick={() => handleLoadConversation(convId, dispatch)}\n                                title={timestampToDate(conversation[dateColumn], true, \" \", false)}\n                            >\n                                <div\n                                    key={`${convId}_desc_inner_div`}\n                                    style={{ maxWidth: '100%', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}\n                                >\n                                    {fixTitle(conversation.title)}\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                    <div\n                        key={`${convId}_delete_div`}\n                        style={{ width: '5%'}}\n                    >\n                        <button\n                            key={`${convId}_delete_button`}\n                            type=\"button\"\n                            onClick={() => confirmDeleteConversation(convId, dispatch, conversation.title)}\n                            className=\"ml-2 mb-1 bg-blue-500 text-white p-0 rounded close\"\n                        >\n                            <FontAwesomeIcon icon=\"trash\" size='xs' />\n                        </button>\n                    </div>\n                </div>\n            );\n        });\n    };\n\n    if (!(state && state.conversations)) {\n        return null;\n    }\n\n    const groupedConversations = groupConversationsByDate(state.conversations);\n    return (\n        <div\n            key='conversation_list_main_div'\n            style={{ display: (state.conversationListToggle ? '' : 'none') }}\n        >\n            {groupedConversations.today.length > 0 && (\n                <div key=\"today\">\n                    <h2>Today</h2>\n                    {renderConversations(groupedConversations.today)}\n                </div>\n            )}\n            {groupedConversations.yesterday.length > 0 && (\n                <div key=\"yesterday\">\n                    <h2>Yesterday</h2>\n                    {renderConversations(groupedConversations.yesterday)}\n                </div>\n            )}\n            {groupedConversations.lastSevenDays.length > 0 && (\n                <div key=\"lastSevenDays\">\n                    <h2>Last 7 Days</h2>\n                    {renderConversations(groupedConversations.lastSevenDays)}\n                </div>\n            )}\n            {groupedConversations.lastMonth.length > 0 && (\n                <div key=\"lastMonth\">\n                    <h2>Last Month</h2>\n                    {renderConversations(groupedConversations.lastMonth)}\n                </div>\n            )}\n            {Object.keys(groupedConversations.older).map(monthYear => (\n                <div key={\"month_year_\" + monthYear}>\n                    <h2>{monthYear}</h2>\n                    {renderConversations(groupedConversations.older[monthYear])}\n                </div>\n            ))}\n        </div>\n    );\n}\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { setConversationListToggle } from './chatbot.general.functions.jsx';\n\nimport './ChatBot.css';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faGreaterThan,\n    faLessThan,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faGreaterThan,\n    faLessThan,\n);\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const ConversationsToggleButton = ({\n    state,\n    dispatch,\n}) => {\n    if (debug) {\n        console_debug_log('ConversationsToggleButton...');\n    }\n    return (\n        <>\n            <button\n                key='conversation-list-toggle-button'\n                type='button'\n                className=\"bg-white border-none focus:outline-none\"\n                onClick={() => setConversationListToggle(!state.conversationListToggle, dispatch)}\n            >\n                <FontAwesomeIcon\n                    icon={state.conversationListToggle ? 'less-than' : 'greater-than'}\n                    size='xl'\n                    style={{ color: 'lightgray' }}\n                />\n            </button>\n        </>\n    )\n}\n","import React, { useState, useRef } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport './AudioPlayer.css';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faPlay,\n    faStop,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faPlay,\n    faStop,\n);\n\nconst WARNING_MSG_CLASS = gs.classNameConstants.WARNING_MSG_CLASS;\nconst defaultFilenametoDownload = gs.blobFilesUtilities.defaultFilenametoDownload;\nconst decodeBlob = gs.blobFilesUtilities.decodeBlob;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\nconst browserAudioController = true;\n\nconst AudioPlayer = ({ blobUrl, filename, expired, errorMsgSuffix }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const audioPlayer = useRef(); // reference to the audio component\n\n  const fixBlob = () => {\n    if (!blobUrl) {\n      return;\n    }\n    fetch(blobUrl).then(r => {\n      r.blob().then(blob => {\n        const reader = new FileReader();\n        // reader.readAsDataURL(blob);  // Convert to data:audio/mpeg;base64,Ly9Qa3h...\n        reader.readAsText(blob);  // No convertion at all... just get what it receives...\n        reader.onloadend = function() {\n          const newBlobUrl = decodeBlob(reader.result, filename);\n          audioPlayer.current.src = newBlobUrl;\n          audioPlayer.current.play();\n        }\n      });\n    });\n  };\n\n  // Play & Pause toggle function\n  const togglePlayPause = () => {\n    const prevValue = isPlaying;\n    setIsPlaying(!prevValue);\n    if (!prevValue) {\n      audioPlayer.current.play().catch(error => {\n        if (debug) console_debug_log(\"AudioPlayer | togglePlayPause | error:\", error, 'error.message:', error.message);\n        const errorMsgs = [\n            \"Failed to load because no supported source was found.\",\n            \"The element has no supported sources.\",\n        ]\n        if (Object.values(errorMsgs).some(msg => error.message.includes(msg))) {\n          // Probably the data comes from AWS API Gateway in Base64 format\n          // Try to convert Base64 to Binary\n          fixBlob();\n        } else {\n          console.error(error);\n        }\n      });\n    } else {\n      audioPlayer.current.pause();\n    }\n  };\n\n  // Update the current time\n  const onPlaying = () => {\n    setCurrentTime(audioPlayer.current.currentTime);\n    setDuration(audioPlayer.current.duration);\n    if (audioPlayer.current.duration === audioPlayer.current.currentTime) {\n      setIsPlaying(false);\n    }\n  };\n\n  // Adjust current time as per the slider\n  const onScrub = (value) => {\n    setCurrentTime(value);\n    audioPlayer.current.currentTime = value;\n    if (!isPlaying) {\n      togglePlayPause();\n    }\n  };\n\n  // Download the audio file\n  const downloadAudio = () => {\n    const link = document.createElement('a');\n    link.href = blobUrl;\n    link.setAttribute('download', filename ? filename : defaultFilenametoDownload); // or any other format\n    document.body.appendChild(link);\n    link.click();\n  };\n\n  if (expired) {\n    return (\n      <div\n        className={WARNING_MSG_CLASS}\n      >\n        {`Audio file expired${errorMsgSuffix}`}\n      </div>\n    );\n  }\n\n  if (browserAudioController) {\n    return (\n      <>\n        <audio ref={audioPlayer} src={blobUrl} controls onBeforeInput={togglePlayPause} />\n      </>\n    );\n  }\n\n  return (\n    <div className=\"audio-player\">\n      <audio ref={audioPlayer} src={blobUrl} onTimeUpdate={onPlaying} />\n      <button\n        onClick={togglePlayPause}\n        className=\"play-button\"\n      >\n          <FontAwesomeIcon icon={isPlaying ? 'stop' : 'play'} size='sm'/>\n      </button>\n      <input\n        type=\"range\"\n        value={currentTime}\n        step=\"1\"\n        min=\"0\"\n        max={duration}\n        onChange={(e) => onScrub(e.target.value)}\n      />\n      <div className=\"menu\">\n        <button onClick={() => {}}>...</button>\n        <div className=\"menu-content\">\n          <button onClick={downloadAudio}>Download</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n","import React, { useEffect } from 'react'\n\nimport * as gs from \"genericsuite\";\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const GoToTheBottom = ({ elementId, elementsToRender }) => {\n    const objDiv = document.getElementById(elementId);\n    if (debug) {\n        console_debug_log(`GoToTheBottom (${elementId}) | objDiv:`, objDiv)\n    }\n    useEffect(() => {\n        if (objDiv && elementsToRender !== '') {\n            // objDiv.scrollIntoView(false);\n            objDiv.scrollTop = objDiv.scrollHeight;\n            if (debug) {\n                console_debug_log(`GoToTheBottom (${elementId}) | objDiv.scrollTop: ${objDiv.scrollTop} | objDiv.scrollHeight: ${objDiv.scrollHeight}`)\n            }\n            // Sometimes it needs a second change, specially when the object is being populated\n            // objDiv.scrollTop = objDiv.scrollHeight;\n        }\n    }, [objDiv, elementsToRender, elementId]);\n    return (<></>);\n}\n","import React, { useEffect } from 'react'\n\nimport * as gs from \"genericsuite\";\n\nimport \"./ScrollToBottomButton.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport fontawesome from \"@fortawesome/fontawesome\";\nimport {\n    faArrowDown,\n} from \"@fortawesome/fontawesome-free-solid\";\nfontawesome.library.add(\n    faArrowDown,\n);\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nexport const ScrollToBottomButton = ({ elementId, elementsToRender }) => {\n    const element = document.getElementById(elementId);\n\n    const scrollToBottom = () => {\n        if (element) {\n            element.scrollTop = element.scrollHeight;\n        }\n    };\n\n    useEffect(() => {\n        if (element && elementsToRender !== '') {\n            // let lastScrollTop =\n            //     element.scrollY || element.scrollTop;\n            element.addEventListener(\n                'scroll',\n                function handleScroll() {\n                    // const scrollTopPosition =\n                    //     element.scrollY || element.scrollTop;\n                    // if (scrollTopPosition > lastScrollTop) {\n                    //     console.log('scrolling down');\n                    // } else if (scrollTopPosition < lastScrollTop) {\n                    //     console.log('scrolling up');\n                    // }\n                    // lastScrollTop =\n                    //     scrollTopPosition <= 0 ? 0 : scrollTopPosition;\n                    showDebugInfo(element, elementId);\n                    const buttonElement = document.getElementById('scroll-overfolw-button');\n                    buttonElement.style.visibility=(showButton(element));    \n                },\n                false,\n            );\n        }\n    }, [element, elementsToRender, elementId]);\n\n    showDebugInfo(element, elementId);\n    return (\n        <div\n            id='scroll-overfolw-button'\n            style={{visibility: showButton(element)}}\n        >\n            <button\n                onClick={scrollToBottom}\n                className=\"float\"\n            >\n                    <i className=\"a fa-plus my-float\">\n                        <FontAwesomeIcon icon='arrow-down' size='lg'/>\n                    </i>\n            </button>\n        </div>\n    )\n}\n\nconst showButton = (element) => (\n    ((element && element.scrollHeight > element.scrollTop+element.clientHeight) ? 'visible' : 'hidden')\n);\n\nconst showDebugInfo = (element, elementId) => {\n    if (debug && element) {\n        console_debug_log(` ScrollToBottomButton (${elementId}) | showButton: ${showButton(element)} | element.scrollTop: ${element.scrollTop} | element.scrollHeight: ${element.scrollHeight} |  element.clientHeight: ${ element.clientHeight} | element.offsetHeight: ${element.offsetHeight}`);\n    }\n}\n","import React from 'react';\n\n///////////////////////////\n\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter\n\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/master/AVAILABLE_LANGUAGES_HLJS.MD\n// https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/master/AVAILABLE_LANGUAGES_PRISM.MD\n// \"Prism\" has more supported languages and the most intenresting, comprared with  \"HLJS\"\n\nimport { Prism, Light } from 'react-syntax-highlighter';\nimport { vscDarkPlus as shStyleforPrism } from 'react-syntax-highlighter/dist/cjs/styles/prism/index.js';\nimport { grayscale as shStyleForLight } from 'react-syntax-highlighter/dist/cjs/styles/hljs/index.js';\n\n///////////////////////////\n\nimport * as gs from \"genericsuite\";\n\nconst LinkifyText = gs.ui.LinkifyText;\nconst CopyButton = gs.ui.CopyButton;\n\nexport const ChatCodeBlock = ({ children, shType = \"prism\" }) => {\n    // Regular expression to match code blocks enclosed in ```\n    const codeRegex = /```([\\s\\S]*?)```/g;\n\n    // Split content into parts with and without code blocks\n    const parts = children.split(codeRegex);\n\n    return (\n        <div>\n            {parts.map((part, index) => {\n                if (index % 2 === 0) {\n                    // Render non-code parts as regular text\n                    // return <span key={index}>{part}</span>;\n                    return (\n                        <LinkifyText\n                            key={`${index}-other`}\n                        >\n                            {part}\n                        </LinkifyText>\n                    );\n                } else {\n                    // Render code blocks with specified styles\n                    let content = part.trim()\n                    const language = content.split('\\n')[0];\n                    content = content.substring(language.length + 1).trim();\n                    return (\n                        <>\n                            <div style={{ position: 'relative' }}>\n                                <div\n                                    key={`${index}-language`}\n                                    style={{\n                                        backgroundColor: 'rgb(30, 30, 30)',\n                                        color: 'wheat',\n                                        marginTop: '10px',\n                                        padding: '10px',\n                                        // borderRadius: '5px',\n                                        overflowX: 'auto',\n                                    }}\n                                >\n                                    {language}\n                                </div>\n                                <div\n                                    key={`${index}-content`}\n                                >\n                                    {shType===\"prism\" && (\n                                        <Prism\n                                            language={language} \n                                            style={shStyleforPrism}\n                                            wrapLongLines={true}\n                                        >\n                                            {content}\n                                        </Prism>\n                                    )}   \n                                    {shType!==\"prism\" && (\n                                        <Light\n                                            language={language} \n                                            style={shStyleForLight}\n                                            wrapLongLines={true}\n                                        >\n                                            {content}\n                                        </Light>\n                                    )}   \n                                    <CopyButton text={content} />\n                                </div>\n                            </div>\n                        </>\n                    );\n                }\n            })}\n        </div>\n    );\n};\n","import React, { useState, useEffect } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport AudioPlayer from './AudioPlayer.jsx';\nimport { GoToTheBottom } from './GoToTheBottom.jsx'\nimport { ScrollToBottomButton } from './ScrollToBottomButton.jsx'\nimport { ChatCodeBlock } from './ChatCodeBlock.jsx';\n\nimport './ChatBot.css';\n\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst usePlainFetch = gs.responseHandlersService.usePlainFetch;\nconst getFileExtension = gs.blobFilesUtilities.getFileExtension;\nconst performDownload = gs.blobFilesUtilities.performDownload;\nconst INFO_MSG_CLASS = gs.classNameConstants.INFO_MSG_CLASS;\nconst WARNING_MSG_CLASS = gs.classNameConstants.WARNING_MSG_CLASS;\n\nconst debug = false;\nconst defaultDownloadFilename = 'file_with_no_name.mp3'\n\nexport const ConversationBlock = ({\n    id,\n    state,\n    dispatch,\n    handleRetry,\n    // errorMsg,\n}) => {\n    const [elementsToRender, setElementsToRender] = useState('');\n\n    if (debug) {\n        console_debug_log(`ConversationBlock | state.errorMsg: ${state.errorMsg} | state:`, state);\n    }\n\n    const formatMessage = (messageObject) => {\n        let message = messageObject.content;\n        const hasDownloadFileToken = message && message.includes(\"[SEND_FILE_BACK]\");\n        const downloadedFilename = hasDownloadFileToken ? message.replace(\"[SEND_FILE_BACK]=\", \"\").split('/').pop() : null;\n        const url = typeof messageObject.attachment_url !== \"undefined\" ? messageObject.attachment_url : null;\n        const hasAttachment = (url !== null || hasDownloadFileToken);\n        let filename = typeof messageObject.filename !== \"undefined\" ? messageObject.filename : downloadedFilename; \n        const extension = filename ? getFileExtension(filename) : null;\n        let errorMsgSuffix = usePlainFetch ? \" (No headers allowed)\" : \"\";\n        if (!filename) {\n            filename = defaultDownloadFilename;\n            errorMsgSuffix += (errorMsgSuffix.trim() === '' ? '' : '.') + ' WARNING: no file name received. Fix the Backend API to send headers.'\n        }\n        if (hasAttachment && extension) {\n            if (['wav', 'mp3'].includes(extension.toLowerCase())) {\n                return (\n                    <AudioPlayer\n                        blobUrl={url}\n                        filename={filename}\n                        expired={hasDownloadFileToken}\n                        errorMsgSuffix={errorMsgSuffix}\n                    />\n                );\n            } else {\n                if (hasDownloadFileToken) {\n                    return (\n                        <p\n                            className={WARNING_MSG_CLASS}\n                            title={filename}\n                        >\n                            {(['wav', 'mp3'].includes(extension.toLowerCase()) ? \"Audio file link\" : \"Link\") + ` expired...${errorMsgSuffix}`}\n                        </p>\n                    )\n                }\n                // Link to download the file calling the performDownload function   \n                return (\n                    <button\n                        className={INFO_MSG_CLASS}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            performDownload(url, filename);\n                        }}\n                    >\n                        {(message ? message : `Click here to download the \"${filename}\" file`)+errorMsgSuffix}\n                    </button>\n                );\n            }\n        }\n        if (hasAttachment || (message && message.startsWith('```File'))) {\n            if (message && message.startsWith('```')) {\n                message = message.substring(3, message.length - 3);\n                const firstWord = message.split(' ')[0];\n                message = message.substring(firstWord.length + 1).trim();\n            }\n            if (hasAttachment && !message) {\n                message = filename;\n            }\n            return (\n                <div style={{backgroundColor: 'white'}}>\n                    <div style={{maxWidth: 'fit-content', border: '1px solid black', borderRadius: '5px', backgroundColor: '#f2f2f2', padding: '10px'}}>\n                        {hasAttachment && (\n                            <a\n                                href={messageObject.attachment_url}\n                                target='_blank'\n                                rel=\"noreferrer\"\n                                style={{color: 'black', fontWeight: 'bold'}}\n                            >\n                                {message+errorMsgSuffix}\n                            </a>\n                        )}\n                        {!hasAttachment && (\n                            <>{message+errorMsgSuffix}</>\n                        )}\n                    </div>\n                    {hasAttachment && ['jpg', 'jpeg', 'gif', 'png', 'svg', 'bmp', 'webp', 'tiff'].includes(String(extension.toLowerCase())) && (\n                            <div className='mt-2'>\n                                <img\n                                    className='rounded-md'\n                                    src={messageObject.attachment_url}\n                                    alt={`Attachment: ${message}`}\n                                    style={{maxHeight: 'auto', width: 'fit-content', maxWidth: '100%'}}\n                                />\n                            </div>\n                        )\n                    }\n                </div>\n            );\n        }\n        let shType = \"prism\";\n        // if (message.includes('\\n')) {\n        //     // https://www.markdownguide.org/basic-syntax/\n        //     // message.replace(/\\n/g, '<BR/>');\n        //     message = '```markdown```' + message;\n        //     shType = \"hljs\";\n        // }\n        if (message.includes('```plaintext```')) {\n            shType = \"hljs\";\n        }\n        return (\n            <>\n                <ChatCodeBlock\n                    shType={shType}\n                >\n                    {message}\n                </ChatCodeBlock>\n            </>\n        );\n    }\n\n    useEffect(() => {\n        setElementsToRender(state.messages.map((message, index) => (\n            <div key={index} className=\"message\">\n                <div className={`message-content ${message.role === 'user' ? 'user-message' : 'bot-message'}`}>\n                    {formatMessage(message)}\n                </div>\n            </div>\n        )));\n    }, [state.messages])\n\n    return (\n        <>\n            <div\n                id={id ? id : \"conversation-block\"}\n                className=\"conversation-block\"\n            >\n                {state && !state.errorMsg && state.messages && elementsToRender}\n            </div>\n            <ScrollToBottomButton\n                elementId='conversation-block'\n                elementsToRender={elementsToRender}\n            />\n            <GoToTheBottom\n                elementId='conversation-block'\n                elementsToRender={elementsToRender}\n            />\n        </>\n    );\n}\n","import React, { useEffect, useReducer } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport {\n    setChatbotInputMessage,\n    setChatbotErrorMsg,\n} from './chatbot.general.functions.jsx';\n\nimport { UserInput } from './UserInput.jsx';\nimport {\n    fetchConversations,\n} from './chatbot.db.operations.jsx';\nimport { NewConversationButton } from './NewConversationButton.jsx';\nimport { ConversationList } from './ConversationList.jsx';\nimport { ConversationsToggleButton } from './ConversationsToggleButton.jsx';\nimport { ConversationBlock } from './ConversationBlock.jsx';\n\nimport './ChatBot.css';\n\nconst convertId = gs.dbService.convertId;\nconst console_debug_log = gs.loggingService.console_debug_log;\nconst isMobileDevice = gs.ui.isMobileDevice;\nconst getUrlParams = gs.urlParams.getUrlParams;\nconst errorAndReEnter = gs.errorAndReenter.errorAndReEnter;\n\nconst debug = false;\n\nconst urlParams = getUrlParams();\n\n// A reducer function for chat state management\nconst chatReducer = (state, action) => {\n    switch (action.type) {\n\n        // Messages\n    \n        case 'ADD_MESSAGE':\n            // Adds a new message to the chat history\n            return {\n                ...state,\n                messages: [...state.messages, action.payload]\n            };\n\n        case 'GET_MESSAGES':\n            if(debug) {\n                console_debug_log(\">>--> ** ChatReducer ** | action:\", action);\n            }\n            return {\n                ...state,\n                // Payload has an array of messages and the conversationId\n                currentConversationId: action.payload.conversationId,\n                messages: action.payload.messages,\n            };\n\n        // Conversations\n\n        // TODO\n        case 'CLEAR_CHAT':\n            // Clears the chat history\n            return {\n                ...state,\n                messages: []\n            };\n\n        case 'START_NEW_CONVERSATION':\n            return {\n                ...state,\n                currentConversationId: action.payload.conversationId,\n                messages: []\n            };\n\n        case 'SET_CONVERSATION_ID':\n            return {\n                ...state,\n                currentConversationId: action.payload,\n            };\n\n        // Conversation List\n\n        case 'SET_CONVERSATIONS':\n            return {\n                ...state,\n                conversations: action.payload\n            };\n\n        case 'DELETE_CONVERSATION':\n            return {\n                ...state,\n                conversations: state.conversations.filter(conversation => convertId(conversation._id) !== action.payload)\n            };\n\n        // Bot\n    \n        case 'API_PROCESSING_STATUS':\n            return {\n                ...state,\n                isApiProcessing: action.payload\n            };\n\n        case 'SET_INPUT_MESSAGE':\n            return {\n                ...state,\n                inputMessage: action.payload\n            };\n            \n        case 'SET_CONVERSATION_LIST_TOGGLE':\n            return {\n                ...state,\n                conversationListToggle: action.payload\n            };\n            \n        case 'SET_ERROR_MSG':\n            return {\n                ...state,\n                errorMsg: action.payload\n            };\n\n        // Not registered action\n    \n        default:\n            return state;\n    }\n};\n\n// Chatbot main component\n\nexport const ChatBot = ({\n    userQuestion = (urlParams.q ? decodeURIComponent(urlParams.q) : ''),\n    showSideBar = !(urlParams.ssb && urlParams.ssb === \"0\")\n}) => {\n    const [state, dispatch] = useReducer(chatReducer, {\n        messages: [],\n        conversations: [],\n        currentConversationId: null,\n        isApiProcessing: false,\n        isTyping: false,\n        inputMessage: userQuestion,\n        conversationListToggle: !isMobileDevice(),\n        errorMsg: null,\n    });\n\n    const columnSizeList = () =>\n        (showSideBar && state.conversationListToggle ? (isMobileDevice() ? '70%' : '30%') : \"0%\")\n\n    const columnSizeMessages = () =>\n        (showSideBar && state.conversationListToggle ? (isMobileDevice() ? '30%' : '70%') : \"100%\")\n    \n    if (debug) {\n        console_debug_log(\"AiAssistant STATE:\", state);\n        console_debug_log(\"AiAssistant Main | state.errorMsg:\", state.errorMsg);\n    }\n\n    // If there's an initial UserQuestion, send it inmediatelly to the LLM\n    // useEffect(() => {\n    //     if (userQuestion !== '') {\n    //         sendMessage(userQuestion);\n    //     }\n    // }, [userQuestion, sendMessage]);\n\n    const handleRetry = (e) => {\n        if (state && state.messages) {\n            const lastUserMessage = state.messages.slice().reverse().find(\n                message => message.role === 'user' && message.content !== ''\n            );\n            // if (debug) {\n                console_debug_log(\"handleRetry | lastUserMessage:\", lastUserMessage, \"state.messages:\", state.messages);\n            // }\n            if (\n                typeof lastUserMessage !== \"undefined\" &&\n                lastUserMessage !== null &&\n                typeof lastUserMessage[\"content\"] !== \"undefined\"\n            ) {\n                // if (debug) {\n                    console_debug_log(`handleRetry | setChatbotInputMessage: ${lastUserMessage.content}`);\n                // }\n                setChatbotInputMessage(lastUserMessage.content, dispatch);\n            }\n        }\n        setChatbotErrorMsg(null, dispatch)\n    };\n    \n    // Load conversations\n    useEffect(() => {\n        fetchConversations(dispatch)\n            .then(\n                apiResponse => {\n                    if (debug) {\n                        console_debug_log(`>>> AiAssistant INITIAL useEffect |  apiResponse:`, apiResponse);\n                    }\n                    if (!apiResponse.ok) {\n                        setChatbotErrorMsg(apiResponse.errorMessage, dispatch)\n                    }\n                },\n                error => setChatbotErrorMsg(error, dispatch)\n            );\n    }, []);\n\n    return (\n        <div className=\"chatbot-container\">\n            {state.errorMsg && (\n                <>\n                    {errorAndReEnter(state.errorMsg, null, null, handleRetry)}\n                </>\n            )}\n            {showSideBar && state.conversationListToggle && (\n                <div\n                    className=\"conversations-list\"\n                    style={{ width: columnSizeList() }}\n                >\n                    <NewConversationButton\n                        dispatch={dispatch}\n                    />\n                    <ConversationList\n                        state={state}\n                        dispatch={dispatch}\n                        showSideBar={showSideBar}\n                    />\n                </div>\n            )}\n            {showSideBar && (\n                <ConversationsToggleButton\n                    state={state}\n                    dispatch={dispatch}\n                />\n            )}\n            <div \n                id=\"message-area\"\n                className=\"message-area\"\n                style={{ width: columnSizeMessages() }}\n            >\n                <ConversationBlock\n                    id=\"conversation-block\"\n                    state={state}\n                    handleRetry={handleRetry}\n                />\n                <UserInput\n                    state={state}\n                    dispatch={dispatch}\n                    userQuestion={state.inputMessage}\n                />\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\n\nimport * as gs from \"genericsuite\";\nimport { ChatBot } from '../ChatBot/ChatBot.jsx';\n// import { ChatBotButton } from '../ChatBotButton/ChatBotButton.jsx';\n\nconst mergeDicts = gs.dictUtilities.mergeDicts;\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst debug = false;\n\nconst defaultComponentMap = {\n    \"Chatbot\": ChatBot,\n    // \"ChatBotButton\": ChatBotButton,\n};\n\nexport const App = ({componentMap = {}, appLogo = null}) => {\n    const componentMapFinal = mergeDicts(componentMap, defaultComponentMap);\n    if (debug) console_debug_log(\"GS_AI App | componentMapFinal:\", componentMapFinal);\n    return (\n        <gs.App\n            appLogo={(appLogo === null ? 'gs_ai_logo_circle.svg' : appLogo)}\n            componentMap={componentMapFinal}\n        />\n    );\n}\n","// AI button\n\nimport React, { useState } from 'react';\n\nimport * as gs from \"genericsuite\";\n\nimport { ChatBot } from \"../ChatBot/ChatBot.jsx\"\n\nconst console_debug_log = gs.loggingService.console_debug_log;\n\nconst imageDirectory = gs.generalConstants.imageDirectory;\nconst sparkIcon = gs.spark;\n// import SparkIcon from \"../../images/spark.svg\";\n\nconst debug = false;\nconst sparkClickOpenWindow = true;\n\nexport const ChatBotButton = ({\n    valueElement,\n    chatbot_prompt,\n}) => {\n    const [showLLMPopup, setShowLLMPopup] = useState(false);\n\n    if (debug) {\n        console_debug_log(`ChatBotButton | valueElement: ${valueElement} | document.getElementById(valueElement)| ${document.getElementById(valueElement)} | chatbot_prompt: ${chatbot_prompt}`);\n    }\n\n    const setPrompt = (prompt, valueToReplace) => {\n        return prompt.replace(\"%s\", valueToReplace);\n    }\n    \n    const handleSparkClick = (e) => {\n        e.preventDefault();\n        const inputValue = document.getElementById(valueElement).value;\n        if (inputValue !== \"\") {\n            if (sparkClickOpenWindow) {\n                window.open(\n                    window.location.origin + '/#/chatbot?menu=0&ssb=0&q=' + setPrompt(chatbot_prompt, inputValue),\n                    'AppChatbotPopUp',\n                    'height=600,width=400'\n                );\n            } else {\n                setShowLLMPopup(!showLLMPopup);\n            }\n        }\n    };\n\n    return (\n        <>\n            <div\n                className=\"align-middle flex\"\n            >\n                <div className='ml-2'>\n                    <button\n                        onClick={handleSparkClick}\n                    >\n                        <img src={imageDirectory + sparkIcon} alt=\"Open AI Chat\" />\n                    </button>\n                </div>\n            </div>\n            {showLLMPopup && (\n                <div className=\"mt-5\">\n                    <div className=\"llm-popup\">\n                        <ChatBot\n                            userQuestion={setPrompt(chatbot_prompt, document.getElementById(valueElement).value)}\n                            showSideBar={false}\n                        />\n                    </div>\n                </div>\n            )}\n        </>\n    );\n};\n\n","// Components\nimport { App } from './components/App/App.jsx';\nimport { CameraComponent } from './components/ChatBot/CameraComponent.jsx';\nimport { ChatBotButton } from './components/ChatBotButton/ChatBotButton.jsx';\nimport { ChatBot } from './components/ChatBot/ChatBot.jsx';\nimport { ChatCodeBlock } from \"./components/ChatBot/ChatCodeBlock.jsx\";\nimport { ConversationBlock } from \"./components/ChatBot/ConversationBlock.jsx\";\nimport { ConversationList } from \"./components/ChatBot/ConversationList.jsx\";\nimport { ConversationsToggleButton } from \"./components/ChatBot/ConversationsToggleButton.jsx\";\nimport { FileUploader } from './components/ChatBot/FileUploader.jsx';\nimport { NewConversationButton } from \"./components/ChatBot/NewConversationButton.jsx\";\nimport { UserInput } from \"./components/ChatBot/UserInput.jsx\";\nimport { VoiceMessageRecorder } from './components/ChatBot/VoiceMessageRecorder.jsx';\n// Images\nconst gsAiLogoCircle = 'gs_ai_logo_circle.svg'\n\nexport {\n    // Components\n    App,\n    CameraComponent,\n    ChatBotButton,\n    ChatBot,\n    ChatCodeBlock,\n    ConversationBlock,\n    ConversationList,\n    ConversationsToggleButton,\n    FileUploader,\n    NewConversationButton,\n    UserInput,\n    VoiceMessageRecorder,\n    // Images\n    gsAiLogoCircle,\n};\n"],"names":["gs","loggingService","console_debug_log","setChatbotErrorMsg","errorMsg","dispatch","type","payload","setChatbotInputMessage","inputMessage","addMessageToConversation","newMessage","role","systemMessage","content","dispatchWaitAnimation","waitAnimationFlag","setConversationListToggle","conversationListToggle","fontawesome","library","add","faMicrophone","faStop","dbApiService","dbService","MULTIPART_FORM_DATA_HEADER","formatCaughtError","errorAndReenter","toggleIdVisibility","ui","getMediaTypeToRecord","media","mediaSupported","BUTTON_LISTING_CLASS","classNameConstants","debug","extControlsToShowHide","useAxios","process","env","REACT_APP_USE_AXIOS","VoiceMessageRecorder","_ref","id","setExternalInputMessage","handleUpdateSize","sendMessage","isRecording","setIsRecording","useState","audioData","setAudioData","setErrorMsg","mediaRecorderRef","useRef","startRecording","startMediaDevices","stream","navigator","mediaDevices","getUserMedia","audio","mediaType","concat","mediaRecorder","MediaRecorder","current","chunks","ondataavailable","e","push","data","onstop","blob","Blob","start","error","errorMsgAux","console","message","stopRecording","stopMediaDevices","state","stop","sendFile","url","formData","authHeader","queryParams","headers","Object","assign","response","axios","post","params","errorRaw","useEffect","sendVoiceMessage","FormData","extension","split","fileName","appleDevice","sourceLang","other","append","options","raw_body","query_params","db","endpointUrl","REACT_APP_API_URL","getAll","then","React","createElement","className","onClick","title","FontAwesomeIcon","icon","size","authenticationService","defaultValue","genericEditorUtilities","getCurrentUser","currentUser","setCurrentUser","x","subscription","subscribe","unsubscribe","abortController","ApiCall","getActionName","operationType","getRequestMethod","processGoodResponse","responseAttrName","ok","errorMessage","error_message","processErrorResponse","verifyId","the","was_successful","error_in_the","operationName","operationDescription","ActionDescription","requestMethod","query","body","getOne","createRow","updateRow","deleteRow","operationMessage","checkConversationIdChange","externalApiResponse","cid","currentConversationId","apiResponse","fetchConversations","fetchOneConversation","loadConversationList","user_id","conversationId","loadConversation","messages","deleteConversation","sendMessageToBot","messageText","abort","AbortController","chatToSend","JSON","stringify","signal","handleCancelProcessing","faArrowUp","faTimes","faPaperclip","FileUploader","question","fileTypeFilter","selectedFile","setSelectedFile","buttonToggle","setButtonToggle","handleFileChange","file","target","files","startsWith","alert","handleUpload","fileSize","toFixed","name","file_name","accept","onChange","faCamera","faCameraRetro","faExchangeAlt","ModalPopUp","VIDEO_OFF","display","VIDEO_ON","CameraComponent","facingMode","setFacingMode","photo","setPhoto","cameraOn","setCameraOn","videoRef","canvasRef","startCamera","video","srcObject","toggleCamera","prevMode","constraints","exact","stopCamera","tracks","getTracks","forEach","track","takePhoto","canvas","context","getContext","drawImage","width","height","dataUrl","toDataURL","cameraOnOff","newState","sendPhoto","base64Response","fetch","fileExtension","timestamp","Date","toISOString","replace","slice","Fragment","src","alt","style","closeButtonAction","secondButtonMessage","secondButtonAction","primaryButtonMessage","primaryButtonAction","allowOnHide","ref","autoPlay","playsInline","faGreaterThan","usePlainFetch","responseHandlersService","growUpTextArea","resetTextArea","WaitAnimation","waitAnimationUtility","getFilenameFromContentDisposition","blobFilesUtilities","responseHasFile","userInputViewportHeight","userInputMaxOffsetHeight","UserInput","userQuestion","setInputMessage","updateSize","setUpdateSize","handleInputChange","value","newInputMessage","arguments","length","undefined","trim","userMessage","botReply","continueProcessing","fileUrl","filename","botMessage","attachment_url","rows","onKeyDown","event","key","disabled","isApiProcessing","NewConversationButton","startNewConversation","faTrash","convertId","timestampToDate","dateTimestamp","dateColumn","ConversationList","showSideBar","handleLoadConversation","confirmDeleteConversation","window","confirm","handleDeleteConversation","startNew","fixTitle","groupConversationsByDate","conversations","groups","today","yesterday","lastSevenDays","lastMonth","older","now","setHours","setDate","getDate","sevenDaysAgo","oneMonthAgo","setMonth","getMonth","conversation","timestampUnixEpoch","conversationDate","conversationTime","monthYear","toLocaleString","month","year","renderConversations","map","convId","_id","maxWidth","overflow","textOverflow","whiteSpace","groupedConversations","keys","faLessThan","ConversationsToggleButton","color","faPlay","WARNING_MSG_CLASS","defaultFilenametoDownload","decodeBlob","AudioPlayer","blobUrl","expired","errorMsgSuffix","isPlaying","setIsPlaying","audioPlayer","fixBlob","r","reader","FileReader","readAsText","onloadend","newBlobUrl","result","play","togglePlayPause","prevValue","catch","errorMsgs","values","some","msg","includes","pause","controls","onBeforeInput","GoToTheBottom","elementId","elementsToRender","objDiv","document","getElementById","scrollTop","scrollHeight","faArrowDown","ScrollToBottomButton","element","scrollToBottom","addEventListener","handleScroll","buttonElement","visibility","showButton","clientHeight","LinkifyText","CopyButton","ChatCodeBlock","children","shType","codeRegex","parts","part","index","language","substring","position","backgroundColor","marginTop","padding","overflowX","Prism","shStyleforPrism","wrapLongLines","Light","shStyleForLight","text","getFileExtension","performDownload","INFO_MSG_CLASS","defaultDownloadFilename","ConversationBlock","handleRetry","setElementsToRender","formatMessage","messageObject","hasDownloadFileToken","downloadedFilename","pop","hasAttachment","toLowerCase","preventDefault","firstWord","border","borderRadius","href","rel","fontWeight","String","maxHeight","isMobileDevice","getUrlParams","urlParams","errorAndReEnter","chatReducer","action","filter","ChatBot","q","decodeURIComponent","ssb","useReducer","isTyping","columnSizeList","columnSizeMessages","lastUserMessage","reverse","find","mergeDicts","dictUtilities","defaultComponentMap","App","componentMap","appLogo","componentMapFinal","imageDirectory","generalConstants","sparkIcon","spark","ChatBotButton","valueElement","chatbot_prompt","showLLMPopup","setShowLLMPopup","setPrompt","prompt","valueToReplace","handleSparkClick","inputValue","open","location","origin"],"mappings":"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","x_google_ignoreList":[4]}